webpackJsonp([3],{1348:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(1461),d=n(c),p=a(1450),f=n(p),m=a(1457),h=n(m),g=a(1459),v=n(g),b=a(1448),y=n(b),E=a(1460),_=n(E),k=a(1456),S=n(k),N=a(495),w=n(N),C=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={tabKey:1,tamperUsrName:"admin",tamperUsrToken:"",tamperIsSuper:1,tamperErrorMsg:"",tamperLoginBox:!0,tamperRegisterBox:!1},a}return l(t,e),o(t,[{key:"componentDidMount",value:function(){document.title="区块链防篡改1"}},{key:"handleToggleTab",value:function(e){this.setState({tabKey:e})}},{key:"handleToggleLogin",value:function(){this.setState({tamperLoginBox:!this.state.tamperLoginBox,tamperRegisterBox:!this.state.tamperRegisterBox,tamperErrorMsg:""})}},{key:"tamperLoginConfirm",value:function(){var e=this,t=$.trim($(".tamper-user-name").val()),a=$.trim($(".tamper-usr-pwd").val());""==t?e.setState({tamperErrorMsg:"请输入用户名!"}):""==a?e.setState({tamperErrorMsg:"请输入密码!"}):$.ajax({url:"/api/tamper_proof/log_in/",type:"POST",dataType:"json",cache:!1,data:{username:t,password:a,service_type:"web"},success:function(a){"SUCCESS"==a[0].status?e.setState({tamperUsrName:t,tabKey:1,tamperIsSuper:a[0].result.is_super,tamperErrorMsg:""}):e.setState({tamperErrorMsg:"登录失败，请检查您所填的信息"})},error:function(){e.setState({tamperErrorMsg:"登录失败!"})}})}},{key:"tamperRegisterConfirm",value:function(){var e=this,t=$(".tamper-user-name-register").val(),a=$(".tamper-user-pwd-register").val(),n=$(".tamper-user-pwd2-register").val(),s=$(".tamper-user-position-register").val(),r=$(".tamper-user-department-register").val(),l=$(".tamper-user-email-register").val(),o=$(".tamper-user-phone-register").val(),i=/^[0-9A-Za-z_]{6,18}$/,u=/^[\u4e00-\u9fa5a-zA-Z0-9]{2,18}/,c=/^1[3|4|5|7|8][0-9]{9}$/,d=/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/;""==t?e.setState({tamperErrorMsg:"请输入用户名!"}):""==s?e.setState({tamperErrorMsg:"请输入职位!"}):""==r?e.setState({tamperErrorMsg:"请输入部门!"}):""==l?e.setState({tamperErrorMsg:"请输入邮箱!"}):""==o?e.setState({tamperErrorMsg:"请输入手机号码!"}):""==a?e.setState({tamperErrorMsg:"请输入密码!"}):""==n?e.setState({tamperErrorMsg:"请再次输入密码!"}):d.test(l)?c.test(o)?u.test(t)?i.test(a)?a!=n?e.setState({tamperErrorMsg:"两次输入密码不一致!"}):$.ajax({url:"/api/tamper_proof/register/",type:"POST",dataType:"json",cache:!1,data:{username:t,password:a,position:s,department:r,email:l,phone:o,service_type:"web"},success:function(a){e.setState({tamperUsrName:t,tamperUsrToken:a[0].result.token,tamperIsSuper:a[0].result.is_super,tamperLoginBox:!0,tamperRegisterBox:!1,tamperErrorMsg:""})},error:function(){e.setState({tamperErrorMsg:"注册失败!"})}}):e.setState({tamperErrorMsg:"密码规则：6-18为数字字母下划线!"}):e.setState({tamperErrorMsg:"用户名规则：2-18为数字字母汉字!"}):e.setState({tamperErrorMsg:"请输入正确的手机号码!"}):e.setState({tamperErrorMsg:"请输入正确的邮箱!"})}},{key:"tamperCancelLogin",value:function(){var e=this;$.ajax({url:"/api/tamper_proof/log_out/",type:"POST",dataType:"json",cache:!1,data:{username:e.state.tamperUsrName,service_type:"web"},success:function(t){e.setState({tamperUsrName:"",tabKey:0})},error:function(){}})}},{key:"componentDidMount",value:function(){document.title="区块链防篡改"}},{key:"render",value:function(){return u.default.createElement("div",{className:"tamper databaseCover"},u.default.createElement("div",{className:"topPluginAction tamper-head"},u.default.createElement("h2",{style:{marginBottom:0==this.state.tabKey?"40px":"10px"}},"区块链防篡改",0!==this.state.tabKey&&u.default.createElement("b",{className:"tamperUsrName"},"当前账号：",this.state.tamperUsrName," ",u.default.createElement("a",{onClick:this.tamperCancelLogin.bind(this)},"注销"))),0!==this.state.tabKey&&u.default.createElement("ul",{className:"tab-tamper clearfix"},u.default.createElement("li",{className:1==this.state.tabKey?"tab-active":"",onClick:this.handleToggleTab.bind(this,1)},"版本信息维护"),u.default.createElement("li",{className:2==this.state.tabKey?"tab-active":"",onClick:this.handleToggleTab.bind(this,2)},"文件管理"),u.default.createElement("li",{className:3==this.state.tabKey?"tab-active":"",onClick:this.handleToggleTab.bind(this,3)},"防篡改状态监视"),u.default.createElement("li",{className:4==this.state.tabKey?"tab-active":"",onClick:this.handleToggleTab.bind(this,4)},"用户操作日志"),u.default.createElement("li",{className:5==this.state.tabKey?"tab-active":"",onClick:this.handleToggleTab.bind(this,5)},"客户端防篡改日志"),u.default.createElement("li",{className:6==this.state.tabKey?"tab-active":"",onClick:this.handleToggleTab.bind(this,6)},"用户管理"))),u.default.createElement("div",{className:"database-content tamper-content"},-1==this.state.tabKey&&u.default.createElement(w.default,null),0==this.state.tabKey&&u.default.createElement(S.default,{tabKey:this.state.tabKey,tamperLoginBox:this.state.tamperLoginBox,tamperRegisterBox:this.state.tamperRegisterBox,tamperErrorMsg:this.state.tamperErrorMsg,handleToggleLogin:this.handleToggleLogin.bind(this),tamperLoginConfirm:this.tamperLoginConfirm.bind(this),tamperRegisterConfirm:this.tamperRegisterConfirm.bind(this)}),1==this.state.tabKey&&u.default.createElement(d.default,{tamperUsrName:this.state.tamperUsrName,tamperUsrToken:this.state.tamperUsrToken,tamperIsSuper:this.state.tamperIsSuper,tabKey:this.state.tabKey}),2==this.state.tabKey&&u.default.createElement(f.default,{tamperUsrName:this.state.tamperUsrName,tamperUsrToken:this.state.tamperUsrToken,tamperIsSuper:this.state.tamperIsSuper,tabKey:this.state.tabKey}),3==this.state.tabKey&&u.default.createElement(h.default,{tamperUsrName:this.state.tamperUsrName,tamperUsrToken:this.state.tamperUsrToken,tamperIsSuper:this.state.tamperIsSuper,tabKey:this.state.tabKey}),4==this.state.tabKey&&u.default.createElement(v.default,{tamperUsrName:this.state.tamperUsrName,tamperUsrToken:this.state.tamperUsrToken,tamperIsSuper:this.state.tamperIsSuper,tabKey:this.state.tabKey}),5==this.state.tabKey&&u.default.createElement(y.default,{tamperUsrName:this.state.tamperUsrName,tamperUsrToken:this.state.tamperUsrToken,tamperIsSuper:this.state.tamperIsSuper,tabKey:this.state.tabKey}),6==this.state.tabKey&&u.default.createElement(_.default,{tamperUsrName:this.state.tamperUsrName,tamperUsrToken:this.state.tamperUsrToken,tamperIsSuper:this.state.tamperIsSuper,tabKey:this.state.tabKey})))}}]),t}(u.default.Component);t.default=C},1353:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(23),d=n(c),p=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={itemsToSelect:a.props.itemsToSelect,activeItem:a.props.itemDefault||a.props.itemsToSelect[0],showListBlock:!1},a}return l(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this;(0,d.default)(document).bind("click",function(t){if(e.state.showListBlock){for(var a=t||window.event,n=a.target||a.srcElement;n;){if(n.id&&n.id==e.props.listID)return;n=n.parentNode}e.setState({showListBlock:!1})}})}},{key:"componentWillReceiveProps",value:function(e){JSON.stringify(this.props.itemsToSelect)!=JSON.stringify(e.itemsToSelect)&&this.setState({itemsToSelect:e.itemsToSelect}),JSON.stringify(this.props.itemDefault)!=JSON.stringify(e.itemDefault)&&(this.setState({activeItem:e.itemDefault||e.itemsToSelect[0]}),this.props.onSelect(e.itemDefault.value))}},{key:"changeListState",value:function(){(0,d.default)(".my-dropdown-list .item-selected").blur(),(0,d.default)(".select-img i").toggleClass("fa-angle-down").toggleClass("fa-angle-up"),this.setState({showListBlock:!this.state.showListBlock})}},{key:"selectItem",value:function(e){this.setState({activeItem:e}),this.changeListState(),this.props.onSelect(e.value)}},{key:"render",value:function(){var e=this,t=this.state.itemsToSelect&&this.state.itemsToSelect.map(function(t,a){return u.default.createElement("li",{key:"select-item-"+a,className:JSON.stringify(t)==JSON.stringify(e.state.activeItem)?"active":"",onClick:e.selectItem.bind(e,t)},u.default.createElement("span",null,t.name))});return u.default.createElement("div",{className:"my-dropdown-list",id:this.props.listID},u.default.createElement("div",null,u.default.createElement("div",{className:"select-img",onClick:this.changeListState.bind(this)},u.default.createElement("i",{className:"fas fa-angle-down"})),u.default.createElement("input",{className:"item-selected",type:"text",readOnly:!0,value:this.state.activeItem&&this.state.activeItem.name,onClick:this.changeListState.bind(this)})),u.default.createElement("div",{className:this.state.showListBlock&&t.length>0?"list-block":"hide list-block"},u.default.createElement("ul",null,t)))}}]),t}(u.default.Component);t.default=p},1355:function(e,t,a){},1357:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(1),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return r(t,e),l(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"tamperLoadingBox"},i.default.createElement("i",{className:"fa fa-spinner fa-spin fa-4x"}),i.default.createElement("div",{className:"ajax-progress-box"},i.default.createElement("div",{className:"ajax-progress",style:{width:this.props.progressTime+"%"}})))}}]),t}(i.default.Component);t.default=u},1445:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(23),d=n(c),p=a(1353),f=n(p),m=a(273),h=n(m),g=a(495),v=n(g),b=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={newFileName:"",nameRootPath:"",absoluteRootPath:"",hostSelector:[],hostServer:"",isLoading:!0,showMsgBox:!1,msgContent:"",msgButtonState:!1,msgButtonName:"",isShowedBadBehaveSetting:!1},a}return l(t,e),o(t,[{key:"handleConfirmMsgBox",value:function(){this.setState({showMsgBox:!1})}},{key:"searchItem",value:function(e){this.setState({hostServer:e})}},{key:"newFileChange",value:function(e){this.setState({newFileName:e.target.value})}},{key:"changeNameRootPath",value:function(e){this.setState({nameRootPath:e.target.value})}},{key:"changeAbsoluteRootPath",value:function(e){this.setState({absoluteRootPath:e.target.value})}},{key:"newRootPath",value:function(){var e=this;e.setState({isLoading:!0});var t={token:this.props.tamperUsrToken,host_name:this.state.hostServer.toString(),root_path:this.state.absoluteRootPath,root_mark:this.state.nameRootPath,username:this.props.username,password:this.state.password,service_type:"web"};d.default.ajax({url:"/api/tamper_proof/new_user_root_path/",type:"POST",dataType:"json",data:t,success:function(t){"FAILURE"==t[0].status&&e.setState({showMsgBox:!0,msgContent:"新建根目录失败",msgButtonState:!0,msgButtonName:"确认",isLoading:!1}),"SUCCESS"==t[0].status&&(e.setState({isLoading:!1}),e.props.hideAllotRootPath(),e.props.userDetailList(e.props.username,e.props.is_super,e.props.status,e.props.position,e.props.phone,e.props.email,e.props.department))}})}},{key:"getHostList",value:function(){var e=this;d.default.ajax({url:"/api/tamper_proof/get_host_list/",type:"POST",dataType:"json",data:{token:this.props.tamperUsrToken,service_type:"web"},success:function(t){e.setState({hostSelector:t[0].result})}})}},{key:"componentWillMount",value:function(){this.setState({isLoading:!1}),this.getHostList()}},{key:"render",value:function(){var e=this,t=[{name:"选择主机",value:"clientname"}];return this.state.hostSelector.map(function(e,a){t.push({name:e.host_name,value:e.host_name})}),1==this.props.showAllotRootPath&&u.default.createElement("div",{style:{width:"100%",height:"100%"}},u.default.createElement("div",{className:"addRootPath"},u.default.createElement("div",{className:"AllotRootPath"},u.default.createElement("div",{className:"header"},"新建根目录"),this.state.isLoading&&u.default.createElement(v.default,null),!this.state.isLoading&&u.default.createElement("div",null,u.default.createElement(f.default,{listID:"whitelist-type-list",itemsToSelect:t,onSelect:function(t){return e.searchItem(t)}}),u.default.createElement("div",{className:"nameDic"},"命名该根目录",u.default.createElement("br",null),u.default.createElement("input",{placeholder:"请命名该根目录",value:this.state.nameRootPath,onChange:function(t){return e.changeNameRootPath(t)}})),u.default.createElement("div",{className:"rootName"},"根目录绝对地址",u.default.createElement("br",null),u.default.createElement("input",{placeholder:"请输入根目录绝对地址",value:this.state.absoluteRootPath,onChange:function(t){return e.changeAbsoluteRootPath(t)}})),u.default.createElement("div",{className:"line"}),u.default.createElement("div",{className:"AllotOpration"},u.default.createElement("button",{className:"cancelOpration",onClick:this.props.hideAllotRootPath.bind(this)},"取消"),u.default.createElement("button",{onClick:this.newRootPath.bind(this)},"新建根目录"))))),u.default.createElement("div",{className:"addRootPathMask"}),u.default.createElement(h.default,{showMsgBox:this.state.showMsgBox,msgContent:this.state.msgContent,msgButtonState:this.state.msgButtonState,msgButtonName:this.state.msgButtonName,handleConfirmMsgBox:this.handleConfirmMsgBox.bind(this)}))}}]),t}(u.default.Component);t.default=b},1446:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(23),d=n(c),p=a(273),f=n(p),m=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={rootPathListName:[],treeStructureList:[],treeStructure:[],isLoading:!0,showMsgBox:!1,msgContent:"",msgButtonState:!1,msgButtonName:"",isShowedBadBehaveSetting:!1},a}return l(t,e),o(t,[{key:"handleConfirmMsgBox",value:function(){this.setState({showMsgBox:!1})}},{key:"componentWillMount",value:function(){var e=this;d.default.ajax({url:"/api/tamper_proof/get_all_host_path/",dataType:"json",type:"POST",data:{token:this.props.tamperUsrToken,service_type:"web"},success:function(t){if("FAILURE"==t[0].status&&e.setState({showMsgBox:!0,msgContent:"获取根目录列表失败",msgButtonState:!0,msgButtonName:"确认",isLoading:!1}),"SUCCESS"==t[0].status){var a=[];for(var n in t[0].result)a.push(n);e.setState({rootPathListName:a,treeStructure:t[0].result,isLoading:!1})}}})}},{key:"checkSingle",value:function(e,t,a){(0,d.default)(a.target).hasClass("cancel")?(0,d.default)(a.target).addClass("slector").removeClass("cancel"):(0,d.default)(a.target).addClass("cancel").removeClass("slector")}},{key:"submitChange",value:function(){var e=[],t=this;t.setState({isLoading:!0});for(var a=0;a<(0,d.default)(".checkSingle").length;a++){var n=(0,d.default)(".checkSingle")[a];if((0,d.default)(n).is(".slector")){var s={};s.host=(0,d.default)(n).attr("title"),s.path=(0,d.default)(n).attr("name"),e.push(s)}}var r={token:this.props.tamperUsrToken,userName:this.props.username,password:this.state.password,assignRootPath:JSON.stringify(e),service_type:"web"};d.default.ajax({url:"/api/tamper_proof/assign_user_root_path/",dataType:"json",type:"POST",data:r,success:function(e){"FAILURE"==e[0].status&&t.setState({showMsgBox:!0,msgContent:"分配根目录失败",msgButtonState:!0,msgButtonName:"确认",isLoading:!1}),"SUCCESS"==e[0].status&&(t.setState({isLoading:!1}),t.props.hideAddRootPath(),t.props.userDetailList(t.props.username,t.props.is_super,t.props.status,t.props.position,t.props.phone,t.props.email,t.props.department))},error:function(){t.setState({showMsgBox:!0,msgContent:"分配根目录失败",msgButtonState:!0,msgButtonName:"确认",isLoading:!1})}})}},{key:"changeRootList",value:function(e,t,a,n){(0,d.default)(n.target).hasClass("showAllFile")?((0,d.default)(n.target).removeClass("showAllFile").addClass("hideAllFile"),(0,d.default)(".rootPath-content").eq(a).find(".showRootList").slideUp(200)):((0,d.default)(n.target).removeClass("hideAllFile").addClass("showAllFile"),(0,d.default)(".rootPath-content").eq(a).find(".showRootList").slideDown(200)),this.setState({treeStructureList:JSON.parse(t)})}},{key:"render",value:function(){return this.props.showAddRootPath&&u.default.createElement("div",{className:"addRootPath"},u.default.createElement("div",{className:"content"},u.default.createElement("div",{className:"header"},"分配已有根目录"),u.default.createElement("div",{className:"search"},u.default.createElement("input",{placeholder:"搜索现有根目录"}),u.default.createElement("button",null,"搜索")),u.default.createElement("div",{className:"fileDirectory"},this.state.rootPathListName&&this.state.rootPathListName.map(function(e,t){var a=this,n=this.state.treeStructure[e];return n=JSON.stringify(n),u.default.createElement("div",{key:t,className:"rootPath-content"},u.default.createElement("div",{className:"colFileDir clearfix"},u.default.createElement("div",{className:"hideAllFile",onClick:function(s){return a.changeRootList(e,n,t,s)}}),u.default.createElement("i",{className:"fa fa-server","aria-hidden":"true"}),u.default.createElement("div",{className:"fileName"},e)),u.default.createElement("div",{className:"showRootList"},u.default.createElement("div",{className:"thead clearfix"},u.default.createElement("div",null,"分配"),u.default.createElement("div",null,"根目录别名"),u.default.createElement("div",null,"绝对路径")),u.default.createElement("div",{className:"line"}),u.default.createElement("div",{className:"tboady"},this.state.treeStructureList.map(function(t,a){var n=this;return u.default.createElement("div",{key:a,className:"rootSingleRow clearfix"},u.default.createElement("div",{className:"checkSingle cancel",title:e,name:t.protect_root_path,onClick:function(a){return n.checkSingle(t.protect_root_path,e,a)}}," "),u.default.createElement("div",{className:"rootAlias",title:t.protect_path_mark},u.default.createElement("i",{className:"fa fa-folder fl","aria-hidden":"true"}),t.protect_path_mark),u.default.createElement("div",{className:"absoluteRoot",title:t.protect_root_path},t.protect_root_path))}.bind(this)))))}.bind(this))),u.default.createElement("div",{className:"pathOperation"},u.default.createElement("button",{className:"pathCancel",onClick:this.props.hideAddRootPath.bind(this)},"取消"),u.default.createElement("button",{className:"pathSave",onClick:this.submitChange.bind(this)},"保存修改"))),u.default.createElement(f.default,{showMsgBox:this.state.showMsgBox,msgContent:this.state.msgContent,msgButtonState:this.state.msgButtonState,msgButtonName:this.state.msgButtonName,handleConfirmMsgBox:this.handleConfirmMsgBox.bind(this),isLarge:this.state.isMsgBoxLarge}))}}]),t}(u.default.Component);t.default=m},1447:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(1357),d=n(c),p=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return l(t,e),o(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"BackVersionBox",style:{display:this.props.showVersionBox?"block":"none"}},u.default.createElement("div",{className:"back-version-content"},u.default.createElement("h2",{className:"back-v-title clearfix"},"版本回滚确认 ",u.default.createElement("i",{className:"close-icon",onClick:this.props.handleCloseVersionConform.bind(this)},"×")),u.default.createElement("h3",{className:"back-v-list"},"版本编号：",u.default.createElement("b",null,this.props.backVersionState.version)),u.default.createElement("h3",{className:"back-v-list"},"版本生成时间：",u.default.createElement("b",null,this.props.backVersionState.time)),u.default.createElement("h3",{className:"back-v-list"},"变更类型：",u.default.createElement("b",null,this.props.backVersionState.action)),u.default.createElement("h3",{className:"back-v-list"},"变更的文件路径：",u.default.createElement("b",null,this.props.backVersionState.filePath)),u.default.createElement("h3",{className:"back-v-list"},"备注信息：",u.default.createElement("b",null,this.props.backVersionState.mark)),u.default.createElement("div",{className:"usrMsgFill"},u.default.createElement("ul",null,u.default.createElement("li",null,"用户名 ",u.default.createElement("br",null),u.default.createElement("input",{type:"text"})),u.default.createElement("li",null,"密码 ",u.default.createElement("br",null),u.default.createElement("input",{type:"password"})))),u.default.createElement("div",{className:"version-action"},u.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-back",onClick:this.props.handleVersionConformBack.bind(this)},"开始回滚"),u.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-cancel",onClick:this.props.handleCloseVersionConform.bind(this)},"取消")),u.default.createElement("p",{className:"errorMsg"},this.props.errorMsg)),this.props.tamperLoadingBox&&u.default.createElement(d.default,{progressTime:this.props.progressTime}))}}]),t}(u.default.Component);t.default=p},1448:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(23),d=n(c),p=a(100),f=a(495),m=n(f);a(1355);var h=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={clientData:null,isLoading:!1,isError:!1,pageIndex:1,pageCount:10,type:"all"},a.ClientDataList=[{name:"显示所有",value:"local"}],a}return l(t,e),o(t,[{key:"handleTypeChange",value:function(e){this.setState({type:e})}},{key:"handleChange",value:function(e){this.setState({pageIndex:e}),this.getClientData(e)}},{key:"handleInputValue",value:function(e){var t=/^[0-9]+$/,a=parseInt((0,d.default)(e.target).val());t.test((0,d.default)(e.target).val())||(0,d.default)(e.target).val(""),a>this.state.pageCount&&(0,d.default)(e.target).val(this.state.pageCount),a<=0&&(0,d.default)(e.target).val(""),13==e.keyCode&&t.test((0,d.default)(e.target).val())&&this.getClientData(a)}},{key:"iconClick",value:function(){var e=parseInt((0,d.default)("#serverDataIndex").val());e&&(this.setState({pageIndex:e}),this.getClientData(e))}},{key:"getClientData",value:function(e){this.setState({isLoading:!0});var t=this;d.default.ajax({url:"/api/tamper_proof/get_client_log/",type:"POST",dataType:"json",data:{pagenum:e,pagesize:20,username:this.props.tamperUsrName,token:this.props.tamperUsrToken,is_super:this.props.tamperIsSuper,service_type:"web"},success:function(a){t.setState({pageIndex:e,clientData:a.content,isLoading:!1,isError:!1,pageCount:parseInt(Math.ceil(a.total/20))})},error:function(e){t.setState({isLoading:!1,isError:!0})}})}},{key:"componentWillMount",value:function(){this.getClientData(1)}},{key:"render",value:function(){var e=this;return 5==this.props.tabKey&&u.default.createElement("div",{className:"version-msg-list clientDataList"},this.state.isLoading&&u.default.createElement(m.default,null),this.state.isError&&u.default.createElement("div",{className:"ClientError"},"加载失败！"),this.state.clientData&&!this.state.isLoading&&!this.state.isError&&u.default.createElement("div",null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"所属机器"),u.default.createElement("th",null,"篡改时间 "),u.default.createElement("th",null,"篡改类型"),u.default.createElement("th",null,"源路径"),u.default.createElement("th",null,"目的路径"))),u.default.createElement("tbody",null,this.state.clientData.map(function(e,t){var a=JSON.parse(e._source.message);return u.default.createElement("tr",{key:t},u.default.createElement("td",null,a.client_address),u.default.createElement("td",null,a.timestamp),u.default.createElement("td",null,a.tamper_type),u.default.createElement("td",null,a.spath),u.default.createElement("td",null,a.root_path))}))),u.default.createElement("div",{className:"pagination-all"},u.default.createElement(p.Pagination,{prev:!0,next:!0,first:!1,last:!1,ellipsis:!0,boundaryLinks:!0,items:this.state.pageCount,maxButtons:7,activePage:this.state.pageIndex,onSelect:this.handleChange.bind(this)}),u.default.createElement("div",{className:"pageCount"},u.default.createElement("input",{className:"pageNum",id:"serverDataIndex",placeholder:"输入",onChange:this.handleInputValue.bind(this)}),u.default.createElement("img",{className:"searchNum",onClick:function(){return e.iconClick()},src:"/static/img/skip.svg"})))))}}]),t}(u.default.Component);t.default=h},1449:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(1357),d=n(c),p=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return l(t,e),o(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"BackVersionBox"},u.default.createElement("div",{className:"back-version-content"},u.default.createElement("h2",{className:"back-v-title clearfix"},"删除确认",u.default.createElement("i",{className:"close-icon",onClick:this.props.handleCancelDelete.bind(this)},"×")),u.default.createElement("div",{style:{height:"158px",overflowY:"auto"}},this.props.deleteList&&this.props.deleteList.map(function(e,t){return u.default.createElement("h3",{className:"back-v-list",key:t},"路径：",u.default.createElement("b",null,e.path))})),u.default.createElement("div",{className:"version-action"},u.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-back",onClick:this.props.handleCancelDelete.bind(this)},"取消"),u.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-cancel",onClick:this.props.handleConformDelete.bind(this)},"确认")),u.default.createElement("p",{className:"errorMsg"},this.props.fileActionError)),this.props.tamperLoadingBox&&u.default.createElement(d.default,{progressTime:this.props.progressTime}))}}]),t}(u.default.Component);t.default=p},1450:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(23),d=n(c),p=a(1454),f=n(p),m=a(1449),h=n(m),g=a(1453),v=n(g),b=a(1451),y=n(b),E=a(1452),_=n(E),k=a(1458),S=n(k),N=a(495),w=n(N),C=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={clientListShow:!1,clientNameFile:"你可访问的主机",clientList:[],rootFileListShow:!1,rootFileList:[],filePathListShow:!1,filePathList:[],versionHistoryBox:!1,versionHistoryMsg:{name:"",path:"",data:[]},DeleteFileBox:!1,RenameFileBox:!1,MoveFileBox:!1,NewFileBox:!1,UploadFileBox:!1,fileSelectStatus:!1,operationPath:"",operationRootName:"",selectFileOptions:[],deleteList:[],uploadFileName:"请选择您要上传的文件",renameFileNewName:"",renameFileName:"",renameFilePath:"",renameFileNewPath:"",renameFileType:"",globalRootName:"",globalRootPath:"",fileTree:[],getDataOrNot:!1,tamperLoadingBox:!1,uploadFileSizeOut:"",fileActionError:"",progressTime:0},a}return l(t,e),o(t,[{key:"getProgressTime",value:function(e,t){var a=this;d.default.ajax({url:"/api/tamper_proof/query_task_progress/",type:"POST",dataType:"json",cache:!1,data:{service_type:"web",task_id:e},error:function(){switch(a.setState({progressTime:0}),t){case"delete":a.setState({tamperLoadingBox:!1,fileActionError:"删除失败"});break;case"new":a.setState({tamperLoadingBox:!1,fileActionError:"新建失败"});break;case"remove":a.setState({tamperLoadingBox:!1,fileActionError:"移动失败"});break;case"upLoad":a.setState({tamperLoadingBox:!1,uploadFileSizeOut:"上传失败"});break;case"reName":a.setState({tamperLoadingBox:!1,fileActionError:"重命名失败"});break;default:a.setState({fileActionError:"回滚失败",tamperLoadingBox:!1})}clearInterval(a.progressInterval)},success:function(e){if("FAILURE"==e.status){switch(a.setState({progressTime:0}),t){case"delete":a.setState({tamperLoadingBox:!1,fileActionError:"删除失败"});break;case"new":a.setState({tamperLoadingBox:!1,fileActionError:"新建失败"});break;case"remove":a.setState({tamperLoadingBox:!1,fileActionError:"移动失败"});break;case"upLoad":a.setState({tamperLoadingBox:!1,uploadFileSizeOut:"上传失败"});break;case"reName":a.setState({tamperLoadingBox:!1,fileActionError:"重命名失败"});break;default:a.setState({fileActionError:"回滚失败",tamperLoadingBox:!1})}clearInterval(a.progressInterval)}else a.setState({progressTime:e.percentage}),100==e.percentage&&(setTimeout(function(){switch(t){case"delete":(0,d.default)("td.selectFileBtn a").removeClass("onSelect"),(0,d.default)("th.selectFileBtn a").removeClass("onSelect"),a.getUsrOperationList(),(0,d.default)(".file-manage-title a").eq(2).css({background:"#007AE1"}).nextAll().remove(),a.getOtherFileList(a.state.operationRootName,a.state.globalRootPath,a.state.globalRootName),a.setState({DeleteFileBox:!1,tamperLoadingBox:!1});break;case"new":a.setState({NewFileBox:!1,tamperLoadingBox:!1}),a.getOtherFileList(a.state.operationRootName,a.state.globalRootPath,a.state.globalRootName),(0,d.default)(".file-manage-title a").eq(2).css({background:"#007AE1"}).nextAll().remove();break;case"remove":setTimeout(function(){a.setState({MoveFileBox:!1,tamperLoadingBox:!1})},500),(0,d.default)("td.selectFileBtn a").removeClass("onSelect"),(0,d.default)("th.selectFileBtn a").removeClass("onSelect"),a.getUsrOperationList(),(0,d.default)(".file-manage-title a").eq(2).css({background:"#007AE1"}).nextAll().remove(),a.getOtherFileList(a.state.operationRootName,a.state.globalRootPath,a.state.globalRootName);break;case"upLoad":a.setState({UploadFileBox:!1,tamperLoadingBox:!1,uploadFileSizeOut:""}),(0,d.default)(".file-manage-title a").eq(2).css({background:"#007AE1"}).nextAll().remove(),a.getOtherFileList(a.state.operationRootName,a.state.globalRootPath,a.state.globalRootName);var e=(0,d.default)("#uploadForm input");e.after(e.clone().val("")),e.remove();break;case"reName":a.setState({RenameFileBox:!1,tamperLoadingBox:!1}),(0,d.default)(".file-manage-title a").eq(2).css({background:"#007AE1"}).nextAll().remove(),a.getOtherFileList(a.state.operationRootName,a.state.globalRootPath,a.state.globalRootName);break;default:a.setState({versionHistoryBox:!1,tamperLoadingBox:!1})}},500),clearInterval(a.progressInterval))}})}},{key:"loopGetProgress",value:function(e,t){var a=this;this.progressInterval=setInterval(function(){a.getProgressTime(e,t)},200)}},{key:"getHostList",value:function(){var e=this;d.default.ajax({url:"/api/tamper_proof/get_user_host_detail/",type:"POST",dataType:"json",cache:!1,data:{username:this.props.tamperUsrName,is_super:this.props.tamperIsSuper,token:this.props.tamperUsrToken,service_type:"web"},error:function(){e.setState({clientList:[],clientListShow:!0,rootFileListShow:!1,filePathListShow:!1})},success:function(t){"FAILURE"==t[0].status?e.setState({clientList:[],clientListShow:!0,rootFileListShow:!1,filePathListShow:!1}):e.setState({clientList:t[0].result,clientListShow:!0,rootFileListShow:!1,filePathListShow:!1})}})}},{key:"getHostRootList",value:function(e){var t=this;d.default.ajax({url:"/api/tamper_proof/get_user_rootpath_list/",type:"POST",dataType:"json",cache:!1,data:{username:this.props.tamperUsrName,host_name:e,token:this.props.tamperUsrToken,service_type:"web"},error:function(){t.setState({rootFileList:[],operationRootName:e,clientListShow:!1,rootFileListShow:!0,filePathListShow:!1})},success:function(a){"FAILURE"==a[0].status?t.setState({rootFileList:[],operationRootName:e,clientListShow:!1,rootFileListShow:!0,filePathListShow:!1}):t.setState({rootFileList:a[0].result,operationRootName:e,clientListShow:!1,rootFileListShow:!0,filePathListShow:!1})}})}},{key:"reduxData",value:function(e,t){var a=[],n=void 0;for(n in e)a.push(n);for(var s=[],r=0;r<a.length;r++){var l=a[r];s.push(e[l])}for(var o=0;o<s.length;o++){var i=s[o];i.name=a[o],t.push(i)}return t}},{key:"getOtherFileList",value:function(e,t,a){var n=this;d.default.ajax({url:"/api/tamper_proof/get_root_path_tree/",type:"POST",dataType:"json",cache:!1,data:{host_name:e,root_path:t,token:this.props.tamperUsrToken,service_type:"web"},success:function(e){var s;s=void 0==e[0].result[t]?{}:e[0].result[t].nodes;var r=[];n.reduxData(s,r),n.setState({filePathList:r,operationPath:t,clientListShow:!1,rootFileListShow:!1,filePathListShow:!0,globalRootName:a,globalRootPath:t})}})}},{key:"handleShowFile",value:function(e){this.setState({clientNameFile:"主机列表",clientListShow:!1,rootFileListShow:!1,filePathListShow:!1}),this.getHostRootList(e),(0,d.default)(".file-manage-title a").css({background:"#444851"});var t=document.createElement("a"),a=document.createTextNode(e);t.appendChild(a),t.setAttribute("title","根目录"),(0,d.default)(".file-manage-title").append("<b> › </b>").append(t)}},{key:"handleShowRootFilePath",value:function(e,t,a){this.setState({clientListShow:!1,rootFileListShow:!1,filePathListShow:!1}),this.getOtherFileList(e,t,a),(0,d.default)(".file-manage-title a").css({background:"#444851"});var n=document.createElement("a"),s=document.createTextNode(a);n.appendChild(s),n.setAttribute("title","treeAll"),n.dataset.path=t,n.setAttribute("name",a),(0,d.default)(".file-manage-title").append("<b> › </b>").append(n)}},{key:"ajaxGetVersionHistory",value:function(e,t){var a=this;d.default.ajax({url:"/api/tamper_proof/get_version_info/",type:"POST",dataType:"json",cache:!1,data:{host_name:e,root_path:t,token:this.props.tamperUsrToken,service_type:"web"},success:function(n){a.setState({versionHistoryBox:!0,versionHistoryMsg:{name:e,path:t,data:n[0].result}})}})}},{key:"handleShowHistory",value:function(e,t,a){a.stopPropagation(),this.setState({fileActionError:""}),this.ajaxGetVersionHistory(e,t)}},{key:"backThisVersion",value:function(e,t,a,n,s){var r=this;r.setState({tamperLoadingBox:!0,fileActionError:"",progressTime:0}),d.default.ajax({url:"/api/tamper_proof/rollback_version/",type:"POST",dataType:"json",cache:!1,data:{token:this.props.tamperUsrToken,username:this.props.tamperUsrName,host_name:a,root_path:n,org_version_tx_id:s,service_type:"web"},success:function(e){r.loopGetProgress(e[0].result.task_id)},error:function(){r.setState({tamperLoadingBox:!1})}})}},{key:"handleCloseVersionHistory",value:function(){this.setState({versionHistoryBox:!1})}},{key:"handleShowOtherFilePath",value:function(e,t,a){(0,d.default)("td.selectFileBtn a").removeClass("onSelect"),this.getUsrOperationList();var n=[];this.reduxData(e,n),this.setState({filePathList:n,operationPath:a}),(0,d.default)(".file-manage-title a").css({background:"#444851"});var s=document.createElement("a"),r=document.createTextNode(t);s.appendChild(r),s.setAttribute("title",JSON.stringify(n)),(0,d.default)(".file-manage-title").append("<b> › </b>").append(s)}},{key:"handleSelectFile",value:function(e){e.stopPropagation(),(0,d.default)(e.target).toggleClass("onSelect"),this.getUsrOperationList()}},{key:"handleSelectAllOption",value:function(e){(0,d.default)(e.target).is(".onSelect")?((0,d.default)(e.target).removeClass("onSelect"),(0,d.default)("td.selectFileBtn a").removeClass("onSelect")):((0,d.default)(e.target).addClass("onSelect"),(0,d.default)("td.selectFileBtn a").addClass("onSelect")),this.getUsrOperationList()}},{key:"getUsrOperationList",value:function(){for(var e=this.state.filePathList.length,t=(0,d.default)("td.selectFileBtn a"),a=[],n=0;n<e;n++)if((0,d.default)(t[n]).is(".onSelect")){this.setState({fileSelectStatus:!0});var s={path:(0,d.default)(t[n]).attr("title"),type:(0,d.default)(t[n]).html()};a.push(s)}else(0,d.default)("th.selectFileBtn a").removeClass("onSelect");0==a.length&&this.setState({fileSelectStatus:!1}),this.setState({selectFileOptions:a,deleteList:a})}},{key:"handleDeleteFile",value:function(){this.setState({DeleteFileBox:!0,fileActionError:"",progressTime:0})}},{key:"handleCancelDelete",value:function(){this.setState({DeleteFileBox:!1})}},{key:"handleConformDelete",value:function(){this.delOptionConform()}},{key:"delOptionConform",value:function(){var e={token:"token",username:this.props.tamperUsrName,host_name:this.state.operationRootName,root_path:this.state.globalRootPath,operations:{operation:"del",object_list:this.state.selectFileOptions},remark:"del"},t=this;t.setState({tamperLoadingBox:!0}),d.default.ajax({url:"/api/tamper_proof/operations/",type:"POST",dataType:"json",cache:!1,data:{service_type:"web",token:this.props.tamperUsrToken,data:JSON.stringify(e)},success:function(e){"FAILURE"==e[0].status?t.setState({tamperLoadingBox:!1,fileActionError:"删除失败"}):t.loopGetProgress(e[0].result.task_id,"delete")},error:function(){t.setState({tamperLoadingBox:!1,fileActionError:"删除失败"})}})}},{key:"handleMoveFile",value:function(){this.setState({fileActionError:"",progressTime:0});var e=this;d.default.ajax({url:"/api/tamper_proof/get_current_version_folder_tree/",type:"POST",data:{host_name:this.state.operationRootName,root_path:this.state.globalRootPath,token:this.props.tamperUsrToken,service_type:"web"},cache:!1,success:function(t){if("FAILURE"==t[0].status)e.setState({fileActionError:"请求失败"});else{var a=JSON.parse(t)[0].result;a.map(function(e){e.isParent=!0}),e.setState({fileTree:a,MoveFileBox:!0})}},error:function(t){e.setState({fileActionError:"请求失败"})}})}},{key:"handleCancelMove",value:function(){this.setState({MoveFileBox:!1})}},{key:"handleConformMove",value:function(e){var t=this.state.selectFileOptions;if(t[0].path==e)return void this.setState({fileActionError:"移动路径与原路径相同！"});t.map(function(t,a){var n=t.path.split("/"),s=n[n.length-1];t.spath=t.path,t.dpath=e+"/"+s,delete t.path});var a={token:"token",username:this.props.tamperUsrName,host_name:this.state.operationRootName,root_path:this.state.globalRootPath,operations:{operation:"mov",object_list:t},remark:"mov"},n=this;n.setState({tamperLoadingBox:!0}),d.default.ajax({url:"/api/tamper_proof/operations/",type:"POST",dataType:"json",cache:!1,data:{service_type:"web",token:this.props.tamperUsrToken,data:JSON.stringify(a)},success:function(e){"FAILURE"==e[0].status?n.setState({tamperLoadingBox:!1,fileActionError:"移动失败"}):n.loopGetProgress(e[0].result.task_id,"remove")},error:function(){n.setState({tamperLoadingBox:!1,fileActionError:"移动失败"})}})}},{key:"handleRenameFile",value:function(e,t,a,n){n.stopPropagation();var s=a.split("/");s.pop(),this.setState({RenameFileBox:!0,renameFilePath:a,renameFileNewPath:s.join("/"),renameFileNewName:t,renameFileName:t,renameFileType:e,fileActionError:"",progressTime:0})}},{key:"handleNewFileName",value:function(e){this.setState({renameFileNewName:(0,d.default)(e.target).val()})}},{key:"handleCancelRename",value:function(){this.setState({RenameFileBox:!1})}},{key:"handleConformRename",value:function(){var e=/^[0-9A-Za-z_.]{1,20}$/;if(""==(0,d.default)(".newFileName").val()||!e.test(this.state.renameFileNewName))return void this.setState({fileActionError:"请检查文件名"});var t={token:"token",username:this.props.tamperUsrName,host_name:this.state.operationRootName,root_path:this.state.globalRootPath,operations:{operation:"mov",object_list:[{spath:this.state.renameFilePath,dpath:this.state.renameFileNewPath+"/"+this.state.renameFileNewName,type:this.state.renameFileType}]},remark:"new"},a=this;a.setState({tamperLoadingBox:!0}),d.default.ajax({url:"/api/tamper_proof/operations/",type:"POST",dataType:"json",cache:!1,data:{service_type:"web",token:this.props.tamperUsrToken,data:JSON.stringify(t)},success:function(e){"FAILURE"==e[0].status?a.setState({tamperLoadingBox:!1,fileActionError:"重命名失败"}):a.loopGetProgress(e[0].result.task_id,"reName")},error:function(){a.setState({tamperLoadingBox:!1,fileActionError:"重命名失败"})}})}},{key:"ajaxNewFile",value:function(e){var t={token:"token",username:this.props.tamperUsrName,host_name:this.state.operationRootName,root_path:this.state.globalRootPath,operations:{operation:"new",object_list:[{path:this.state.operationPath+"/"+e,type:"tree",content:""}]},remark:"new"},a=this;a.setState({tamperLoadingBox:!0}),d.default.ajax({url:"/api/tamper_proof/operations/",type:"POST",dataType:"json",cache:!1,data:{service_type:"web",token:this.props.tamperUsrToken,data:JSON.stringify(t)},success:function(e){"FAILURE"==e[0].status?a.setState({tamperLoadingBox:!1,fileActionError:"新建失败"}):a.loopGetProgress(e[0].result.task_id,"new")},error:function(){a.setState({tamperLoadingBox:!1,fileActionError:"新建失败"})}})}},{key:"handleNewFile",value:function(){this.setState({NewFileBox:!0,fileActionError:"",progressTime:0})}},{key:"handleCancelNew",value:function(){this.setState({NewFileBox:!1})}},{key:"handleConformNew",value:function(){var e=(0,d.default)(".newFileName").val();if(!/^[0-9A-Za-z_]{1,20}$/.test(e))return void this.setState({fileActionError:"请检查文件名"});this.ajaxNewFile(e)}},{key:"handleUploadFile",value:function(){var e=(0,d.default)("#uploadForm input").val();""==e?this.setState({uploadFileSizeOut:"请选择要上传的文件"}):this.setState({uploadFileSizeOut:""}),this.setState({UploadFileBox:!0,fileActionError:"",uploadFileName:e})}},{key:"handleCancelUpload",value:function(){this.setState({UploadFileBox:!1,uploadFileSizeOut:""})}},{key:"handleConformUpload",value:function(){if(this.setState({tamperLoadingBox:!0,uploadFileSizeOut:"",progressTime:0}),""==(0,d.default)("#uploadForm input").val())this.setState({tamperLoadingBox:!1,uploadFileSizeOut:"请选择要上传的文件"});else{var e=(0,d.default)("#uploadForm input").val().split("\\"),t=e[e.length-1],a=new FormData,n=this;a.append("service_type","web"),a.append("token",this.props.tamperUsrToken),a.append("username",this.props.tamperUsrName),a.append("host_name",this.state.operationRootName),a.append("root_path",this.state.globalRootPath),a.append("operation","new"),a.append("path",this.state.operationPath+"/"+t),a.append("type","blob"),a.append("content",(0,d.default)("#uploadForm input")[0].files[0]),a.append("remark","new"),a.append("isUpload",!0),d.default.ajax({url:"/api/tamper_proof/operations/",type:"POST",data:a,cache:!1,dataType:"json",contentType:!1,processData:!1,success:function(e){"FAILURE"==e[0].status?n.setState({tamperLoadingBox:!1,uploadFileSizeOut:"上传失败"}):n.loopGetProgress(e[0].result.task_id,"upLoad")},error:function(e){n.setState({tamperLoadingBox:!1,uploadFileSizeOut:"上传失败"})}})}}},{key:"handleAccountLimit",value:function(e,t,a,n){(0,d.default)(".limitAccount").eq(t).animate({opacity:.5}),(0,d.default)(".limitAccount").eq(t).attr("disabled","disabled"),n.stopPropagation();var s=this;"protected"==e?d.default.ajax({url:"/api/tamper_proof/stop_user_root_path/",type:"POST",dataType:"json",cache:!1,data:{service_type:"web",host_name:this.state.operationRootName,root_path:a,token:this.props.tamperUsrToken,username:this.props.tamperUsrName},success:function(e){(0,d.default)(".limitAccount").eq(t).removeAttr("disabled"),(0,d.default)(".limitAccount").eq(t).animate({opacity:1}),s.getHostRootList(s.state.operationRootName)},error:function(){}}):d.default.ajax({url:"/api/tamper_proof/start_root_path_protect/",type:"POST",dataType:"json",cache:!1,data:{service_type:"web",host_name:this.state.operationRootName,root_path:a,token:this.props.tamperUsrToken,username:this.props.tamperUsrName},success:function(e){(0,d.default)(".limitAccount").eq(t).removeAttr("disabled"),(0,d.default)(".limitAccount").eq(t).animate({opacity:1}),s.getHostRootList(s.state.operationRootName)},error:function(){}})}},{key:"componentWillMount",value:function(){this.getHostList()}},{key:"componentDidMount",value:function(){var e=this;(0,d.default)(".file-manage-title").on("click","a",function(t){(0,d.default)("td.selectFileBtn a").removeClass("onSelect"),e.getUsrOperationList(),(0,d.default)(t.target).css({background:"#007AE1"}),(0,d.default)(t.target).siblings("a").css({background:"#444851"});var a=(0,d.default)(t.target).attr("title");if("主机列表"==a)e.setState({clientListShow:!1,rootFileListShow:!1,filePathListShow:!1}),e.getHostList();else if("根目录"==a){e.setState({clientListShow:!1,rootFileListShow:!1,filePathListShow:!1});var n=(0,d.default)(t.target).html();e.getHostRootList(n)}else if("treeAll"==a){e.setState({clientListShow:!1,rootFileListShow:!1,filePathListShow:!1});var s=(0,d.default)(t.target).attr("name"),r=(0,d.default)(t.target).attr("data-path");e.getOtherFileList(e.state.operationRootName,r,s)}else{var l=e.state.operationPath.split("/");l=l[l.length-1];var o=(0,d.default)(t.target).attr("title");e.setState({filePathList:JSON.parse(o),clientListShow:!1,operationPath:e.state.operationPath.replace("/"+l,""),rootFileListShow:!1})}(0,d.default)(t.target).nextAll().remove()})}},{key:"render",value:function(){return 2==this.props.tabKey&&u.default.createElement("div",null,u.default.createElement("div",{className:"tamper-list-li"},"  文件管理 "),this.state.filePathListShow&&u.default.createElement("div",null,!this.state.fileSelectStatus&&u.default.createElement("h3",{className:"fileChangeOption"},u.default.createElement("button",{className:"plugAction showHistoryVersion",onClick:this.handleNewFile.bind(this)},"新建文件夹"),u.default.createElement("form",{id:"uploadForm",encType:"multipart/form-data"},u.default.createElement("input",{className:"plugAction showHistoryVersion",type:"file"}),u.default.createElement("button",{type:"button",className:"plugAction showHistoryVersion",onClick:this.handleUploadFile.bind(this)},"上传"))),this.state.fileSelectStatus&&u.default.createElement("h3",{className:"fileChangeOption"},u.default.createElement("button",{className:"plugAction showHistoryVersion",onClick:this.handleMoveFile.bind(this)},"移动"),u.default.createElement("button",{className:"plugAction showHistoryVersion",onClick:this.handleDeleteFile.bind(this)},"删除"))),u.default.createElement("div",{className:"version-msg-list"},u.default.createElement("h4",{className:"file-manage-title"},u.default.createElement("a",{title:"主机列表"},this.state.clientNameFile)),u.default.createElement("div",{className:"datalistTitle"},!this.state.clientListShow&&!this.state.rootFileListShow&&!this.state.filePathListShow&&u.default.createElement(w.default,null),u.default.createElement("table",{className:"databaseHostList fileMange-tab"},u.default.createElement("thead",null,this.state.clientListShow&&u.default.createElement("tr",null,u.default.createElement("th",null,"主机标签"),u.default.createElement("th",null,"IP"),u.default.createElement("th",null,"备注")),this.state.rootFileListShow&&u.default.createElement("tr",null,u.default.createElement("th",null,"根目录标签"),u.default.createElement("th",null,"启用/停用根目录"),u.default.createElement("th",null,"根目录路径"),u.default.createElement("th",null,"最后修改时间"),u.default.createElement("th",null,"ip"),u.default.createElement("th",null,"备注"),u.default.createElement("th",null,"查看历史版本")),this.state.filePathListShow&&u.default.createElement("tr",null,u.default.createElement("th",{className:"selectFileBtn"},u.default.createElement("a",{onClick:this.handleSelectAllOption.bind(this)})),u.default.createElement("th",null,"文件名称"),u.default.createElement("th",null,"最后修改时间"),u.default.createElement("th",null,"大小"),u.default.createElement("th",null,"类型"),u.default.createElement("th",null,"重命名"))),u.default.createElement("tbody",null,this.state.clientListShow&&this.state.clientList.map(function(e,t){return u.default.createElement("tr",{key:t,onClick:this.handleShowFile.bind(this,e.protect_host_name)},u.default.createElement("td",{className:"singleTab"},u.default.createElement("i",{className:"iconfont icon-db_icon file-icon"}),e.protect_host_name),u.default.createElement("td",null,e.protect_host_addr),u.default.createElement("td",null,e.remark))}.bind(this)),this.state.rootFileListShow&&this.state.rootFileList.map(function(e,t){return u.default.createElement("tr",{key:t,onClick:this.handleShowRootFilePath.bind(this,e.protect_host_name,e.protect_root_path,e.protect_path_mark)},u.default.createElement("td",{className:"singleTab"},u.default.createElement("i",{className:"iconfont icon-db_icon file-icon"}),e.protect_path_mark),u.default.createElement("td",null,u.default.createElement("button",{className:"protected"==e.status?"limitAccount":"limitAccount accountForbidden",onClick:this.handleAccountLimit.bind(this,e.status,t,e.protect_root_path)},"protected"==e.status?"停用":"启用")),u.default.createElement("td",null,e.protect_root_path),u.default.createElement("td",null,e.timestamp),u.default.createElement("td",null,e.protect_host_addr),u.default.createElement("td",null,e.remark),u.default.createElement("td",null,u.default.createElement("button",{className:"plugAction showHistoryVersion",onClick:this.handleShowHistory.bind(this,e.protect_host_name,e.protect_root_path)},"查看历史版本")))}.bind(this)),this.state.filePathListShow&&this.state.filePathList.map(function(e,t){return u.default.createElement("tr",{key:t,onClick:!!e.nodes&&this.handleShowOtherFilePath.bind(this,e.nodes,e.name,e.path)},u.default.createElement("td",{className:"singleTab selectFileBtn"},u.default.createElement("a",{onClick:this.handleSelectFile.bind(this),title:e.path},e.type)),u.default.createElement("td",null,u.default.createElement("i",{className:"iconfont icon-db_icon file-icon",style:{display:"tree"==e.type?"inline":"none"}}),e.name),u.default.createElement("td",null,e.time),u.default.createElement("td",null,e.size),u.default.createElement("td",null,e.type),u.default.createElement("td",null,u.default.createElement("button",{className:"plugAction showHistoryVersion",onClick:this.handleRenameFile.bind(this,e.type,e.name,e.path)},"重命名")))}.bind(this)))))),this.state.versionHistoryBox&&u.default.createElement(f.default,{tamperLoadingBox:this.state.tamperLoadingBox,versionHistoryMsg:this.state.versionHistoryMsg,handleCloseVersionHistory:this.handleCloseVersionHistory.bind(this),versionHistoryBox:this.state.versionHistoryBox,backThisVersion:this.backThisVersion.bind(this),errorMsg:this.state.fileActionError,progressTime:this.state.progressTime}),this.state.DeleteFileBox&&u.default.createElement(h.default,{fileActionError:this.state.fileActionError,tamperLoadingBox:this.state.tamperLoadingBox,deleteList:this.state.deleteList,handleCancelDelete:this.handleCancelDelete.bind(this),handleConformDelete:this.handleConformDelete.bind(this),progressTime:this.state.progressTime}),this.state.RenameFileBox&&u.default.createElement(v.default,{fileActionError:this.state.fileActionError,tamperLoadingBox:this.state.tamperLoadingBox,renameFileNewName:this.state.renameFileNewName,renameFilePath:this.state.renameFilePath,handleNewFileName:this.handleNewFileName.bind(this),handleCancelRename:this.handleCancelRename.bind(this),handleConformRename:this.handleConformRename.bind(this),progressTime:this.state.progressTime}),this.state.MoveFileBox&&u.default.createElement(y.default,{fileActionError:this.state.fileActionError,tamperLoadingBox:this.state.tamperLoadingBox,fileTree:this.state.fileTree,handleCancelMove:this.handleCancelMove.bind(this),handleConformMove:this.handleConformMove.bind(this),progressTime:this.state.progressTime}),this.state.NewFileBox&&u.default.createElement(_.default,{fileActionError:this.state.fileActionError,tamperLoadingBox:this.state.tamperLoadingBox,operationPath:this.state.operationPath,handleCancelNew:this.handleCancelNew.bind(this),handleConformNew:this.handleConformNew.bind(this),progressTime:this.state.progressTime}),this.state.UploadFileBox&&u.default.createElement(S.default,{fileActionError:this.state.fileActionError,uploadFileSizeOut:this.state.uploadFileSizeOut,tamperLoadingBox:this.state.tamperLoadingBox,uploadFileName:this.state.uploadFileName,handleCancelUpload:this.handleCancelUpload.bind(this),handleConformUpload:this.handleConformUpload.bind(this),progressTime:this.state.progressTime}))}}]),t}(u.default.Component);t.default=C},1451:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(23),d=n(c),p=a(1357),f=n(p),m=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={moveToPath:!1},a}return l(t,e),o(t,[{key:"zTrees",value:function(){function e(e,t,a){var n=a.path;this.setState({moveToPath:n})}var t={view:{showLine:!1},data:{simpleData:{enable:!0}},callback:{onClick:e.bind(this)}};window.$.fn.zTree.init((0,d.default)("#treeDemo"),t,this.props.fileTree)}},{key:"componentDidMount",value:function(){this.zTrees()}},{key:"render",value:function(){return u.default.createElement("div",{className:"BackVersionBox"},u.default.createElement("div",{className:"back-version-content",style:{height:"500px",margin:"-250px 0 0 -330px"}},u.default.createElement("h2",{className:"back-v-title clearfix"},"移动文件",u.default.createElement("i",{className:"close-icon",onClick:this.props.handleCancelMove.bind(this)},"×")),u.default.createElement("div",{className:"zTreeDemoBackground left"},u.default.createElement("ul",{id:"treeDemo",className:"ztree"})),u.default.createElement("div",{className:"version-action"},u.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-back",onClick:this.props.handleCancelMove.bind(this)},"取消"),u.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-cancel",onClick:this.props.handleConformMove.bind(this,this.state.moveToPath)},"确认")),u.default.createElement("p",{className:"errorMsg"},this.props.fileActionError)),this.props.tamperLoadingBox&&u.default.createElement(f.default,{progressTime:this.props.progressTime}))}}]),t}(u.default.Component);t.default=m},1452:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(23),d=n(c),p=a(1357),f=n(p),m=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={newFileName:"",errorTipMsg:""},a}return l(t,e),o(t,[{key:"handleNewFile",value:function(e){var t=/^[0-9A-Za-z_]{1,20}$/,a=(0,d.default)(e.target).val();t.test(a)?this.setState({newFileName:(0,d.default)(e.target).val(),errorTipMsg:""}):this.setState({errorTipMsg:"文件夹命名规则：长度1~20的字符、数字和下划线"})}},{key:"render",value:function(){return u.default.createElement("div",{className:"BackVersionBox"},u.default.createElement("div",{className:"back-version-content"},u.default.createElement("h2",{className:"back-v-title clearfix"},"新建文件夹确认",u.default.createElement("i",{className:"close-icon",onClick:this.props.handleCancelNew.bind(this)},"×")),u.default.createElement("h3",{className:"back-v-list"},"文件夹：",u.default.createElement("input",{className:"newFileName",onKeyUp:this.handleNewFile.bind(this)})),u.default.createElement("h3",{className:"back-v-list"},"路径：",u.default.createElement("b",null,this.props.operationPath,"/",this.state.newFileName)),u.default.createElement("div",{className:"version-action"},u.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-back",onClick:this.props.handleCancelNew.bind(this)},"取消"),u.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-cancel",onClick:this.props.handleConformNew.bind(this)},"确认")),u.default.createElement("p",{className:"errorMsg"},this.state.errorTipMsg,this.props.fileActionError)),this.props.tamperLoadingBox&&u.default.createElement(f.default,{progressTime:this.props.progressTime}))}}]),t}(u.default.Component);t.default=m},1453:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(1357),d=n(c),p=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return l(t,e),o(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"BackVersionBox"},u.default.createElement("div",{className:"back-version-content"},u.default.createElement("h2",{className:"back-v-title clearfix"},"重命名",u.default.createElement("i",{className:"close-icon",onClick:this.props.handleCancelRename.bind(this)},"×")),u.default.createElement("h3",{className:"back-v-list"},"文件：",u.default.createElement("b",null,this.props.renameFileNewName)),u.default.createElement("h3",{className:"back-v-list"},"路径：",u.default.createElement("b",null,this.props.renameFilePath)),u.default.createElement("h3",{className:"back-v-list"},"重命名： ",u.default.createElement("input",{className:"newFileName",onKeyUp:this.props.handleNewFileName.bind(this)})),u.default.createElement("div",{className:"version-action"},u.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-back",onClick:this.props.handleCancelRename.bind(this)},"取消"),u.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-cancel",onClick:this.props.handleConformRename.bind(this)},"确认")),u.default.createElement("p",{className:"errorMsg"},this.props.fileActionError)),this.props.tamperLoadingBox&&u.default.createElement(d.default,{progressTime:this.props.progressTime}))}}]),t}(u.default.Component);t.default=p},1454:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(100),d=a(23),p=n(d),f=a(1357),m=n(f),h=a(495),g=n(h),v=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={currentListPageNum:1,dataListAllPage:1,versionHistoryList:!1},a}return l(t,e),o(t,[{key:"componentWillMount",value:function(){var e=this.props.versionHistoryMsg.data.length,t=e%6==0?e/6:parseInt(e/6)+1;this.setState({dataListAllPage:t,versionHistoryList:this.props.versionHistoryMsg.data.slice(0,6)})}},{key:"handleChangePage",value:function(e){this.setState({currentListPageNum:e,versionHistoryList:this.props.versionHistoryMsg.data.slice(6*(e-1),6*e)})}},{key:"handleEnterPage",value:function(e){var t=/^[0-9]+$/,a=parseInt((0,p.default)(e.target).val());t.test((0,p.default)(e.target).val())||(0,p.default)(e.target).val(""),a>this.state.dataListAllPage&&(0,p.default)(e.target).val(this.state.dataListAllPage),a<=0&&(0,p.default)(e.target).val(""),13==e.keyCode&&t.test((0,p.default)(e.target).val())&&(this.setState({currentListPageNum:a,versionHistoryList:this.props.versionHistoryMsg.data.slice(6*(a-1),6*a)}),(0,p.default)(e.target).val(""))}},{key:"handleJumpPage",value:function(){var e=parseInt((0,p.default)(".versionHistoryPageNum").val());this.setState({currentListPageNum:e,versionHistoryList:this.props.versionHistoryMsg.data.slice(6*(e-1),6*e)}),(0,p.default)(".versionHistoryPageNum").val("")}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{className:"BackVersionBox version-msg-list"},u.default.createElement("div",{className:"back-version-content",style:{height:"610px",margin:"-305px 0 0 -330px"}},u.default.createElement("h2",{className:"back-v-title clearfix"},"根目录",u.default.createElement("b",null,this.props.versionHistoryMsg.name),u.default.createElement("i",{className:"close-icon",onClick:this.props.handleCloseVersionHistory.bind(this)},"×")),u.default.createElement("div",{className:"versionTabContainer"},u.default.createElement("table",{className:"databaseHostList "},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"版本编号"),u.default.createElement("th",null,"变更类型"),u.default.createElement("th",null,"版本生成时间"),u.default.createElement("th",null,"操作用户"),u.default.createElement("th",null,"回滚"))),u.default.createElement("tbody",null,!this.state.versionHistoryList&&u.default.createElement(g.default,null),this.props.versionHistoryBox&&this.state.versionHistoryList.map(function(t,a){return u.default.createElement("tr",{key:a},u.default.createElement("td",{className:"singleTab"},t.id),u.default.createElement("td",null,t.operate_type),u.default.createElement("td",null,t.timestamp),u.default.createElement("td",null,t.operate_username),u.default.createElement("td",null,u.default.createElement("button",{className:"plugAction showHistoryVersion",onClick:e.props.backThisVersion.bind(e,"token",t.operate_username,t.protect_host_name,t.protect_root_path,t.version_txid)},"回滚到此版本")))})))),u.default.createElement("div",{className:"pagination-all"},u.default.createElement(c.Pagination,{prev:!0,next:!0,first:!1,last:!1,ellipsis:!0,boundaryLinks:!0,items:this.state.dataListAllPage,activePage:this.state.currentListPageNum,maxButtons:7,onSelect:this.handleChangePage.bind(this)}),u.default.createElement("div",{className:"pageCount"},u.default.createElement("input",{className:"pageNum versionHistoryPageNum",placeholder:"输入",onKeyUp:this.handleEnterPage.bind(this),onKeyDown:this.handleEnterPage.bind(this)}),u.default.createElement("img",{className:"searchNum",src:"/static/img/skip.svg",onClick:this.handleJumpPage.bind(this)}))),u.default.createElement("p",{className:"errorMsg"},this.props.errorMsg)),this.props.tamperLoadingBox&&u.default.createElement(m.default,{progressTime:this.props.progressTime}))}}]),t}(u.default.Component);t.default=v},1455:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(1),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return r(t,e),l(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"BackVersionBox",style:{display:this.props.showFileBox?"block":"none"}},i.default.createElement("div",{className:"back-version-content"},i.default.createElement("h2",{className:"back-v-title clearfix"},"文件 ",i.default.createElement("b",null,"xxx"),"所在路径 ",i.default.createElement("i",{className:"close-icon",onClick:this.props.handleCloseFileConform.bind(this)},"×")),i.default.createElement("h3",{className:"pathName"},"Path : all folders/sample folder/sample subfolder/sample subfolder/"),i.default.createElement("div",{className:"zTreeDemoBackground left versionFileChangeList"},this.props.versionFilePathChange.map(function(e,t){return i.default.createElement("p",{key:t},e)})),i.default.createElement("div",{className:"version-action"},i.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-cancel",onClick:this.props.handleCloseFileConform.bind(this)},"确定"))))}}]),t}(i.default.Component);t.default=u},1456:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(1),i=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return r(t,e),l(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"tamperLogin"},i.default.createElement("div",{className:"tamper-list-li"}," 系统登录 "),this.props.tamperLoginBox&&i.default.createElement("div",{className:"tamperLoginBox"},i.default.createElement("div",null,i.default.createElement("p",null,"用户名"),i.default.createElement("input",{style:{display:"none"}}),i.default.createElement("input",{type:"text",className:"tamper-user-name",autoComplete:"off"})),i.default.createElement("div",null,i.default.createElement("p",null,"密码"),i.default.createElement("input",{style:{display:"none"}}),i.default.createElement("input",{type:"password",autoComplete:"off",className:"tamper-usr-pwd"})),i.default.createElement("p",null,i.default.createElement("button",{onClick:this.props.tamperLoginConfirm.bind(this)},"登录")),i.default.createElement("p",{className:"tamper-register-go"},i.default.createElement("a",{className:"tamper-register",onClick:this.props.handleToggleLogin.bind(this)},"立即注册"))),this.props.tamperRegisterBox&&i.default.createElement("div",{className:"tamperLoginBox"},i.default.createElement("div",null,i.default.createElement("p",null,"用户名"),i.default.createElement("input",{style:{display:"none"}}),i.default.createElement("input",{type:"text",className:"tamper-user-name-register",autoComplete:"off"})),i.default.createElement("div",null,i.default.createElement("p",null,"职位"),i.default.createElement("input",{style:{display:"none"}}),i.default.createElement("input",{type:"text",className:"tamper-user-position-register",autoComplete:"off"})),i.default.createElement("div",null,i.default.createElement("p",null,"部门"),i.default.createElement("input",{style:{display:"none"}}),i.default.createElement("input",{type:"text",className:"tamper-user-department-register",autoComplete:"off"})),i.default.createElement("div",null,i.default.createElement("p",null,"邮箱"),i.default.createElement("input",{style:{display:"none"}}),i.default.createElement("input",{type:"text",className:"tamper-user-email-register",autoComplete:"off"})),i.default.createElement("div",null,i.default.createElement("p",null,"手机号码"),i.default.createElement("input",{style:{display:"none"}}),i.default.createElement("input",{type:"text",className:"tamper-user-phone-register",autoComplete:"off"})),i.default.createElement("div",null,i.default.createElement("p",null,"密码"),i.default.createElement("input",{style:{display:"none"}}),i.default.createElement("input",{type:"password",autoComplete:"off",className:"tamper-user-pwd-register"})),i.default.createElement("div",null,i.default.createElement("p",null,"再次输入密码"),i.default.createElement("input",{style:{display:"none"}}),i.default.createElement("input",{type:"password",autoComplete:"off",className:"tamper-user-pwd2-register"})),i.default.createElement("p",null,i.default.createElement("button",{onClick:this.props.tamperRegisterConfirm.bind(this)},"注册")),i.default.createElement("p",{className:"tamper-register-go"},i.default.createElement("a",{className:"tamper-register",onClick:this.props.handleToggleLogin.bind(this)},"立即登录"))),i.default.createElement("p",{className:"errorMsg"},this.props.tamperErrorMsg))}}]),t}(i.default.Component);t.default=u},1457:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(23),d=n(c),p=a(100),f=a(495),m=n(f);a(1355);var h=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={clientData:[],isLoading:!1,isError:!1,pageIndex:1,pageCount:1,AllStatus:!1},a}return l(t,e),o(t,[{key:"handleChange",value:function(e){this.setState({pageIndex:e}),this.getClientData(e)}},{key:"handleInputValue",value:function(e){var t=/^[0-9]+$/,a=parseInt((0,d.default)(e.target).val());t.test((0,d.default)(e.target).val())||(0,d.default)(e.target).val(""),a>this.state.pageCount&&(0,d.default)(e.target).val(this.state.pageCount),a<=0&&(0,d.default)(e.target).val(""),13==e.keyCode&&t.test((0,d.default)(e.target).val())&&(this.setState({pageIndex:a}),(0,d.default)(e.target).val(""))}},{key:"getClientData",value:function(e){this.setState({isLoading:!0});var t=this;d.default.ajax({url:"/api/tamper_proof/get_user_host_detail/",type:"POST",dataType:"json",data:{service_type:"web",pageIndex:e,username:this.props.tamperUsrName,token:this.props.tamperUsrToken,is_super:this.props.tamperIsSuper},success:function(e){"FAILURE"==e[0].status&&t.setState({isLoading:!1,isError:!0}),"SUCCESS"==e[0].status&&t.setState({clientData:e[0].result,isLoading:!1,isError:!1})},error:function(){t.setState({isLoading:!1,isError:!0})}})}},{key:"componentWillMount",value:function(){this.getClientData(1)}},{key:"render",value:function(){var e=this;return 3==this.props.tabKey&&u.default.createElement("div",null,u.default.createElement("div",{className:"tamper-list-li"},"客户端管理 "),u.default.createElement("div",{className:"version-msg-list tamperStatus"},this.state.isError&&u.default.createElement("div",{className:"ClientError"},"加载失败！"),this.state.isLoading&&u.default.createElement(m.default,null),this.state.clientData&&!this.state.isLoading&&!this.state.isError&&u.default.createElement("div",null,u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"IP地址      "),u.default.createElement("th",null,"备注"),u.default.createElement("th",null,"当前状态     "))),u.default.createElement("tbody",null,this.state.clientData.map(function(e,t){return u.default.createElement("tr",{key:t,"data-info":e.id},u.default.createElement("td",null,e.protect_host_addr),u.default.createElement("td",null,e.remark),u.default.createElement("td",null,u.default.createElement("span",{className:"watchStatus  "+e.status}),e.status))}))),u.default.createElement("div",{className:"pagination-all"},u.default.createElement(p.Pagination,{prev:!0,next:!0,first:!1,last:!1,ellipsis:!0,boundaryLinks:!0,items:this.state.pageCount,maxButtons:7,activePage:this.state.pageIndex,onSelect:this.handleChange.bind(this)}),u.default.createElement("div",{className:"pageCount"},u.default.createElement("input",{className:"pageNum",placeholder:"输入",onChange:this.handleInputValue.bind(this)}),u.default.createElement("img",{className:"searchNum",onClick:function(){return e.getClientData(e.state.pageIndex)},src:"/static/img/skip.svg"}))))))}}]),t}(u.default.Component);t.default=h},1458:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(1357),d=n(c),p=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return l(t,e),o(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"BackVersionBox"},u.default.createElement("div",{className:"back-version-content"},u.default.createElement("h2",{className:"back-v-title clearfix"},"上传文件",u.default.createElement("i",{className:"close-icon",onClick:this.props.handleCancelUpload.bind(this)},"×")),u.default.createElement("h3",{className:"back-v-list"},"路径：",u.default.createElement("b",null,this.props.uploadFileName)),u.default.createElement("div",{className:"version-action"},u.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-back",onClick:this.props.handleCancelUpload.bind(this)},"取消"),u.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-cancel",onClick:this.props.handleConformUpload.bind(this)},"确认")),u.default.createElement("p",{className:"errorMsg"},this.props.uploadFileSizeOut)),this.props.tamperLoadingBox&&u.default.createElement(d.default,{progressTime:this.props.progressTime}))}}]),t}(u.default.Component);t.default=p},1459:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(23),d=n(c),p=a(100),f=a(495),m=n(f);a(1355);var h=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={clientData:null,isLoading:!1,isError:!1,pageIndex:1,pageCount:10},a}return l(t,e),o(t,[{key:"handleChange",value:function(e){this.setState({pageIndex:e}),this.getClientData(e)}},{key:"handleInputValue",value:function(e){var t=/^[0-9]+$/,a=parseInt((0,d.default)(e.target).val());t.test((0,d.default)(e.target).val())||(0,d.default)(e.target).val(""),a>this.state.pageCount&&(0,d.default)(e.target).val(this.state.pageCount),a<=0&&(0,d.default)(e.target).val(""),13==e.keyCode&&t.test((0,d.default)(e.target).val())&&this.getClientData(a)}},{key:"iconClickGetData",value:function(){var e=parseInt((0,d.default)("#userDataIndex").val());e&&this.getClientData(e)}},{key:"getClientData",value:function(e){this.setState({isLoading:!0});var t=this;d.default.ajax({url:"/api/tamper_proof/get_user_operation_log/",type:"POST",dataType:"json",data:{service_type:"web",pagenum:e,pagesize:20,username:this.props.tamperUsrName,token:this.props.tamperUsrToken,is_super:this.props.tamperIsSuper},success:function(a){t.setState({pageIndex:e,clientData:a.content,isLoading:!1,isError:!1,pageCount:parseInt(Math.ceil(a.total/20))})},error:function(e){t.setState({isLoading:!1,isError:!0})}})}},{key:"componentWillMount",value:function(){this.getClientData(1)}},{key:"render",value:function(){var e=this;return 4==this.props.tabKey&&u.default.createElement("div",{className:"version-msg-list userDataList"},this.state.isLoading&&u.default.createElement(m.default,null),this.state.isError&&u.default.createElement("div",{className:"ClientError"},"加载失败！"),this.state.clientData&&!this.state.isLoading&&!this.state.isError&&u.default.createElement("div",null,u.default.createElement("div",{className:"userDataTable"},u.default.createElement("div",{className:"thead clearfix"},u.default.createElement("div",null,"用户名称"),u.default.createElement("div",null,"操作时间"),u.default.createElement("div",null,"操作类型"),u.default.createElement("div",null,"所属机器"),u.default.createElement("div",null,"所属目录"),u.default.createElement("div",null,"变更文件"),u.default.createElement("div",null,"版本ID")),u.default.createElement("div",{className:"tbody"},this.state.clientData.map(function(e,t){var a=JSON.parse(e._source.message);return u.default.createElement("div",{className:"clearfix tbodyRow",key:t},u.default.createElement("div",{title:a.username},a.username),u.default.createElement("div",{title:a.timestamp},a.timestamp),u.default.createElement("div",{title:a.operate_type},a.operate_type),u.default.createElement("div",{title:a.protect_host_name},a.protect_host_name),u.default.createElement("div",{title:a.protect_root_path},a.protect_root_path),u.default.createElement("div",{title:a.changed_objects},a.changed_objects),u.default.createElement("div",{title:a.version_txid},a.version_txid))}))),u.default.createElement("div",{className:"pagination-all"},u.default.createElement(p.Pagination,{prev:!0,next:!0,first:!1,last:!1,ellipsis:!0,boundaryLinks:!0,items:this.state.pageCount,maxButtons:7,activePage:this.state.pageIndex,onSelect:this.handleChange.bind(this)}),u.default.createElement("div",{className:"pageCount"},u.default.createElement("input",{className:"pageNum",id:"userDataIndex",placeholder:"输入",onChange:this.handleInputValue.bind(this)}),u.default.createElement("img",{className:"searchNum",onClick:function(){return e.iconClickGetData()},src:"/static/img/skip.svg"})))))}}]),t}(u.default.Component);t.default=h},1460:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(23),d=n(c),p=a(100),f=a(495),m=n(f),h=a(1445),g=n(h),v=a(273),b=n(v),y=a(1446),E=n(y);a(1355);var _=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={userListShow:!0,clientData:null,isLoading:!1,isError:!1,pageIndex:1,pageCount:1,userDetailList:[],userDetailListShow:!1,userDetail:"用户列表",showAddRootPath:!1,showAllotRootPath:!1,rootPathError:!1,rootPathLoading:!1,username:"",status:"",position:"",phone:"用户暂未填写",email:"用户暂未填写",department:"",host:[],hostListIndex:0,hostList:[],currentHost:"",selectUserList:"",showMsgBox:!1,msgContent:"",msgButtonState:!1,msgButtonName:"",isShowedBadBehaveSetting:!1},a}return l(t,e),o(t,[{key:"handleConfirmMsgBox",value:function(){this.setState({showMsgBox:!1})}},{key:"handleChange",value:function(e){this.setState({pageIndex:e}),this.getClientData(e)}},{key:"handleInputValue",value:function(e){var t=/^[0-9]+$/,a=parseInt((0,d.default)(e.target).val());t.test((0,d.default)(e.target).val())||(0,d.default)(e.target).val(""),a>this.state.pageCount&&(0,d.default)(e.target).val(this.state.pageCount),a<=0&&(0,d.default)(e.target).val(""),13==e.keyCode&&t.test((0,d.default)(e.target).val())&&this.getClientData(a)}},{key:"getClientData",value:function(e){var t=this;this.setState({isLoading:!0}),d.default.ajax({url:"/api/tamper_proof/get_user_list/",type:"POST",dataType:"json",data:{service_type:"web",username:this.props.tamperUsrName,token:this.props.tamperUsrToken,is_super:this.props.tamperIsSuper,pageIndex:e},success:function(e){e.length&&t.setState({isLoading:!1,isError:!1,clientData:e[0].result}),"FAILURE"==e[0].status&&t.setState({isLoading:!1,isError:!0})},error:function(e){t.setState({isLoading:!1,isError:!0})}})}},{key:"userDetailList",value:function(e,t,a,n,s,r,l,o){var i=this;this.setState({userDetailListShow:!0,userDetail:"用户列表 / "+e,userListShow:!1,rootPathLoading:!0,username:e.length?e:"用户暂未填写",status:a,position:n.length?n:"用户暂未填写",phone:s.length?s:"用户暂未填写",email:r.length?r:"用户暂未填写",department:l.length?l:"用户暂未填写",is_super:t});var u={service_type:"web",username:e,token:this.props.tamperUsrToken,is_super:t},c=o||0;d.default.ajax({url:"/api/tamper_proof/get_user_detail/",type:"POST",dataType:"json",data:u,success:function(t){if(t.length){(0,d.default)(":checkbox").prop("checked",!1);for(var a=[],n=0;n<t.length;n++)for(var s in t[n])"status"!==s&&a.push(s);i.setState({username:e,rootPathLoading:!1,rootPathError:!1,userDetailList:t,hostListIndex:c,host:a,hostList:t[c][a[c]],currentHost:a[c]})}else i.setState({rootPathLoading:!1,rootPathError:!1,host:[],hostList:[]})},error:function(){i.setState({rootPathLoading:!1,rootPathError:!0})}})}},{key:"userDetailHide",value:function(){this.setState({userDetailListShow:!1,userDetail:"用户列表",userListShow:!0})}},{key:"AllCheckStatus",value:function(){var e=(0,d.default)("#userManageSelAll").prop("checked"),t=(0,d.default)(":checkbox").not((0,d.default)("#userManageSelAll"));if(e)for(var a=0;a<t.length;a++)t[a].checked=!1;else for(var n=0;n<t.length;n++)t[n].checked=!0}},{key:"DeleteRootPath",value:function(){for(var e=this,t=[],a=(0,d.default)("input:checkbox[name='userManageCheckbox']:checked"),n=0;n<a.length;n++)t.push((0,d.default)(a[n]).attr("title"));t={service_type:"web",username:this.state.username,token:this.props.tamperUsrToken,is_super:this.props.tamperIsSuper,host_name:this.state.currentHost,root_path:JSON.stringify(t)},d.default.ajax({url:"/api/tamper_proof/cancel_root_path/",dataType:"json",type:"POST",data:t,beforeSend:function(){if(!a.length)return e.setState({showMsgBox:!0,msgContent:"请选择您要删除的根路径",msgButtonState:!0,msgButtonName:"确认"}),!1},success:function(t){"FAILURE"==t[0].status&&e.setState({showMsgBox:!0,msgContent:"删除根路径失败",msgButtonState:!0,msgButtonName:"确认"}),"SUCCESS"==t[0].status&&e.userDetailList(e.state.username,e.state.is_super,e.state.status,e.state.position,e.state.phone,e.state.email,e.state.department,e.state.hostListIndex)},error:function(){e.setState({showMsgBox:!0,msgContent:"删除根路径失败",msgButtonState:!0,msgButtonName:"确认"})}})}},{key:"cancelAuthorization",value:function(){for(var e=this,t=[],a=(0,d.default)("input:checkbox[name='userManageCheckbox']:checked"),n=0;n<a.length;n++)t.push((0,d.default)(a[n]).attr("title"));t={username:this.state.username,token:this.props.tamperUsrToken,is_super:this.props.tamperIsSuper,host_name:this.state.currentHost,root_path:JSON.stringify(t),service_type:"web"},d.default.ajax({url:"/api/tamper_proof/revoke_user_root_path/",dataType:"json",type:"POST",data:t,beforeSend:function(){if(!a.length)return e.setState({showMsgBox:!0,msgContent:"请选择您要取消授权的目录",msgButtonState:!0,msgButtonName:"确认"}),!1},success:function(t){"FAILURE"==t[0].status&&e.setState({showMsgBox:!0,msgContent:"取消授权失败",msgButtonState:!0,msgButtonName:"确认"}),"SUCCESS"==t[0].status&&e.userDetailList(e.state.username,e.state.is_super,e.state.status,e.state.position,e.state.phone,e.state.email,e.state.department,e.state.hostListIndex)},error:function(){e.setState({showMsgBox:!0,msgContent:"取消授权失败",msgButtonState:!0,msgButtonName:"确认"})}})}},{key:"showAddRootPath",value:function(){this.setState({showAddRootPath:!0})}},{key:"showAllotRootPath",value:function(){this.setState({showAllotRootPath:!0})}},{key:"hideAddRootPath",value:function(){this.setState({showAddRootPath:!1})}},{key:"hideAllotRootPath",value:function(){this.setState({showAllotRootPath:!1})}},{key:"handleSelectAllOption",value:function(e){var t=[];(0,d.default)(e.target).is(".onselect")?((0,d.default)(e.target).removeClass("onselect"),(0,d.default)(".userDataList td>.select").removeClass("onselect"),this.setState({selectUserList:t})):((0,d.default)(e.target).addClass("onselect"),(0,d.default)(".userDataList td>.select").addClass("onselect"),(0,d.default)(".userDataList td>.select").each(function(){t.push((0,d.default)(this).attr("title"))}),t=t.join("#"),this.setState({selectUserList:t}))}},{key:"userManageSelector",value:function(e){e.stopPropagation(),(0,d.default)(e.target).toggleClass("onselect"),this.allchk()}},{key:"allchk",value:function(){var e=(0,d.default)(".userDataList td>.select").size(),t=0,a=[];(0,d.default)(".userDataList td>.select").each(function(){1==(0,d.default)(this).hasClass("onselect")&&(t++,a.push((0,d.default)(this).attr("title")))}),a=a.join("#"),this.setState({selectUserList:a}),e==t?(0,d.default)(".userDataList th>.select").addClass("onselect"):(0,d.default)(".userDataList th>.select").removeClass("onselect")}},{key:"controlAccount",value:function(e){var t="authorized"==e?"启用":"停用",a=this;d.default.ajax({url:"/api/tamper_proof/switch_user_status/",dataType:"json",type:"POST",data:{service_type:"web",ids:a.state.selectUserList,authorized:e,token:this.props.tamperUsrToken},beforeSend:function(){if(!a.state.selectUserList.length)return a.setState({showMsgBox:!0,msgContent:"请选择您要"+t+"的账号",msgButtonState:!0,msgButtonName:"确认"}),!1},success:function(e){a.getClientData(a.state.pageIndex)},error:function(){a.setState({showMsgBox:!0,msgContent:t+"账号失败",msgButtonState:!0,msgButtonName:"确认"})}})}},{key:"changeHostList",value:function(e,t){(0,d.default)(e.target).css("background","#007AE1"),(0,d.default)(e.target).parent("tr").siblings("tr").find("td").css("background","transparent"),this.userDetailList(this.state.username,this.state.is_super,this.state.status,this.state.position,this.state.phone,this.state.email,this.state.department,t)}},{key:"componentWillMount",value:function(){this.getClientData(1)}},{key:"render",value:function(){var e=this;return 6==this.props.tabKey&&u.default.createElement("div",null,u.default.createElement("div",{className:"tamper-list-li tamper-list-li6 ",onClick:function(){return e.userDetailHide()}},this.state.userDetail),u.default.createElement("div",{className:"version-msg-list userDataList"},this.state.isLoading&&u.default.createElement(m.default,null),this.state.isError&&u.default.createElement("div",{className:"ClientError"},"加载失败!"),this.state.clientData&&!this.state.isLoading&&!this.state.isError&&this.state.userListShow&&u.default.createElement("div",null,u.default.createElement("div",{className:"userMangeCtr"},u.default.createElement("button",{className:"btn-pause-protection btn btn-sm btn-default",onClick:function(){return e.controlAccount("unauthorized")}},"停用账号"),u.default.createElement("button",{className:"btn-pause-protection btn btn-sm btn-default",onClick:function(){return e.controlAccount("authorized")}},"启用账号")),u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,u.default.createElement("div",{className:"select",onClick:function(t){return e.handleSelectAllOption(t)}})),u.default.createElement("th",null,"用户"),u.default.createElement("th",null,"用户类型 "),u.default.createElement("th",null,"账号状态 "),u.default.createElement("th",null,"部门 "),u.default.createElement("th",null,"职位 "),u.default.createElement("th",null,"操作 "))),u.default.createElement("tbody",null,this.state.userListShow&&this.state.clientData.map(function(e,t){var a=this;return u.default.createElement("tr",{key:t},u.default.createElement("td",null,u.default.createElement("div",{className:"select",title:e.id,onClick:function(e){return a.userManageSelector(e)}})),u.default.createElement("td",null,e.username),0==e.is_super?u.default.createElement("td",null,"用户"):u.default.createElement("td",{style:{color:"#32A1FF"}},"管理员"),"authorized"==e.status?u.default.createElement("td",null,u.default.createElement("div",{className:"authorized"},"正常")):u.default.createElement("td",null,u.default.createElement("div",{className:"unauthorized"},"已停用")),u.default.createElement("td",null,e.department),u.default.createElement("td",null,e.position),u.default.createElement("td",{style:{cursor:"pointer",color:"#32a1ff"},onClick:function(){return a.userDetailList(e.username,e.is_super,e.status,e.position,e.phone,e.email,e.department)}},"用户详情"))}.bind(this)))),u.default.createElement("div",{className:"pagination-all"},u.default.createElement(p.Pagination,{prev:!0,next:!0,first:!1,last:!1,ellipsis:!0,boundaryLinks:!0,items:this.state.pageCount,maxButtons:7,activePage:this.state.pageIndex,onSelect:this.handleChange.bind(this)}),u.default.createElement("div",{className:"pageCount"},u.default.createElement("input",{className:"pageNum",placeholder:"输入",onChange:this.handleInputValue.bind(this)}),u.default.createElement("img",{className:"searchNum",onClick:function(){return e.getClientData(e.state.pageIndex)},src:"/static/img/skip.svg"})))),this.state.userDetailListShow&&u.default.createElement("div",{className:"userDetailManage"},u.default.createElement("div",{className:"clearfix"},u.default.createElement("img",{src:"/static/img/userImg.jpg",alt:""}),u.default.createElement("div",{className:"userIntroduce"},u.default.createElement("h4",null,this.state.username),u.default.createElement("p",null,"Identification"),u.default.createElement("div",{className:"userManageLine"}),u.default.createElement("p",null,"职位 : ",this.state.position),u.default.createElement("p",null,"部门 : ",this.state.department),u.default.createElement("p",null,"状态 : ",this.state.status)),u.default.createElement("div",{className:"userManageContact"},u.default.createElement("div",null,u.default.createElement("span",{className:"icon-left"},u.default.createElement("i",{className:"fa fa-envelope fl","aria-hidden":"true"})),u.default.createElement("span",{className:"userManage-left"},"邮箱 : "),this.state.email),u.default.createElement("div",null,u.default.createElement("span",{className:"icon-left"},u.default.createElement("i",{className:"fa fa-phone fl","aria-hidden":"true"})),u.default.createElement("span",{className:"userManage-left"},"电话 : "),this.state.phone))),u.default.createElement("div",{className:"clearfix  userDetailManage-bottom"},u.default.createElement("div",{className:"addressableServer"},u.default.createElement("p",null," 可访问主机"),u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"可访问主机"))),u.default.createElement("tbody",null,0==this.state.host&&u.default.createElement("tr",null,u.default.createElement("td",null,"暂时没有可访问的主机")),this.state.host&&this.state.host.map(function(e,t){var a=this,n=this.state.userDetailList[0][e];return n=JSON.stringify(n),u.default.createElement("tr",{key:t},0==t?u.default.createElement("td",{name:n,style:{backgroundColor:"#007AE1"},onClick:function(e){return a.changeHostList(e,t)}},e):u.default.createElement("td",{name:n,onClick:function(e){return a.changeHostList(e,t)}},e))}.bind(this))))),u.default.createElement("div",{className:"rootDic clearfix"},u.default.createElement("p",{className:"fl",style:{float:"left"}}," 根目录分配"),0==this.state.is_super&&u.default.createElement("div",{className:"allotRootDic",onClick:function(){return e.showAddRootPath()}},"分配根目录"),1==this.state.is_super&&u.default.createElement("div",{className:"allotRootDic",onClick:function(){return e.DeleteRootPath()}},"取消根目录"),u.default.createElement("div",{className:"addRootDic",onClick:function(){return e.showAllotRootPath()}},"新建根目录"),this.state.rootPathError&&u.default.createElement("div",{className:"ClientError"},"获取根目录失败"),this.state.rootPathLoading&&u.default.createElement(m.default,null),!this.state.rootPathError&&!this.state.rootPathLoading&&this.state.hostList&&u.default.createElement("div",{className:"clearfix"},0==this.state.is_super&&u.default.createElement("div",{className:"deleteRootDic",onClick:function(){return e.cancelAuthorization()}},"取消授权"),u.default.createElement("table",null,u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,u.default.createElement("input",{type:"checkbox",id:"userManageSelAll",className:"custom-checkbox"}),u.default.createElement("label",{className:"manageCheckbox",htmlFor:"userManageSelAll",onClick:function(){return e.AllCheckStatus()}}),"根目录标签"),u.default.createElement("th",null,"实际路径"),u.default.createElement("th",null,"分配时间"))),u.default.createElement("tbody",null,0==this.state.hostList.length&&u.default.createElement("tr",null,u.default.createElement("td",null,"暂未分配根目录"),u.default.createElement("td",null),u.default.createElement("td",null)),0!=this.state.hostList.length&&this.state.hostList.map(function(e,t){return u.default.createElement("tr",{key:t},u.default.createElement("td",null,u.default.createElement("input",{type:"checkbox",name:"userManageCheckbox",id:"userManage"+t,className:"custom-checkbox",title:e.protect_root_path}),u.default.createElement("label",{className:"manageCheckbox",htmlFor:"userManage"+t}),e.protect_path_mark),u.default.createElement("td",null,e.protect_root_path),u.default.createElement("td",null,e.timestamp))}.bind(this))))))))),1==this.state.showAllotRootPath&&u.default.createElement(g.default,{username:this.state.username,status:this.state.status,is_super:this.state.is_super,position:this.state.position,phone:this.state.phone,email:this.state.email,department:this.state.department,tamperUsrToken:this.props.tamperUsrToken,showAllotRootPath:this.state.showAllotRootPath,hideAllotRootPath:this.hideAllotRootPath.bind(this),userDetailList:this.userDetailList.bind(this)}),1==this.state.showAddRootPath&&u.default.createElement(E.default,{tamperUsrToken:this.props.tamperUsrToken,username:this.state.username,status:this.state.status,is_super:this.state.is_super,position:this.state.position,phone:this.state.phone,email:this.state.email,department:this.state.department,showAddRootPath:this.state.showAddRootPath,hideAddRootPath:this.hideAddRootPath.bind(this),userDetailList:this.userDetailList.bind(this)}),u.default.createElement(b.default,{showMsgBox:this.state.showMsgBox,msgContent:this.state.msgContent,msgButtonState:this.state.msgButtonState,msgButtonName:this.state.msgButtonName,handleConfirmMsgBox:this.handleConfirmMsgBox.bind(this)}))}}]),t}(u.default.Component);t.default=_},1461:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a(1),u=n(i),c=a(23),d=n(c),p=a(100),f=a(1447),m=n(f),h=a(1455),g=n(h),v=a(495),b=n(v),y=function(e){function t(e){s(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={hostLists:!1,versionMsg:[],versionPageMsg:!1,backVersionState:{version:"",time:"",action:"",filePath:"",mark:""},showVersionBox:!1,backVersionParams:{token:"",username:"",host_name:"",root_path:"",org_version_tx_id:""},currentListPageNum:1,dataListAllPage:1,showFileBox:!1,versionFilePathChange:[],tamperLoadingBox:!1,progressTime:0,errorMsg:""},a}return l(t,e),o(t,[{key:"getProgressTime",value:function(e){var t=this;d.default.ajax({url:"/api/tamper_proof/query_task_progress/",type:"POST",dataType:"json",cache:!1,data:{service_type:"web",task_id:e},error:function(){t.setState({progressTime:0,tamperLoadingBox:!1,errorMsg:"回滚失败"}),clearInterval(t.progressInterval)},success:function(e){"FAILURE"==e.status?(t.setState({progressTime:0,tamperLoadingBox:!1,errorMsg:"回滚失败"}),clearInterval(t.progressInterval)):(t.setState({progressTime:e.percentage}),100==e.percentage&&(clearInterval(t.progressInterval),setTimeout(function(){t.setState({showVersionBox:!1,tamperLoadingBox:!1})},500)))}})}},{key:"loopGetProgress",value:function(e){var t=this;this.progressInterval=setInterval(function(){t.getProgressTime(e)},200)}},{key:"handleToggleRootFile",value:function(e){(0,d.default)(".left-root-list-container").eq(e).find(".detail-toggle").slideToggle()}},{key:"ajaxGetVersionMsg",value:function(e,t,a,n){var s=this;s.setState({versionPageMsg:!1}),d.default.ajax({url:"/api/tamper_proof/get_version_info/",type:"POST",dataType:"json",cache:!1,data:{service_type:"web",host_name:e,root_path:t,token:this.props.tamperUsrToken},error:function(){s.setState({versionPageMsg:[]})},success:function(e){s.setState({versionMsg:e[0].result,versionPageMsg:e[0].result.slice(a,n),dataListAllPage:e[0].result.length%10==0?e[0].result.length/10:parseInt(e[0].result.length/10)+1})}})}},{key:"ajaxGetRootPath",value:function(){var e=this;d.default.ajax({url:"/api/tamper_proof/get_hosts_and_rootpaths/",type:"POST",dataType:"json",cache:!1,data:{service_type:"web",username:this.props.tamperUsrName,is_super:this.props.tamperIsSuper,token:this.props.tamperUsrToken},error:function(){e.setState({hostLists:[],dataListAllPage:0})},success:function(t){if(0==t.length||"FAILURE"==t[0].status)e.setState({hostLists:[],versionMsg:[],versionPageMsg:[],dataListAllPage:0});else{if(e.setState({hostLists:t}),0==t[0].root_paths.length)return void e.setState({versionPageMsg:[],dataListAllPage:0});e.ajaxGetVersionMsg(t[0].host,t[0].root_paths[0].protect_root_path,0,10),(0,d.default)(".left-root-list-container").eq(0).find("p").eq(0).addClass("select-root")}}})}},{key:"handleToggleRootFileVersion",value:function(e,t,a,n){(0,d.default)(".left-root-list-container").eq(e).find("p").eq(t).addClass("select-root"),(0,d.default)(".left-root-list-container").eq(e).siblings().find("p").removeClass("select-root"),(0,d.default)(".left-root-list-container").eq(e).find("p").eq(t).siblings().removeClass("select-root"),this.ajaxGetVersionMsg(a,n,0,10)}},{key:"handleToggleMsg",value:function(e){(0,d.default)(".dataList-content").eq(e).find("div.versionMsg").slideToggle(200)}},{key:"handleBackVersion",value:function(e,t,a,n,s,r,l,o,i){this.setState({errorMsg:"",showVersionBox:!0,backVersionState:{version:e,time:t,action:a,filePath:n,mark:s},backVersionParams:{token:r,username:l,host_name:o,root_path:n,org_version_tx_id:i},progressTime:0})}},{key:"handleCloseVersionConform",value:function(){this.setState({showVersionBox:!1})}},{key:"handleCloseFileConform",value:function(){this.setState({showFileBox:!1})}},{key:"handleVersionConformBack",value:function(){var e=this;e.setState({tamperLoadingBox:!0}),d.default.ajax({url:"/api/tamper_proof/rollback_version/",type:"POST",dataType:"json",cache:!1,data:{service_type:"web",token:this.props.tamperUsrToken,username:this.props.tamperUsrName,host_name:this.state.backVersionParams.host_name,root_path:this.state.backVersionParams.root_path,org_version_tx_id:this.state.backVersionParams.org_version_tx_id},success:function(t){e.loopGetProgress(t[0].result.task_id)},error:function(e){}})}},{key:"handleChangePage",value:function(e){this.setState({currentListPageNum:e,versionPageMsg:this.state.versionMsg.slice(10*(e-1),10*e)})}},{key:"handleShowPathFile",value:function(e,t){t.stopPropagation(),this.setState({showFileBox:!0,versionFilePathChange:e})}},{key:"handleEnterPage",value:function(e){var t=/^[0-9]+$/,a=parseInt((0,d.default)(e.target).val());t.test((0,d.default)(e.target).val())||(0,d.default)(e.target).val(""),a>this.state.dataListAllPage&&(0,d.default)(e.target).val(this.state.dataListAllPage),a<=0&&(0,d.default)(e.target).val(""),13==e.keyCode&&t.test((0,d.default)(e.target).val())&&(this.setState({currentListPageNum:a,versionPageMsg:this.state.versionMsg.slice(10*(a-1),10*a)}),(0,d.default)(e.target).val(""))}},{key:"handleJumpPage",value:function(){var e=parseInt((0,d.default)(".versionPageNum").val());this.setState({currentListPageNum:e,versionPageMsg:this.state.versionMsg.slice(10*(e-1),10*e)}),(0,d.default)(".versionPageNum").val("")}},{key:"componentWillMount",value:function(){this.ajaxGetRootPath()}},{key:"render",value:function(){var e=this;return 1==this.props.tabKey&&u.default.createElement("div",null,u.default.createElement("div",{className:"tamper-list-li"},"  版本信息列表 "),u.default.createElement("div",{className:"version-msg-list clearfix"},u.default.createElement("div",{className:"left-file-list"},u.default.createElement("div",{className:"list-detail-cover"},u.default.createElement("h3",null,"总目录"),u.default.createElement("div",{className:"border-cover"},!this.state.hostLists&&u.default.createElement(b.default,null),this.state.hostLists&&this.state.hostLists.map(function(t,a){return u.default.createElement("div",{key:a,className:"left-root-list-container"},u.default.createElement("h4",{onClick:e.handleToggleRootFile.bind(e,a)},u.default.createElement("i",{className:"iconfont icon-db_icon file-icon"}),t.host),u.default.createElement("div",{className:"detail-toggle",style:{display:0==a?"block":"none"}},t.root_paths.map(function(n,s){return u.default.createElement("p",{key:s,onClick:e.handleToggleRootFileVersion.bind(e,a,s,t.host,n.protect_root_path)},u.default.createElement("b",null,n.protect_path_mark),u.default.createElement("br",null),n.protect_root_path)})))})))),u.default.createElement("div",{className:"right-file-list"},u.default.createElement("h3",null,"版本变化信息"),u.default.createElement("div",{className:"border-cover"},!this.state.versionPageMsg&&u.default.createElement(b.default,null),this.state.versionPageMsg&&this.state.versionPageMsg.map(function(e,t){return u.default.createElement("div",{className:"dataList-content",key:t},u.default.createElement("table",{className:"databaseHostList",onClick:this.handleToggleMsg.bind(this,t)},0==t&&u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"版本编号"),u.default.createElement("th",null,"版本生成时间"),u.default.createElement("th",null,"变更类型"),u.default.createElement("th",null,"查看变更文件路径"),u.default.createElement("th",null,"备注信息"))),u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("td",null,e.id),u.default.createElement("td",null,e.timestamp),u.default.createElement("td",null,e.operate_type),u.default.createElement("td",{onClick:this.handleShowPathFile.bind(this,e.changed_objects)},e.protect_root_path),u.default.createElement("td",null,e.remark)))),u.default.createElement("div",{className:"showDatabaseHostList versionMsg"},u.default.createElement("h3",{className:"versionMsgTitle"},"备注信息：更新项目的README文件。"),u.default.createElement("button",{className:"backToVersion plugAction",onClick:this.handleBackVersion.bind(this,e.id,e.timestamp,e.operate_type,e.protect_root_path,e.remark,"token",e.operate_username,e.protect_host_name,e.version_txid)},"回滚到此版本")))}.bind(this)),u.default.createElement("div",{className:"pagination-all"},u.default.createElement(p.Pagination,{prev:!0,next:!0,first:!1,last:!1,ellipsis:!0,boundaryLinks:!0,items:this.state.dataListAllPage,onSelect:this.handleChangePage.bind(this),activePage:this.state.currentListPageNum,maxButtons:7}),u.default.createElement("div",{className:"pageCount"},u.default.createElement("input",{className:"pageNum versionPageNum",placeholder:"输入",onChange:this.handleEnterPage.bind(this)}),u.default.createElement("img",{className:"searchNum",src:"/static/img/skip.svg",onClick:this.handleJumpPage.bind(this)}))))),u.default.createElement(m.default,{errorMsg:this.state.errorMsg,progressTime:this.state.progressTime,tamperLoadingBox:this.state.tamperLoadingBox,showVersionBox:this.state.showVersionBox,handleVersionConformBack:this.handleVersionConformBack.bind(this),handleCloseVersionConform:this.handleCloseVersionConform.bind(this),backVersionState:this.state.backVersionState}),u.default.createElement(g.default,{showFileBox:this.state.showFileBox,versionFilePathChange:this.state.versionFilePathChange,handleCloseFileConform:this.handleCloseFileConform.bind(this)})))}}]),t}(u.default.Component);t.default=y}});