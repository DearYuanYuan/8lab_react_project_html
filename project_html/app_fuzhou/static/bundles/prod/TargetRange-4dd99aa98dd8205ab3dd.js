webpackJsonp([9],{1349:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(1),c=n(l),u=a(23),m=n(u),d=a(39),h=n(d),f=a(496),p=n(f),v=a(273),E=n(v),g=a(1373),y=n(g),x=function(e){function t(e){s(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={protectedHosts:[],msgProtectedHost:"暂无被保护主机的信息",allHosts:[],healthyHost:[],unhealthyHost:[],msgAllHost:"暂无主机信息",systemInfo:null,selectedHost:null,detailLog:[],msgDetailLog:"暂无日志",showMsgBox:!1,msgContent:"",msgButtonState:!1,msgButtonName:""},a.formerSystemInfo=null,a.unhealthPercentage=0,a.logIsPaused=!1,a.isTooltipHovered=!1,a}return r(t,e),o(t,[{key:"componentDidMount",value:function(){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),document.title="攻防态势",this.initCharts(),this.getAllHosts(),this.allHostsInterval=setInterval(this.getAllHosts.bind(this),5e3),this.getProtectedHost(),this.protectedHostInterval=setInterval(this.getProtectedHost.bind(this),5e3),this.getSystemInfo(),this.systemInfoInterval=setInterval(this.getSystemInfo.bind(this),5e3),this.getHostDetail(),this.hostDetailInterval=setInterval(this.getHostDetail.bind(this),3e3),this.getLogNum(),a(1466),a(1467),this.initThreejs(),this.drawParticles(),this.animateParticles(),this.addAllListeners()}},{key:"addAllListeners",value:function(){var e=this;document.getElementsByClassName("interaction-area")[0].addEventListener("mouseenter",this.onEnterInteractionArea.bind(this)),document.getElementsByClassName("interaction-area")[0].addEventListener("mouseleave",this.onLeaveInteractionArea.bind(this)),document.getElementById("customTooltip").addEventListener("mouseenter",function(){return e.isTooltipHovered=!0}),document.getElementById("customTooltip").addEventListener("mouseleave",function(){return e.isTooltipHovered=!1}),document.getElementById("hostInfoBox").addEventListener("mouseenter",function(){e.hostDetailInterval&&(e.hostDetailInterval=clearInterval(e.hostDetailInterval))});var t=this;document.getElementById("hostInfoBox").addEventListener("mouseleave",function(){t.hostDetailTimeout&&(t.hostDetailTimeout=clearTimeout(t.hostDetailTimeout)),t.hostDetailTimeout=setTimeout(function(){t.hostDetailInterval=setInterval(t.getHostDetail.bind(t),3e3)},5e3)})}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.requestID),this.allHostsInterval&&(this.allHostsInterval=clearInterval(this.allHostsInterval)),this.protectedHostInterval&&(this.protectedHostInterval=clearInterval(this.protectedHostInterval)),this.hostDetailInterval&&(this.hostDetailInterval=clearInterval(this.hostDetailInterval)),this.hostDetailTimeout&&clearTimeout(this.hostDetailTimeout),this.systemInfoInterval&&(this.systemInfoInterval=clearInterval(this.systemInfoInterval))}},{key:"getHostDetail",value:function(){var e=this;if(e.state.allHosts&&e.state.allHosts.length>0){var t=e.state.allHosts;e.state.unhealthyHost&&e.state.unhealthyHost.length>0&&(t=e.state.unhealthyHost);var a=Math.floor(Math.random()*t.length);e.state.selectedHost&&t[a].ip==e.state.selectedHost.ip||(e.setState({selectedHost:t[a],isProtectOn:0==t[a].is_protect,isBlockOn:0==t[a].is_block}),e.getDetailLog(t[a].ip))}}},{key:"getDetailLog",value:function(e){var t=this;m.default.ajax({url:"/api/ctf/detail_log/",type:"GET",dataType:"json",data:{ip:e},cache:!1,success:function(e){e&&200==e.code&&e.data.length>0?(t.setState({msgDetailLog:null,detailLog:e.data}),t.initLogAnimation()):t.setState({detailLog:[],msgDetailLog:"暂无日志"})},error:function(){t.setState({detailLog:[],msgDetailLog:"服务繁忙，暂无日志"})}})}},{key:"onSelectHost",value:function(e){var t=this;t.state.selectedHost&&e.ip==t.state.selectedHost.ip||(this.setState({selectedHost:e,isProtectOn:0==e.is_protect,isBlockOn:0==e.is_block}),this.getDetailLog(e.ip)),this.hostDetailInterval&&(this.hostDetailInterval=clearInterval(this.hostDetailInterval)),this.allHostsInterval&&(this.allHostsInterval=clearInterval(this.allHostsInterval)),this.hostDetailTimeout&&(this.hostDetailTimeout=clearTimeout(this.hostDetailTimeout)),this.hostDetailTimeout=setTimeout(function(){t.hostDetailInterval=setInterval(t.getHostDetail.bind(t),3e3),t.allHostsInterval=setInterval(t.getAllHosts.bind(t),5e3)},7e3)}},{key:"initLogAnimation",value:function(){function e(){i.animate({marginTop:-i.height()+(0,m.default)("#scrollHostLog").height()<0?-i.height()+(0,m.default)("#scrollHostLog").height():-i.height()},s,"linear",function(){i.css({marginTop:0})})}function t(){n.logAnimeInterval&&(n.logAnimeInterval=window.clearInterval(n.logAnimeInterval),i.stop(),n.logIsPaused=!0)}function a(){n.logAnimeInterval||(e(),n.logAnimeInterval=setInterval(e,s),n.logIsPaused=!1)}var n=this,s=6e3,i=(0,m.default)(".log-box");this.logAnimeInterval||this.logIsPaused||(e(),this.logAnimeInterval=setInterval(e,s),i.mouseenter(t).mouseleave(a))}},{key:"getSystemInfo",value:function(){var e=this;m.default.ajax({url:"/api/ctf/run_ctf_host_info/",type:"POST",dataType:"json",data:{},cache:!1,success:function(t){t&&200==t.code?(e.formerSystemInfo=e.state.systemInfo,e.setState({systemInfo:t.data})):e.setState({systemInfo:null})},error:function(){e.setState({systemInfo:null})}})}},{key:"numsBeforeDecimal",value:function(e){for(var t=1,a=e/10;a>1;)a/=10,t++;return t}},{key:"isInterger",value:function(e){return e%1==0}},{key:"formatNumber",value:function(e){var t=void 0;return e<1e3?(t=e,this.isInterger(t)?t:t.toFixed(4-this.numsBeforeDecimal(t))):e>=1e3&&e<1e6?(t=e/1e3,this.isInterger(t)?t+"K":t.toFixed(3-this.numsBeforeDecimal(t))+"K"):e>1e6&&e<1e9?(t=e/1e6,this.isInterger(t)?t+"M":t.toFixed(3-this.numsBeforeDecimal(t))+"M"):(t=e/1e9,this.isInterger(t)?t+"B":t.toFixed(3-this.numsBeforeDecimal(t))+"B")}},{key:"getAllHosts",value:function(){var e=this;m.default.ajax({url:"/api/ctf/all_host/",type:"POST",dataType:"json",data:{},cache:!1,success:function(t){if(t&&200==t.code)if(t.all_total>0)if((t.unhealth_total/t.all_total).toFixed(3)!=e.unhealthPercentage&&(e.unhealthPercentage=(t.unhealth_total/t.all_total).toFixed(3),e.drawParticles(),e.animateParticles()),t.unhealth_total>0){for(var a=new Array,n=new Array,s=0;s<t.data.length;s++)0===t.data[s].status?n.push(t.data[s]):1===t.data[s].status&&a.push(t.data[s]);var i=t.unhealth_total?a[0]:t.data[0];e.setState({selectedHost:i,isProtectOn:0==i.is_protect,isBlockOn:0==i.is_block,msgAllHost:null,allHosts:t.data,healthyHost:n,unhealthyHost:a})}else e.setState({msgAllHost:null,allHosts:t.data,healthyHost:t.data,unhealthyHost:[]});else e.setState({msgAllHost:"暂无主机信息。",allHosts:[],healthyHost:[],unhealthyHost:[]});else e.setState({msgAllHost:"服务繁忙，请稍候。",allHosts:[],healthyHost:[],unhealthyHost:[]})},error:function(){e.setState({msgAllHost:"服务繁忙，请稍候。",allHosts:[],healthyHost:[],unhealthyHost:[]})}})}},{key:"getProtectedHost",value:function(){var e=this;m.default.ajax({url:"/api/ctf/protected_host/",type:"POST",dataType:"json",data:{},cache:!1,success:function(t){t&&200==t.code?t.total>0?e.setState({msgProtectedHost:null,protectedHosts:t.data}):e.setState({msgProtectedHost:"暂无被保护的主机。",protectedHosts:[]}):e.setState({msgProtectedHost:"服务繁忙，请稍候。",protectedHosts:[]})},error:function(){e.setState({msgProtectedHost:"服务繁忙，请稍候。",protectedHosts:[]})}})}},{key:"initCharts",value:function(){var e={tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#F28321"}},textStyle:{color:"#fff"}},grid:{left:50,top:5,bottom:20,right:2},xAxis:{type:"category",boundaryGap:!1,splitLine:{show:!0,interval:0,lineStyle:{color:["#444851"]}},axisTick:{show:!1},axisLine:{lineStyle:{color:"#444851"}},axisLabel:{margin:10,textStyle:{fontSize:8,color:"#FFFFFF"}}},yAxis:{name:"日志数量",nameLocation:"middle",nameTextStyle:{color:"#fff",fontSize:8},nameGap:40,type:"value",splitLine:{lineStyle:{color:["#444851"]}},axisTick:{show:!1},axisLine:{lineStyle:{color:"#444851"}},axisLabel:{margin:10,textStyle:{fontSize:8,color:"#FFFFFF"}}},series:[{name:"日志数量",type:"line",smooth:!0,showSymbol:!1,symbol:"circle",symbolSize:6,areaStyle:{normal:{color:"rgba(242,131,33,0.20)"}},itemStyle:{normal:{color:"#F28321"}},lineStyle:{normal:{width:1}}}]};this.lineChart=h.default.init(document.getElementById("linechart")),this.lineChart.setOption(e)}},{key:"getLogNum",value:function(){var e=this;m.default.ajax({url:"/api/ctf/syslog_incr_count/",type:"POST",dataType:"json",cache:!1,success:function(t){if(t&&200===t.code){for(var a=new Array,n=new Array,s=0;s<t.total.length;s++)for(var i in t.total[s])a.push(t.total[s][i][1]),n.push(i);e.lineChart.setOption({xAxis:{data:a.reverse()},series:{data:n.reverse()}})}else e.lineChart.setOption({xAxis:{data:[]},series:{data:[]}})},error:function(){e.lineChart.setOption({xAxis:{data:[]},series:{data:[]}})}})}},{key:"changeProtectState",value:function(e,t,a){var n=this,s=(0,m.default)("#"+e).is(":checked"),i=!1;return s?m.default.ajax({url:"/api/blackbox/start_protection/",type:"POST",dataType:"json",data:{ip:t.ip},cache:!1,success:function(e){e&&e.status?(i=!0,a?n.setState({isTooltipProtectOn:!n.state.isTooltipProtectOn}):n.setState({isProtectOn:!n.state.isProtectOn}),n.setState({showMsgBox:!0,msgContent:"可信防护已成功开启！",msgButtonState:!0,msgButtonName:"确认"})):n.setState({showMsgBox:!0,msgContent:"可信防护开启失败！",msgButtonState:!0,msgButtonName:"确认"})},error:function(){n.setState({showMsgBox:!0,msgContent:"服务器繁忙，请稍候再试。",msgButtonState:!0,msgButtonName:"确认"})}}):m.default.ajax({url:"/api/blackbox/stop_protection/",type:"POST",dataType:"json",data:{ip:t.ip},cache:!1,success:function(e){e&&e.status?(i=!0,a?n.setState({isTooltipProtectOn:!n.state.isTooltipProtectOn}):n.setState({isProtectOn:!n.state.isProtectOn}),n.setState({showMsgBox:!0,msgContent:"可信防护已成功关闭！",msgButtonState:!0,msgButtonName:"确认"})):n.setState({showMsgBox:!0,msgContent:"可信防护关闭失败！",msgButtonState:!0,msgButtonName:"确认"})},error:function(){n.setState({showMsgBox:!0,msgContent:"服务器繁忙，请稍候再试。",msgButtonState:!0,msgButtonName:"确认"})}}),i}},{key:"changeBlockState",value:function(e,t,a){var n=this,s=(0,m.default)("#"+e).is(":checked"),i=!1;return s?m.default.ajax({url:"/api/blackbox/start_senior_block/",type:"POST",dataType:"json",data:{ip:t.ip},cache:!1,success:function(e){e&&e.status?(i=!0,a?n.setState({isTooltipBlockOn:!n.state.isTooltipBlockOn}):n.setState({isBlockOn:!n.state.isBlockOn}),n.setState({showMsgBox:!0,msgContent:"可信阻断已成功开启！",msgButtonState:!0,msgButtonName:"确认"})):n.setState({showMsgBox:!0,msgContent:"可信阻断开启失败！",msgButtonState:!0,msgButtonName:"确认"})},error:function(){n.setState({showMsgBox:!0,msgContent:"服务器繁忙，请稍候再试。",msgButtonState:!0,msgButtonName:"确认"})}}):m.default.ajax({url:"/api/blackbox/stop_senior_block/",type:"POST",dataType:"json",data:{ip:t.ip},cache:!1,success:function(e){e&&e.status?(i=!0,a?n.setState({isTooltipBlockOn:!n.state.isTooltipBlockOn}):n.setState({isBlockOn:!n.state.isBlockOn}),n.setState({showMsgBox:!0,msgContent:"可信阻断已成功关闭！",msgButtonState:!0,msgButtonName:"确认"})):n.setState({showMsgBox:!0,msgContent:"可信阻断关闭失败！",msgButtonState:!0,msgButtonName:"确认"})},error:function(){n.setState({showMsgBox:!0,msgContent:"服务器繁忙，请稍候再试。",msgButtonState:!0,msgButtonName:"确认"})}}),i}},{key:"markWarning",value:function(){var e=this;m.default.ajax({url:"/api/ctf/warn_handle/",type:"POST",dataType:"json",data:{ip:e.state.selectedHost.ip},cache:!1,success:function(t){t?e.setState({showMsgBox:!0,msgContent:t.message,msgButtonState:!0,msgButtonName:"确认"}):e.setState({showMsgBox:!0,msgContent:"服务器繁忙，请稍候再试。",msgButtonState:!0,msgButtonName:"确认"})},error:function(){e.setState({showMsgBox:!0,msgContent:"服务器繁忙，请稍候再试。",msgButtonState:!0,msgButtonName:"确认"})}})}},{key:"initThreejs",value:function(){this.SEPARATION=100,this.AMOUNTX=50,this.AMOUNTY=50,this.count=0,this.mouseX=285,this.mouseY=-342,this.windowHalfX=window.innerWidth/2,this.windowHalfY=window.innerHeight/2,this.camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1e4),this.camera.position.z=1e3,this.renderer=new THREE.CanvasRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor("#202129");var e=2*Math.PI;this.material=new THREE.SpriteCanvasMaterial({color:14803425,program:function(t){t.beginPath(),t.arc(0,0,.003,0,e,!0),t.fill()}}),document.addEventListener("mousemove",this.onDocumentMouseMove.bind(this),!1),document.addEventListener("touchstart",this.onDocumentTouchStart.bind(this),!1),document.addEventListener("touchmove",this.onDocumentTouchMove.bind(this),!1),window.addEventListener("resize",this.onWindowResize.bind(this),!1)}},{key:"drawParticles",value:function(){var e=this;this.requestID&&cancelAnimationFrame(this.requestID),this.scene=new THREE.Scene;var t=Math.floor(this.unhealthPercentage*this.AMOUNTX*this.AMOUNTY/5);if((t=t>150?150:t)>0){this.lightbars=[];for(var a=8;a>=1;a--)this.lightbars[a-1]=new Image,this.lightbars[a-1].src="/static/img/lightbars/"+a+".png";this.materialLight=new THREE.SpriteCanvasMaterial({color:"#F28321",program:function(t){(new Image).src="/static/img/lightbars/1.png",t.drawImage(e.lightbars[0],-.045,0,.09,.42)}}),this.indices=[];for(var n=0;n<t;n++){var s=Math.floor(Math.random()*this.AMOUNTX*this.AMOUNTY);-1==this.indices.indexOf(s)&&(this.indices[n]=s)}}else this.materialLight=null,this.lightbars=[],this.indices=[];this.particles=new Array;for(var i=0,r=void 0,o=0;o<this.AMOUNTX;o++)for(var l=0;l<this.AMOUNTY;l++)r=this.indices.length&&-1!==this.indices.indexOf(i)?this.particles[i++]=new THREE.Sprite(this.materialLight):this.particles[i++]=new THREE.Sprite(this.material),r.position.x=o*this.SEPARATION-this.AMOUNTX*this.SEPARATION/2,r.position.z=l*this.SEPARATION-this.AMOUNTY*this.SEPARATION/2,this.scene.add(r);this.container=document.getElementById("particlesContainer"),this.container.innerHTML="",this.container.appendChild(this.renderer.domElement)}},{key:"onWindowResize",value:function(){this.windowHalfX=window.innerWidth/2,this.windowHalfY=window.innerHeight/2,this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}},{key:"onDocumentMouseMove",value:function(e){this.mouseX=e.clientX-this.windowHalfX,this.mouseY=e.clientY-this.windowHalfY}},{key:"onDocumentTouchStart",value:function(e){1===e.touches.length&&(e.preventDefault(),this.mouseX=e.touches[0].pageX-this.windowHalfX,this.mouseY=e.touches[0].pageY-this.windowHalfY)}},{key:"onDocumentTouchMove",value:function(e){1===e.touches.length&&(e.preventDefault(),this.mouseX=e.touches[0].pageX-this.windowHalfX,this.mouseY=e.touches[0].pageY-this.windowHalfY)}},{key:"animateParticles",value:function(){this.requestID=requestAnimationFrame(this.animateParticles.bind(this)),this.renderAnimation()}},{key:"updateLightbar",value:function(){var e=this;this.materialLight=new THREE.SpriteCanvasMaterial({color:"#F28321",program:function(t){t.drawImage(e.lightbars[Math.floor(10*e.count%e.lightbars.length)],-.045,0,.09,.42)}})}},{key:"renderAnimation",value:function(){this.camera.position.x+=.05*(this.mouseX-this.camera.position.x),this.camera.position.y+=.05*(-this.mouseY-this.camera.position.y),this.camera.lookAt(this.scene.position);var e=this,t=0,a=void 0;this.indices.length&&this.updateLightbar();for(var n=0;n<this.AMOUNTX;n++)for(var s=0;s<this.AMOUNTY;s++)a=this.particles[t],e.indices.length&&-1!==e.indices.indexOf(t)&&(a.material=e.materialLight),a.position.y=50*Math.sin(.3*(n+this.count))+50*Math.sin(.5*(s+this.count)),a.scale.x=a.scale.y=a.scale.z=100*(4*(Math.sin(.3*(n+this.count))+1)+4*(Math.sin(.5*(s+this.count))+1)),t++;this.renderer.render(this.scene,this.camera),this.count+=.1}},{key:"isAreaIntersected",value:function(e,t,a,n){for(var s=0;s<t.length;s++)if(e.x>=t[s].x-a&&e.x<=t[s].x+a&&e.y>=t[s].y-n&&e.y<=t[s].y+n)return!0;return!1}},{key:"onEnterInteractionArea",value:function(){if(this.state.unhealthyHost){var e,t=parseInt((0,m.default)(".interaction-area").css("width")),a=parseInt((0,m.default)(".interaction-area").css("height"))/2;e=this.state.unhealthyHost.length<5?Math.ceil(Math.random()*this.state.unhealthyHost.length):Math.ceil(5*Math.random());for(var n=new Array,s=0;s<e;s++){for(var i={x:Math.floor(Math.random()*(t-66)),y:Math.floor(Math.random()*(a-66))};this.isAreaIntersected(i,n,66,66);)i={x:Math.floor(Math.random()*(t-66)),y:Math.floor(Math.random()*(a-66))};n.push(i)}for(var r=0;r<e;r++){var o=document.createElement("div");o.setAttribute("id","area"+r),o.setAttribute("class","hover-area"),o.setAttribute("style","position:absolute;width:66px;height:66px;left:"+n[r].x+"px;top:"+n[r].y+"px;background:transparent url(static/img/ring.gif) no-repeat center;background-size:66px;display:none;"),o.appendChild(document.createElement("div")),(0,m.default)(".interaction-area").append(o),(0,m.default)("#area"+r).fadeIn()}for(var l=this,c=new Array,u=0;u<e;u++){for(var d=Math.floor(Math.random*l.state.unhealthyHost.length);-1!=c.indexOf(d);)d=Math.floor(Math.random*l.state.unhealthyHost.length);c.push(d)}(0,m.default)(".hover-area").each(function(e,t){var a=document.getElementById("customTooltip");(0,m.default)(this).hover(function(){l.setState({tooltip:l.state.unhealthyHost[e],isTooltipProtectOn:0==l.state.unhealthyHost[e].is_protect,isTooltipBlockOn:0==l.state.unhealthyHost[e].is_block}),a.clientHeight,a.style.zIndex=1e3,a.style.left=n[e].x+"px",a.style.top=n[e].y+66+"px",a.style.opacity=1},function(){setTimeout(function(){l.isTooltipHovered?(0,m.default)("#customTooltip").mouseleave(function(){a.style.opacity=0,a.style.zIndex=-1}):(a.style.opacity=0,a.style.zIndex=-1)},1)})})}}},{key:"onLeaveInteractionArea",value:function(){(0,m.default)(".hover-area").each(function(){(0,m.default)(this).remove()})}},{key:"handleConfirmMsgBox",value:function(){this.setState({showMsgBox:!1})}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"target-range clearfix"},c.default.createElement("div",{id:"particlesContainer"}),c.default.createElement("div",{className:"left-content-container"},c.default.createElement("section",{className:"parameters"},c.default.createElement("div",{className:"parameter"},c.default.createElement("div",{className:"corner-box"},c.default.createElement("div",null,c.default.createElement("div",{className:"title"},c.default.createElement("p",null,"IPV4流入流量")),c.default.createElement("div",{className:"value"},c.default.createElement("div",null,this.state.systemInfo&&this.formatNumber(parseFloat(this.state.systemInfo.network_in))),c.default.createElement("div",null,c.default.createElement("p",{className:"unity"},"KB/s"),this.formerSystemInfo&&this.state.systemInfo?this.state.systemInfo.network_in-this.formerSystemInfo.network_in>=0?c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-up"}),this.formatNumber(this.state.systemInfo.network_in-this.formerSystemInfo.network_in)):c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-down"}),this.formatNumber(this.formerSystemInfo.network_in-this.state.systemInfo.network_in)):c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-up"}),"0")))))),c.default.createElement("div",{className:"parameter"},c.default.createElement("div",{className:"corner-box"},c.default.createElement("div",null,c.default.createElement("div",{className:"title"},c.default.createElement("p",null,"IPV4流出流量")),c.default.createElement("div",{className:"value"},c.default.createElement("div",null,this.state.systemInfo&&this.formatNumber(parseFloat(this.state.systemInfo.network_out))),c.default.createElement("div",null,c.default.createElement("p",{className:"unity"},"KB/s"),this.formerSystemInfo&&this.state.systemInfo?this.state.systemInfo.network_out-this.formerSystemInfo.network_out>=0?c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-up"}),this.formatNumber(this.state.systemInfo.network_out-this.formerSystemInfo.network_out)):c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-down"}),this.formatNumber(this.formerSystemInfo.network_out-this.state.systemInfo.network_out)):c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-up"}),"0")))))),c.default.createElement("div",{className:"parameter"},c.default.createElement("div",{className:"corner-box"},c.default.createElement("div",null,c.default.createElement("div",{className:"title"},c.default.createElement("p",null,"SWAP利用率")),c.default.createElement("div",{className:"value"},c.default.createElement("div",null,this.state.systemInfo&&this.formatNumber(100*this.state.systemInfo.used_swap_pct)),c.default.createElement("div",null,c.default.createElement("p",{className:"unity"},"%"),this.formerSystemInfo&&this.state.systemInfo?this.state.systemInfo.used_swap_pct-this.formerSystemInfo.used_swap_pct>=0?c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-up"}),this.formatNumber(100*this.state.systemInfo.used_swap_pct-100*this.formerSystemInfo.used_swap_pct)):c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-down"}),this.formatNumber(100*this.formerSystemInfo.used_swap_pct-100*this.state.systemInfo.used_swap_pct)):c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-up"}),"0")))))),c.default.createElement("div",{className:"parameter"},c.default.createElement("div",{className:"corner-box"},c.default.createElement("div",null,c.default.createElement("div",{className:"title"},c.default.createElement("p",null,"进程总数")),c.default.createElement("div",{className:"value"},c.default.createElement("div",null,this.state.systemInfo&&this.formatNumber(parseInt(this.state.systemInfo.process_nums))),c.default.createElement("div",null,c.default.createElement("p",{className:"unity"},"个"),this.formerSystemInfo&&this.state.systemInfo?this.state.systemInfo.process_nums-this.formerSystemInfo.process_nums>=0?c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-up"}),this.formatNumber(this.state.systemInfo.process_nums-this.formerSystemInfo.process_nums)):c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-down"}),this.formatNumber(this.formerSystemInfo.process_nums-this.state.systemInfo.process_nums)):c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-up"}),"0")))))),c.default.createElement("div",{className:"parameter"},c.default.createElement("div",{className:"corner-box"},c.default.createElement("div",null,c.default.createElement("div",{className:"title"},c.default.createElement("p",null,"读写数量")),c.default.createElement("div",{className:"value"},c.default.createElement("div",null,this.state.systemInfo&&this.formatNumber(this.state.systemInfo.read_write_count)),c.default.createElement("div",null,c.default.createElement("p",{className:"unity"},"个/s"),this.formerSystemInfo&&this.state.systemInfo?this.state.systemInfo.read_write_count-this.formerSystemInfo.read_write_count>=0?c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-up"}),this.formatNumber(this.state.systemInfo.read_write_count-this.formerSystemInfo.read_write_count)):c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-down"}),this.formatNumber(this.formerSystemInfo.read_write_count-this.state.systemInfo.read_write_count)):c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-up"}),"0")))))),c.default.createElement("div",{className:"parameter"},c.default.createElement("div",{className:"corner-box"},c.default.createElement("div",null,c.default.createElement("div",{className:"title"},c.default.createElement("p",null,"vda")),c.default.createElement("div",{className:"value"},c.default.createElement("div",null,this.state.systemInfo&&this.formatNumber(parseFloat(this.state.systemInfo.vda))),c.default.createElement("div",null,c.default.createElement("p",{className:"unity"},"KB/s"),this.formerSystemInfo&&this.state.systemInfo?this.state.systemInfo.vda-this.formerSystemInfo.vda>=0?c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-up"}),this.formatNumber(this.state.systemInfo.vda-this.formerSystemInfo.vda)):c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-down"}),this.formatNumber(this.formerSystemInfo.vda-this.state.systemInfo.vda)):c.default.createElement("p",{className:"percentage"},c.default.createElement("i",{className:"fa fa-arrow-alt-circle-up"}),"0"))))))),c.default.createElement("section",{className:"corner-box"},c.default.createElement("div",{className:"scroll-table"},c.default.createElement("table",null,c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",null,"主机名"),c.default.createElement("th",null,"IP地址"),c.default.createElement("th",null,"状态"),c.default.createElement("th",null,"描述")))),this.state.msgProtectedHost?c.default.createElement("p",{className:"hint-message"},this.state.msgProtectedHost):c.default.createElement("div",{className:"scroll-box"},c.default.createElement("table",null,c.default.createElement("tbody",null,this.state.protectedHosts.map(function(e,t){return c.default.createElement("tr",{key:"scroll-table-1-"+t},c.default.createElement("td",null,e.hostname),c.default.createElement("td",null,e.hostip),c.default.createElement("td",null,0===e.status?"保护中":"暂未保护"),c.default.createElement("td",null,e.description))}))))))),c.default.createElement("div",{className:"healthy-percentage"},c.default.createElement("p",{className:"title"},this.state.unhealthyHost&&this.state.unhealthyHost.length?"异常主机个数":"当前状态"),c.default.createElement("p",{className:"value"},this.state.unhealthyHost&&this.state.unhealthyHost.length?this.state.unhealthyHost.length:"正常")),c.default.createElement("div",{className:"background-container-header"}),c.default.createElement("div",{className:"background-container-bottom"},c.default.createElement("div",{className:"left"}),c.default.createElement("div",{className:"center"}),c.default.createElement("div",{className:"right"})),c.default.createElement("div",{className:"background-container-right-top"}),c.default.createElement("div",{className:"background-container-right-mid"}),c.default.createElement("div",{className:"background-container-right-bottom"}),c.default.createElement("div",{className:"right-content-container"},c.default.createElement("section",{className:"corner-box table"},c.default.createElement("div",{className:"scroll-table"},c.default.createElement("table",null,c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",null,"主机名"),c.default.createElement("th",null,"IP地址")))),this.state.msgAllHost?c.default.createElement("p",{className:"hint-message"},this.state.msgAllHost):c.default.createElement("div",{className:"scroll-box"},c.default.createElement("table",null,c.default.createElement("tbody",null,this.state.unhealthyHost&&this.state.unhealthyHost.map(function(t,a,n){return a==n.length-1?c.default.createElement("tr",{className:"problem-log last",onClick:e.onSelectHost.bind(e,t),key:"scroll-table-2-problem-"+a},c.default.createElement("td",null,t.name),c.default.createElement("td",null,t.ip)):c.default.createElement("tr",{className:"problem-log",onClick:e.onSelectHost.bind(e,t),key:"scroll-table-2-problem-"+a},c.default.createElement("td",null,t.name),c.default.createElement("td",null,t.ip))}),this.state.healthyHost.map(function(t,a){return c.default.createElement("tr",{onClick:e.onSelectHost.bind(e,t),key:"scroll-table-2-"+a},c.default.createElement("td",null,t.name),c.default.createElement("td",null,t.ip))})))))),c.default.createElement("section",{className:"charts"},c.default.createElement("div",{id:"hostInfoBox",className:"host-info"},c.default.createElement("div",{className:"corner-box"},c.default.createElement("div",null,c.default.createElement("img",{src:a(1361),alt:""}),c.default.createElement("div",{className:"host-detail"},c.default.createElement("p",{className:"host-name"},this.state.selectedHost&&this.state.selectedHost.name),c.default.createElement("div",{className:"host-ip"},c.default.createElement("p",null,this.state.selectedHost&&this.state.selectedHost.ip)),c.default.createElement("div",{className:"label-btn"},c.default.createElement("label",null,"可信防护："),c.default.createElement(y.default,{checkboxID:"protectBtn",isOn:this.state.isProtectOn,handleChange:this.changeProtectState.bind(this,"protectBtn",this.state.selectedHost,!1)})),c.default.createElement("div",{className:"label-btn"},c.default.createElement("label",null,"可信阻断："),c.default.createElement(y.default,{checkboxID:"blockBtn",isOn:this.state.isBlockOn,handleChange:this.changeBlockState.bind(this,"blockBtn",this.state.selectedHost,!1)})))))),c.default.createElement("div",{className:"host-info-extra"},c.default.createElement("div",{className:"title"},c.default.createElement("p",null,"异常问题")),c.default.createElement("div",{className:"content"},c.default.createElement("dl",null,c.default.createElement("dt",null,"异常ip："),this.state.selectedHost&&c.default.createElement("dd",null,0==this.state.selectedHost.status?"无异常":this.state.selectedHost.ip)),c.default.createElement("dl",null,c.default.createElement("dt",null,"异常进程或文件："),this.state.selectedHost&&(0==this.state.selectedHost.status?c.default.createElement("dd",null,"无异常"):c.default.createElement("dd",{title:this.state.selectedHost.file_error_path},this.state.selectedHost.file_error_path))),c.default.createElement("dl",null,c.default.createElement("dt",null,"异常哈希："),this.state.selectedHost&&c.default.createElement("dd",null,0==this.state.selectedHost.status?"无异常":this.state.selectedHost.file_error_hash))),c.default.createElement("button",{className:"btn btn-default btn-mark",onClick:this.markWarning.bind(this)},"标为误报")),c.default.createElement("div",{id:"linechart",className:"line-chart"}),c.default.createElement("div",{className:"gauge-1"},c.default.createElement(p.default,{svgid:"gaugeCPU",title:"CPU占用率",unity:"%",svgWidth:75,value:this.state.systemInfo?(100*this.state.systemInfo.used_cpu_pct).toFixed(2):0,percentage:this.state.systemInfo?this.state.systemInfo.used_cpu_pct:0})),c.default.createElement("div",{className:"gauge-2"},c.default.createElement(p.default,{svgid:"gaugeMem",title:"内存占用率",unity:"%",svgWidth:75,value:this.state.systemInfo?(100*this.state.systemInfo.used_mem_pct).toFixed(2):0,percentage:this.state.systemInfo?this.state.systemInfo.used_mem_pct:0})),c.default.createElement("div",{className:"gauge-3"},c.default.createElement(p.default,{svgid:"gaugeIO",title:"IO读写",unity:"KB/s",svgWidth:75,value:this.state.systemInfo?(parseFloat(this.state.systemInfo.disk_read)+parseFloat(this.state.systemInfo.disk_write)).toFixed(2):0,percentage:this.state.systemInfo?this.state.systemInfo.disk_read/1024/5+this.state.systemInfo.disk_write/1024/5:0}))),c.default.createElement("div",{className:"information"},c.default.createElement("div",{className:"corner-box"},c.default.createElement("div",{id:"scrollHostLog"},this.state.msgDetailLog?c.default.createElement("p",null,this.state.msgDetailLog):c.default.createElement("div",{className:"log-box"},this.state.detailLog.map(function(e,t){return c.default.createElement("p",{key:"log-"+t},e)})))))),c.default.createElement("div",{className:"interaction-area"},c.default.createElement("div",{id:"customTooltip",className:"tooltip-box"},c.default.createElement("div",{className:"host-info"},c.default.createElement("div",{className:"corner-box"},c.default.createElement("div",null,c.default.createElement("img",{src:a(1361),alt:""}),c.default.createElement("div",{className:"host-detail"},c.default.createElement("p",{className:"host-name"},this.state.tooltip&&this.state.tooltip.name),c.default.createElement("div",{className:"host-ip"},c.default.createElement("p",null,this.state.tooltip&&this.state.tooltip.ip)),c.default.createElement("div",{className:"label-btn"},c.default.createElement("label",null,"可信防护："),c.default.createElement(y.default,{checkboxID:"protectBtnInTooltip",isOn:this.state.isTooltipProtectOn,handleChange:this.changeProtectState.bind(this,"protectBtnInTooltip",this.state.tooltip,!0)})),c.default.createElement("div",{className:"label-btn"},c.default.createElement("label",null,"可信阻断："),c.default.createElement(y.default,{checkboxID:"blockBtnInTooltip",isOn:this.state.isTooltipBlockOn,handleChange:this.changeBlockState.bind(this,"blockBtnInTooltip",this.state.tooltip,!0)})))))),c.default.createElement("div",{className:"host-info-extra"},c.default.createElement("div",{className:"title"},c.default.createElement("p",null,"异常问题")),c.default.createElement("div",{className:"content"},c.default.createElement("dl",null,c.default.createElement("dt",null,"异常ip："),c.default.createElement("dd",null,this.state.tooltip&&this.state.tooltip.ip)),c.default.createElement("dl",null,c.default.createElement("dt",null,"异常进程或文件："),this.state.tooltip&&c.default.createElement("dd",{title:this.state.tooltip.file_error_path},this.state.tooltip.file_error_path)),c.default.createElement("dl",null,c.default.createElement("dt",null,"异常哈希："),c.default.createElement("dd",null,this.state.tooltip&&this.state.tooltip.file_error_hash))),c.default.createElement("button",{className:"btn btn-default btn-mark",onClick:this.markWarning.bind(this)},"标为误报")))),c.default.createElement(E.default,{showMsgBox:this.state.showMsgBox,msgContent:this.state.msgContent,msgButtonState:this.state.msgButtonState,msgButtonName:this.state.msgButtonName,handleConfirmMsgBox:this.handleConfirmMsgBox.bind(this)}))}}]),t}(c.default.Component);t.default=x},1361:function(e,t){e.exports="data:image/png;base64,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"},1373:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(1),c=n(l),u=a(23),m=(n(u),function(e){function t(e){s(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isOn:a.props.isOn||!1},a}return r(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){e.isOn!=this.props.isOn&&this.setState({isOn:e.isOn})}},{key:"onChange",value:function(){this.props.handleChange()&&this.setState({isOn:!this.state.isOn})}},{key:"render",value:function(){return c.default.createElement("label",{className:"custom-toggle-btn"},c.default.createElement("input",{id:this.props.checkboxID,type:"checkbox",checked:this.state.isOn,onChange:this.onChange.bind(this)}),c.default.createElement("span",{className:"slider"}))}}]),t}(c.default.Component));t.default=m},1466:function(e,t,a){"use strict";THREE.SpriteCanvasMaterial=function(e){THREE.Material.call(this),this.type="SpriteCanvasMaterial",this.color=new THREE.Color(16777215),this.program=function(){},this.setValues(e)},THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteCanvasMaterial.prototype.constructor=THREE.SpriteCanvasMaterial,THREE.SpriteCanvasMaterial.prototype.isSpriteCanvasMaterial=!0,THREE.SpriteCanvasMaterial.prototype.clone=function(){var e=new THREE.SpriteCanvasMaterial;return e.copy(this),e.color.copy(this.color),e.program=this.program,e},THREE.CanvasRenderer=function(e){function t(){ve.setRGB(0,0,0),Ee.setRGB(0,0,0),ge.setRGB(0,0,0);for(var e=0,t=S.length;e<t;e++){var a=S[e],n=a.color;a.isAmbientLight?ve.add(n):a.isDirectionalLight?Ee.add(n):a.isPointLight&&ge.add(n)}}function a(e,t,a){for(var n=0,s=S.length;n<s;n++){var i=S[n];if(me.copy(i.color),i.isDirectionalLight){var r=ye.setFromMatrixPosition(i.matrixWorld).normalize(),o=t.dot(r);if(o<=0)continue;o*=i.intensity,a.add(me.multiplyScalar(o))}else if(i.isPointLight){var r=ye.setFromMatrixPosition(i.matrixWorld),o=t.dot(ye.subVectors(r,e).normalize());if(o<=0)continue;if(0==(o*=0==i.distance?1:1-Math.min(e.distanceTo(r)/i.distance,1)))continue;o*=i.intensity,a.add(me.multiplyScalar(o))}}}function n(e,t,a){d(a.opacity),h(a.blending);var n=t.scale.x*U,s=t.scale.y*X,i=Math.sqrt(n*n+s*s);if(pe.min.set(e.x-i,e.y-i),pe.max.set(e.x+i,e.y+i),a.isSpriteMaterial){var r=a.map;if(null!==r){var o=de[r.id];if(void 0!==o&&o.version===r.version||(o=c(r),de[r.id]=o),void 0!==o.canvas){g(o.canvas);var l=r.image,u=l.width*r.offset.x,m=l.height*r.offset.y,f=l.width*r.repeat.x,p=l.height*r.repeat.y,v=n/f,y=s/p;Z.save(),Z.translate(e.x,e.y),0!==a.rotation&&Z.rotate(a.rotation),Z.translate(-n/2,-s/2),Z.scale(v,y),Z.translate(-u,-m),Z.fillRect(u,m,f,p),Z.restore()}}else g(a.color.getStyle()),Z.save(),Z.translate(e.x,e.y),0!==a.rotation&&Z.rotate(a.rotation),Z.scale(n,-s),Z.fillRect(-.5,-.5,1,1),Z.restore()}else a.isSpriteCanvasMaterial?(E(a.color.getStyle()),g(a.color.getStyle()),Z.save(),Z.translate(e.x,e.y),0!==a.rotation&&Z.rotate(a.rotation),Z.scale(n,s),a.program(Z),Z.restore()):a.isPointsMaterial&&(g(a.color.getStyle()),Z.save(),Z.translate(e.x,e.y),0!==a.rotation&&Z.rotate(a.rotation),Z.scale(n*a.size,-s*a.size),Z.fillRect(-.5,-.5,1,1),Z.restore())}function s(e,t,a,n){if(d(n.opacity),h(n.blending),Z.beginPath(),Z.moveTo(e.positionScreen.x,e.positionScreen.y),Z.lineTo(t.positionScreen.x,t.positionScreen.y),n.isLineBasicMaterial){if(f(n.linewidth),p(n.linecap),v(n.linejoin),n.vertexColors!==THREE.VertexColors)E(n.color.getStyle());else{var s=a.vertexColors[0].getStyle(),i=a.vertexColors[1].getStyle();if(s===i)E(s);else{try{var r=Z.createLinearGradient(e.positionScreen.x,e.positionScreen.y,t.positionScreen.x,t.positionScreen.y);r.addColorStop(0,s),r.addColorStop(1,i)}catch(e){r=s}E(r)}}n.isLineDashedMaterial&&y([n.dashSize,n.gapSize]),Z.stroke(),pe.expandByScalar(2*n.linewidth),n.isLineDashedMaterial&&y([])}}function i(e,t,n,s,i,c,m,f){if(_.info.render.vertices+=3,_.info.render.faces++,d(f.opacity),h(f.blending),I=e.positionScreen.x,M=e.positionScreen.y,N=t.positionScreen.x,R=t.positionScreen.y,B=n.positionScreen.x,A=n.positionScreen.y,r(I,M,N,R,B,A),(f.isMeshLambertMaterial||f.isMeshPhongMaterial||f.isMeshStandardMaterial)&&null===f.map)ce.copy(f.color),ue.copy(f.emissive),f.vertexColors===THREE.FaceColors&&ce.multiply(m.color),le.copy(ve),xe.copy(e.positionWorld).add(t.positionWorld).add(n.positionWorld).divideScalar(3),a(xe,m.normalModel,le),le.multiply(ce).add(ue),!0===f.wireframe?o(le,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):l(le);else if(f.isMeshBasicMaterial||f.isMeshLambertMaterial||f.isMeshPhongMaterial||f.isMeshStandardMaterial)if(null!==f.map){var p=f.map.mapping;p===THREE.UVMapping&&(C=m.uvs,u(I,M,N,R,B,A,C[s].x,C[s].y,C[i].x,C[i].y,C[c].x,C[c].y,f.map))}else null!==f.envMap?f.envMap.mapping===THREE.SphericalReflectionMapping&&(we.copy(m.vertexNormalsModel[s]).applyMatrix3(Se),P=.5*we.x+.5,O=.5*we.y+.5,we.copy(m.vertexNormalsModel[i]).applyMatrix3(Se),k=.5*we.x+.5,z=.5*we.y+.5,we.copy(m.vertexNormalsModel[c]).applyMatrix3(Se),L=.5*we.x+.5,D=.5*we.y+.5,u(I,M,N,R,B,A,P,O,k,z,L,D,f.envMap)):(le.copy(f.color),f.vertexColors===THREE.FaceColors&&le.multiply(m.color),!0===f.wireframe?o(le,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):l(le));else f.isMeshNormalMaterial?(we.copy(m.normalModel).applyMatrix3(Se),le.setRGB(we.x,we.y,we.z).multiplyScalar(.5).addScalar(.5),!0===f.wireframe?o(le,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):l(le)):(le.setRGB(1,1,1),!0===f.wireframe?o(le,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):l(le))}function r(e,t,a,n,s,i){Z.beginPath(),Z.moveTo(e,t),Z.lineTo(a,n),Z.lineTo(s,i),Z.closePath()}function o(e,t,a,n){f(t),p(a),v(n),E(e.getStyle()),Z.stroke(),pe.expandByScalar(2*t)}function l(e){g(e.getStyle()),Z.fill()}function c(e){if(0===e.version||e instanceof THREE.CompressedTexture||e instanceof THREE.DataTexture)return{canvas:void 0,version:e.version};var t=e.image;if(!1===t.complete)return{canvas:void 0,version:0};var a=e.wrapS===THREE.RepeatWrapping||e.wrapS===THREE.MirroredRepeatWrapping,n=e.wrapT===THREE.RepeatWrapping||e.wrapT===THREE.MirroredRepeatWrapping,s=e.wrapS===THREE.MirroredRepeatWrapping,i=e.wrapT===THREE.MirroredRepeatWrapping,r=document.createElement("canvas");r.width=t.width*(s?2:1),r.height=t.height*(i?2:1);var o=r.getContext("2d");o.setTransform(1,0,0,-1,0,t.height),o.drawImage(t,0,0),!0===s&&(o.setTransform(-1,0,0,-1,t.width,t.height),o.drawImage(t,-t.width,0)),!0===i&&(o.setTransform(1,0,0,1,0,0),o.drawImage(t,0,t.height)),!0===s&&!0===i&&(o.setTransform(-1,0,0,1,t.width,0),o.drawImage(t,-t.width,t.height));var l="no-repeat";!0===a&&!0===n?l="repeat":!0===a?l="repeat-x":!0===n&&(l="repeat-y");var c=Z.createPattern(r,l);return e.onUpdate&&e.onUpdate(e),{canvas:c,version:e.version}}function u(e,t,a,n,s,i,r,o,l,u,m,d,h){var f=de[h.id];if(void 0!==f&&f.version===h.version||(f=c(h),de[h.id]=f),void 0===f.canvas)return g("rgba( 0, 0, 0, 1)"),void Z.fill();g(f.canvas);var p,v,E,y,x,w,S,b,T=h.offset.x/h.repeat.x,H=h.offset.y/h.repeat.y,I=h.image.width*h.repeat.x,M=h.image.height*h.repeat.y;r=(r+T)*I,o=(o+H)*M,l=(l+T)*I,u=(u+H)*M,m=(m+T)*I,d=(d+H)*M,a-=e,n-=t,s-=e,i-=t,l-=r,u-=o,m-=r,d-=o,0!=(S=l*d-m*u)&&(b=1/S,p=(d*a-u*s)*b,v=(d*n-u*i)*b,E=(l*s-m*a)*b,y=(l*i-m*n)*b,x=e-p*r-E*o,w=t-v*r-y*o,Z.save(),Z.transform(p,v,E,y,x,w),Z.fill(),Z.restore())}function m(e,t,a){var n,s=t.x-e.x,i=t.y-e.y,r=s*s+i*i;0!==r&&(n=a/Math.sqrt(r),s*=n,i*=n,t.x+=s,t.y+=i,e.x-=s,e.y-=i)}function d(e){ee!==e&&(Z.globalAlpha=e,ee=e)}function h(e){te!==e&&(e===THREE.NormalBlending?Z.globalCompositeOperation="source-over":e===THREE.AdditiveBlending?Z.globalCompositeOperation="lighter":e===THREE.SubtractiveBlending?Z.globalCompositeOperation="darker":e===THREE.MultiplyBlending&&(Z.globalCompositeOperation="multiply"),te=e)}function f(e){se!==e&&(Z.lineWidth=e,se=e)}function p(e){ie!==e&&(Z.lineCap=e,ie=e)}function v(e){re!==e&&(Z.lineJoin=e,re=e)}function E(e){ae!==e&&(Z.strokeStyle=e,ae=e)}function g(e){ne!==e&&(Z.fillStyle=e,ne=e)}function y(e){oe.length!==e.length&&(Z.setLineDash(e),oe=e)}e=e||{};var x,w,S,b,T,H,I,M,N,R,B,A,C,P,O,k,z,L,D,_=this,j=new THREE.Projector,F=void 0!==e.canvas?e.canvas:document.createElement("canvas"),V=F.width,W=F.height,U=Math.floor(V/2),X=Math.floor(W/2),Y=0,G=0,Q=V,q=W,J=1,Z=F.getContext("2d",{alpha:!0===e.alpha}),K=new THREE.Color(0),$=!0===e.alpha?0:1,ee=1,te=0,ae=null,ne=null,se=null,ie=null,re=null,oe=[],le=new THREE.Color,ce=new THREE.Color,ue=new THREE.Color,me=new THREE.Color,de={},he=new THREE.Box2,fe=new THREE.Box2,pe=new THREE.Box2,ve=new THREE.Color,Ee=new THREE.Color,ge=new THREE.Color,ye=new THREE.Vector3,xe=new THREE.Vector3,we=new THREE.Vector3,Se=new THREE.Matrix3;void 0===Z.setLineDash&&(Z.setLineDash=function(){}),this.domElement=F,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(e){void 0!==e&&(J=e)},this.setSize=function(e,t,a){V=e*J,W=t*J,F.width=V,F.height=W,U=Math.floor(V/2),X=Math.floor(W/2),!1!==a&&(F.style.width=e+"px",F.style.height=t+"px"),he.min.set(-U,-X),he.max.set(U,X),fe.min.set(-U,-X),fe.max.set(U,X),ee=1,te=0,ae=null,ne=null,se=null,ie=null,re=null,this.setViewport(0,0,e,t)},this.setViewport=function(e,t,a,n){Y=e*J,G=t*J,Q=a*J,q=n*J},this.setScissor=function(){},this.setScissorTest=function(){},this.setClearColor=function(e,t){K.set(e),$=void 0!==t?t:1,fe.min.set(-U,-X),fe.max.set(U,X)},this.setClearColorHex=function(e,t){this.setClearColor(e,t)},this.getClearColor=function(){return K},this.getClearAlpha=function(){return $},this.getMaxAnisotropy=function(){return 0},this.clear=function(){!1===fe.isEmpty()&&(fe.intersect(he),fe.expandByScalar(2),fe.min.x=fe.min.x+U,fe.min.y=-fe.min.y+X,fe.max.x=fe.max.x+U,fe.max.y=-fe.max.y+X,$<1&&Z.clearRect(0|fe.min.x,0|fe.max.y,fe.max.x-fe.min.x|0,fe.min.y-fe.max.y|0),$>0&&(d(1),h(THREE.NormalBlending),g("rgba("+Math.floor(255*K.r)+","+Math.floor(255*K.g)+","+Math.floor(255*K.b)+","+$+")"),Z.fillRect(0|fe.min.x,0|fe.max.y,fe.max.x-fe.min.x|0,fe.min.y-fe.max.y|0)),fe.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(e,a){if(void 0!==a.isCamera){var r=e.background;r&&r.isColor?(d(1),h(THREE.NormalBlending),g(r.getStyle()),Z.fillRect(0,0,V,W)):!0===this.autoClear&&this.clear(),_.info.render.vertices=0,_.info.render.faces=0,Z.setTransform(Q/V,0,0,-q/W,Y,W-G),Z.translate(U,X),x=j.projectScene(e,a,this.sortObjects,this.sortElements),w=x.elements,S=x.lights,Se.getNormalMatrix(a.matrixWorldInverse),t();for(var o=0,l=w.length;o<l;o++){var c=w[o],u=c.material;if(void 0!==u&&0!==u.opacity){if(pe.makeEmpty(),c instanceof THREE.RenderableSprite)b=c,b.x*=U,b.y*=X,n(b,c,u);else if(c instanceof THREE.RenderableLine)b=c.v1,T=c.v2,b.positionScreen.x*=U,b.positionScreen.y*=X,T.positionScreen.x*=U,T.positionScreen.y*=X,pe.setFromPoints([b.positionScreen,T.positionScreen]),!0===he.intersectsBox(pe)&&s(b,T,c,u);else if(c instanceof THREE.RenderableFace){if(b=c.v1,T=c.v2,H=c.v3,b.positionScreen.z<-1||b.positionScreen.z>1)continue;if(T.positionScreen.z<-1||T.positionScreen.z>1)continue;if(H.positionScreen.z<-1||H.positionScreen.z>1)continue;b.positionScreen.x*=U,b.positionScreen.y*=X,T.positionScreen.x*=U,T.positionScreen.y*=X,H.positionScreen.x*=U,H.positionScreen.y*=X,u.overdraw>0&&(m(b.positionScreen,T.positionScreen,u.overdraw),m(T.positionScreen,H.positionScreen,u.overdraw),m(H.positionScreen,b.positionScreen,u.overdraw)),pe.setFromPoints([b.positionScreen,T.positionScreen,H.positionScreen]),!0===he.intersectsBox(pe)&&i(b,T,H,0,1,2,c,u)}fe.union(pe)}}Z.setTransform(1,0,0,1,0,0)}}}},1467:function(e,t,a){"use strict";THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0,this.renderOrder=0},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=new THREE.Color,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0,this.renderOrder=0},THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0,this.renderOrder=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null,this.renderOrder=0},THREE.Projector=function(){function e(a){if(!1!==a.visible){if(a instanceof THREE.Light)A.lights.push(a);else if(a instanceof THREE.Mesh||a instanceof THREE.Line||a instanceof THREE.Points){if(!1===a.material.visible)return;if(!0===a.frustumCulled&&!1===F.intersectsObject(a))return;t(a)}else if(a instanceof THREE.Sprite){if(!1===a.material.visible)return;if(!0===a.frustumCulled&&!1===F.intersectsSprite(a))return;t(a)}for(var n=a.children,s=0,i=n.length;s<i;s++)e(n[s])}}function t(e){u=n(),u.id=e.id,u.object=e,C.setFromMatrixPosition(e.matrixWorld),C.applyMatrix4(D),u.z=C.z,u.renderOrder=e.renderOrder,A.objects.push(u)}function a(e,t,a){var n=1/e.w;e.z*=n,e.z>=-1&&e.z<=1&&(g=o(),g.id=t.id,g.x=e.x*n,g.y=e.y*n,g.z=e.z,g.renderOrder=t.renderOrder,g.object=t,g.rotation=t.rotation,g.scale.x=t.scale.x*Math.abs(g.x-(e.x+a.projectionMatrix.elements[0])/(e.w+a.projectionMatrix.elements[12])),g.scale.y=t.scale.y*Math.abs(g.y-(e.y+a.projectionMatrix.elements[5])/(e.w+a.projectionMatrix.elements[13])),g.material=t.material,A.elements.push(g))}function n(){if(m===S){var e=new THREE.RenderableObject;return w.push(e),S++,m++,e}return w[m++]}function s(){if(h===T){var e=new THREE.RenderableVertex;return b.push(e),T++,h++,e}return b[h++]}function i(){if(p===I){var e=new THREE.RenderableFace;return H.push(e),I++,p++,e}return H[p++]}function r(){if(E===N){var e=new THREE.RenderableLine;return M.push(e),N++,E++,e}return M[E++]}function o(){if(y===B){var e=new THREE.RenderableSprite;return R.push(e),B++,y++,e}return R[y++]}function l(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function c(e,t){var a=0,n=1,s=e.z+e.w,i=t.z+t.w,r=-e.z+e.w,o=-t.z+t.w;return s>=0&&i>=0&&r>=0&&o>=0||!(s<0&&i<0||r<0&&o<0)&&(s<0?a=Math.max(a,s/(s-i)):i<0&&(n=Math.min(n,s/(s-i))),r<0?a=Math.max(a,r/(r-o)):o<0&&(n=Math.min(n,r/(r-o))),!(n<a||(e.lerp(t,a),t.lerp(e,1-n),0)))}var u,m,d,h,f,p,v,E,g,y,x,w=[],S=0,b=[],T=0,H=[],I=0,M=[],N=0,R=[],B=0,A={objects:[],lights:[],elements:[]},C=new THREE.Vector3,P=new THREE.Vector4,O=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),k=new THREE.Box3,z=new Array(3),L=new THREE.Matrix4,D=new THREE.Matrix4,_=new THREE.Matrix4,j=new THREE.Matrix3,F=new THREE.Frustum,V=new THREE.Vector4,W=new THREE.Vector4;this.projectVector=function(e,t){e.project(t)},this.unprojectVector=function(e,t){e.unproject(t)},this.pickingRay=function(){};var U=function(){function e(e){w=e,S=w.material,T.getNormalMatrix(w.matrixWorld),E.length=0,g.length=0,y.length=0}function t(e){var t=e.position,a=e.positionWorld,n=e.positionScreen;a.copy(t).applyMatrix4(x),n.copy(a).applyMatrix4(D);var s=1/n.w;n.x*=s,n.y*=s,n.z*=s,e.visible=n.x>=-1&&n.x<=1&&n.y>=-1&&n.y<=1&&n.z>=-1&&n.z<=1}function a(e,a,n){d=s(),d.position.set(e,a,n),t(d)}function n(e,t,a){E.push(e,t,a)}function o(e,t,a){g.push(e,t,a)}function l(e,t){y.push(e,t)}function u(e,t,a){return!0===e.visible||!0===t.visible||!0===a.visible||(z[0]=e.positionScreen,z[1]=t.positionScreen,z[2]=a.positionScreen,O.intersectsBox(k.setFromPoints(z)))}function m(e,t,a){return(a.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(a.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)<0}function h(e,t){var a=b[e],n=b[t];a.positionScreen.copy(a.position).applyMatrix4(_),n.positionScreen.copy(n.position).applyMatrix4(_),!0===c(a.positionScreen,n.positionScreen)&&(a.positionScreen.multiplyScalar(1/a.positionScreen.w),n.positionScreen.multiplyScalar(1/n.positionScreen.w),v=r(),v.id=w.id,v.v1.copy(a),v.v2.copy(n),v.z=Math.max(a.positionScreen.z,n.positionScreen.z),v.renderOrder=w.renderOrder,v.material=w.material,w.material.vertexColors===THREE.VertexColors&&(v.vertexColors[0].fromArray(g,3*e),v.vertexColors[1].fromArray(g,3*t)),A.elements.push(v))}function p(e,t,a){var n=b[e],s=b[t],r=b[a];if(!1!==u(n,s,r)&&(S.side===THREE.DoubleSide||!0===m(n,s,r))){f=i(),f.id=w.id,f.v1.copy(n),f.v2.copy(s),f.v3.copy(r),f.z=(n.positionScreen.z+s.positionScreen.z+r.positionScreen.z)/3,f.renderOrder=w.renderOrder,f.normalModel.fromArray(E,3*e),f.normalModel.applyMatrix3(T).normalize();for(var o=0;o<3;o++){var l=f.vertexNormalsModel[o];l.fromArray(E,3*arguments[o]),l.applyMatrix3(T).normalize(),f.uvs[o].fromArray(y,2*arguments[o])}f.vertexNormalsLength=3,f.material=w.material,A.elements.push(f)}}var E=[],g=[],y=[],w=null,S=null,T=new THREE.Matrix3;return{setObject:e,projectVertex:t,checkTriangleVisibility:u,checkBackfaceCulling:m,pushVertex:a,pushNormal:n,pushColor:o,pushUv:l,pushLine:h,pushTriangle:p}},X=new U;this.projectScene=function(t,n,o,u){p=0,E=0,y=0,A.elements.length=0,!0===t.autoUpdate&&t.updateMatrixWorld(),null===n.parent&&n.updateMatrixWorld(),L.copy(n.matrixWorldInverse),D.multiplyMatrices(n.projectionMatrix,L),F.setFromMatrix(D),m=0,A.objects.length=0,A.lights.length=0,e(t),!0===o&&A.objects.sort(l);for(var d=A.objects,g=0,w=d.length;g<w;g++){var S=d[g].object,T=S.geometry;if(X.setObject(S),x=S.matrixWorld,h=0,S instanceof THREE.Mesh){if(T instanceof THREE.BufferGeometry){var H=T.attributes,I=T.groups;if(void 0===H.position)continue;for(var M=H.position.array,N=0,R=M.length;N<R;N+=3)X.pushVertex(M[N],M[N+1],M[N+2]);if(void 0!==H.normal)for(var B=H.normal.array,N=0,R=B.length;N<R;N+=3)X.pushNormal(B[N],B[N+1],B[N+2]);if(void 0!==H.uv)for(var O=H.uv.array,N=0,R=O.length;N<R;N+=2)X.pushUv(O[N],O[N+1]);if(null!==T.index){var k=T.index.array;if(I.length>0)for(var z=0;z<I.length;z++)for(var U=I[z],N=U.start,R=U.start+U.count;N<R;N+=3)X.pushTriangle(k[N],k[N+1],k[N+2]);else for(var N=0,R=k.length;N<R;N+=3)X.pushTriangle(k[N],k[N+1],k[N+2])}else for(var N=0,R=M.length/3;N<R;N+=3)X.pushTriangle(N,N+1,N+2)}else if(T instanceof THREE.Geometry){var Y=T.vertices,G=T.faces,Q=T.faceVertexUvs[0];j.getNormalMatrix(x);for(var q=S.material,J=Array.isArray(q),Z=0,K=Y.length;Z<K;Z++){var $=Y[Z];if(C.copy($),!0===q.morphTargets)for(var ee=T.morphTargets,te=S.morphTargetInfluences,ae=0,ne=ee.length;ae<ne;ae++){var se=te[ae];if(0!==se){var ie=ee[ae],re=ie.vertices[Z];C.x+=(re.x-$.x)*se,C.y+=(re.y-$.y)*se,C.z+=(re.z-$.z)*se}}X.pushVertex(C.x,C.y,C.z)}for(var oe=0,le=G.length;oe<le;oe++){var ce=G[oe];if(void 0!==(q=!0===J?S.material[ce.materialIndex]:S.material)){var ue=q.side,me=b[ce.a],de=b[ce.b],he=b[ce.c];if(!1!==X.checkTriangleVisibility(me,de,he)){var fe=X.checkBackfaceCulling(me,de,he);if(ue!==THREE.DoubleSide){if(ue===THREE.FrontSide&&!1===fe)continue;if(ue===THREE.BackSide&&!0===fe)continue}f=i(),f.id=S.id,f.v1.copy(me),f.v2.copy(de),f.v3.copy(he),f.normalModel.copy(ce.normal),!1!==fe||ue!==THREE.BackSide&&ue!==THREE.DoubleSide||f.normalModel.negate(),f.normalModel.applyMatrix3(j).normalize();for(var pe=ce.vertexNormals,ve=0,Ee=Math.min(pe.length,3);ve<Ee;ve++){var ge=f.vertexNormalsModel[ve];ge.copy(pe[ve]),!1!==fe||ue!==THREE.BackSide&&ue!==THREE.DoubleSide||ge.negate(),ge.applyMatrix3(j).normalize()}f.vertexNormalsLength=pe.length;var ye=Q[oe];if(void 0!==ye)for(var xe=0;xe<3;xe++)f.uvs[xe].copy(ye[xe]);f.color=ce.color,f.material=q,f.z=(me.positionScreen.z+de.positionScreen.z+he.positionScreen.z)/3,f.renderOrder=S.renderOrder,A.elements.push(f)}}}}}else if(S instanceof THREE.Line){if(_.multiplyMatrices(D,x),T instanceof THREE.BufferGeometry){var H=T.attributes;if(void 0!==H.position){for(var M=H.position.array,N=0,R=M.length;N<R;N+=3)X.pushVertex(M[N],M[N+1],M[N+2]);if(void 0!==H.color)for(var we=H.color.array,N=0,R=we.length;N<R;N+=3)X.pushColor(we[N],we[N+1],we[N+2]);if(null!==T.index)for(var k=T.index.array,N=0,R=k.length;N<R;N+=2)X.pushLine(k[N],k[N+1]);else for(var Se=S instanceof THREE.LineSegments?2:1,N=0,R=M.length/3-1;N<R;N+=Se)X.pushLine(N,N+1)}}else if(T instanceof THREE.Geometry){var Y=S.geometry.vertices;if(0===Y.length)continue;me=s(),me.positionScreen.copy(Y[0]).applyMatrix4(_);for(var Se=S instanceof THREE.LineSegments?2:1,Z=1,K=Y.length;Z<K;Z++)me=s(),me.positionScreen.copy(Y[Z]).applyMatrix4(_),(Z+1)%Se>0||(de=b[h-2],V.copy(me.positionScreen),W.copy(de.positionScreen),!0===c(V,W)&&(V.multiplyScalar(1/V.w),W.multiplyScalar(1/W.w),v=r(),v.id=S.id,v.v1.positionScreen.copy(V),v.v2.positionScreen.copy(W),v.z=Math.max(V.z,W.z),v.renderOrder=S.renderOrder,v.material=S.material,S.material.vertexColors===THREE.VertexColors&&(v.vertexColors[0].copy(S.geometry.colors[Z]),v.vertexColors[1].copy(S.geometry.colors[Z-1])),A.elements.push(v)))}}else if(S instanceof THREE.Points){if(_.multiplyMatrices(D,x),T instanceof THREE.Geometry)for(var Y=S.geometry.vertices,Z=0,K=Y.length;Z<K;Z++){var $=Y[Z];P.set($.x,$.y,$.z,1),P.applyMatrix4(_),a(P,S,n)}else if(T instanceof THREE.BufferGeometry){var H=T.attributes;if(void 0!==H.position)for(var M=H.position.array,N=0,R=M.length;N<R;N+=3)P.set(M[N],M[N+1],M[N+2],1),P.applyMatrix4(_),a(P,S,n)}}else S instanceof THREE.Sprite&&(P.set(x.elements[12],x.elements[13],x.elements[14],1),P.applyMatrix4(D),a(P,S,n))}return!0===u&&A.elements.sort(l),A}}}});