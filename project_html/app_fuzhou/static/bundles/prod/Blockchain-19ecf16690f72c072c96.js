webpackJsonp([5],{1341:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(1),c=l(o),u=a(23),d=l(u),f=a(1365),m=l(f),h=a(1366),p=l(h),y=a(1367),b=l(y),g=a(1372),v=l(g),E=a(1360),N=l(E),A=a(1368),S=(l(A),function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectChain:!1,tabKey:1},a}return i(t,e),r(t,[{key:"handleSelectChain",value:function(e){this.setState({selectChain:(0,d.default)(e.target).index()})}},{key:"handleToggleTab",value:function(e){this.setState({tabKey:e})}},{key:"componentDidMount",value:function(){document.title="区块链存证"}},{key:"render",value:function(){return c.default.createElement("div",{className:"tamper databaseCover"},c.default.createElement("div",{className:"topPluginAction blockChainHead"},c.default.createElement("h2",null,"区块链存证"),c.default.createElement("ul",{className:"tab-tamper clearfix"},c.default.createElement("li",{className:1==this.state.tabKey?"tab-active":"",onClick:this.handleToggleTab.bind(this,1)},"区块链状态"),c.default.createElement("li",{className:3==this.state.tabKey?"tab-active":"",onClick:this.handleToggleTab.bind(this,3)},"当前交易"),c.default.createElement("li",{className:4==this.state.tabKey?"tab-active":"",onClick:this.handleToggleTab.bind(this,4)},"用户管理"))),1==this.state.tabKey&&c.default.createElement("div",{className:"blockChain-status"},c.default.createElement("div",{className:"chain-content"},c.default.createElement(N.default,null)),c.default.createElement("div",{className:"database-content",style:{marginTop:"0px"}},c.default.createElement("ul",{className:"clearfix databaseListUl"},c.default.createElement("li",{className:"0"==this.state.selectChain?"databaseList base-select":"databaseList",onClick:this.handleSelectChain.bind(this)},"拓扑图"),c.default.createElement("li",{className:"1"==this.state.selectChain?"databaseList base-select":"databaseList",onClick:this.handleSelectChain.bind(this)},"节点列表")),0==this.state.selectChain&&c.default.createElement(m.default,{selectChain:this.state.selectChain}),1==this.state.selectChain&&c.default.createElement(p.default,{selectChain:this.state.selectChain}))),3==this.state.tabKey&&c.default.createElement("div",{className:"currentDeal-content clearfix"},c.default.createElement(b.default,{tabKey:this.state.tabKey,getUsrList:this.state.getUsrList})),4==this.state.tabKey&&c.default.createElement("div",{className:"currentDeal-content clearfix"},c.default.createElement(v.default,{tabKey:this.state.tabKey})))}}]),t}(c.default.Component));t.default=S},1354:function(e,t,a){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),r=a(1),o=function(e){return e&&e.__esModule?e:{default:e}}(r),c=function(e){function t(e){return l(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),i(t,[{key:"render",value:function(){return o.default.createElement("div",{className:"loadingAction"},o.default.createElement("i",{className:"fa fa-spinner fa-spin fa-4x",style:{color:"#007AE1"}}))}}]),t}(o.default.Component);t.default=c},1360:function(e,t,a){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),r=a(1),o=function(e){return e&&e.__esModule?e:{default:e}}(r),c=(a(100),function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={chainnodes:0,chainheight:0,chaintradenum:0,chaintradenumsum:0},a}return s(t,e),i(t,[{key:"componentWillMount",value:function(){var e=this;$.ajax({url:"/api/chain/node_count/",type:"POST",dataType:"json",cache:!1,success:function(t){e.setState({chainnodes:t.count})}}),$.ajax({url:"/api/chain/block_count/",type:"POST",dataType:"json",cache:!1,success:function(t){e.setState({chainheight:t.count})}}),$.ajax({url:"/api/chain/peak_trans_count/",type:"POST",dataType:"json",cache:!1,success:function(t){e.setState({chaintradenum:t.count})}}),$.ajax({url:"/api/chain/day_trans_count/",type:"POST",dataType:"json",cache:!1,success:function(t){e.setState({chaintradenumsum:t.count})}})}},{key:"render",value:function(){return o.default.createElement("ul",null,o.default.createElement("li",{className:"clearfix"},o.default.createElement("img",{src:"/static/img/blockChain/nodes.png",alt:""}),o.default.createElement("p",null,"当前节点数"),o.default.createElement("h2",null,this.state.chainnodes)),o.default.createElement("li",{className:"clearfix"},o.default.createElement("img",{src:"/static/img/blockChain/blockheight.png",alt:""}),o.default.createElement("p",null,"区块高度"),o.default.createElement("h2",null,this.state.chainheight)),o.default.createElement("li",{className:"clearfix"},o.default.createElement("img",{src:"/static/img/blockChain/tradenumsum.png",alt:""}),o.default.createElement("p",null,"账号"),o.default.createElement("h2",null,this.state.chaintradenumsum)),o.default.createElement("li",{className:"clearfix"},o.default.createElement("img",{src:"/static/img/blockChain/tradenum.png",alt:""}),o.default.createElement("p",null,"峰值交易数"),o.default.createElement("h2",null,this.state.chaintradenum)),o.default.createElement("li",{className:"clearfix"},o.default.createElement("img",{src:"/static/img/blockChain/tradenumsum.png",alt:""}),o.default.createElement("p",null,"当日总交易笔数"),o.default.createElement("h2",null,this.state.chaintradenumsum)),o.default.createElement("li",{className:"clearfix"},o.default.createElement("img",{src:"/static/img/blockChain/tradenumsum.png",alt:""}),o.default.createElement("p",null,"不可逆交易数"),o.default.createElement("h2",null,this.state.chaintradenumsum)))}}]),t}(o.default.Component));t.default=c},1362:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(1),c=l(o),u=a(23),d=l(u),f=a(1354),m=l(f),h=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectAddAssetsName:!1,selectAddAssetsType:!1,showNameSelectBox:!1,showTypeSelectBox:!1,usrId:"",usrJob:"",assetType:"",fileName:"",fileSizeAll:0,overFlowFileSize:"",getUsrList:[]},a}return i(t,e),r(t,[{key:"handleShowSelectNameBox",value:function(){this.setState({showNameSelectBox:!this.state.showNameSelectBox,showTypeSelectBox:!1})}},{key:"handleSelectContent",value:function(e,t){var a=(0,d.default)(t.target).text(),l=(0,d.default)(t.target).attr("title"),n=(0,d.default)(t.target).attr("name");switch(e){case 1:this.setState({selectAddAssetsName:a,usrId:l,usrJob:n,showNameSelectBox:!1}),(0,d.default)(".addNameBox").val(a);break;case 2:this.setState({selectAddAssetsType:a,assetType:l,showTypeSelectBox:!1})}}},{key:"handleShowSelectTypeBox",value:function(){this.setState({showNameSelectBox:!1,showTypeSelectBox:!this.state.showTypeSelectBox})}},{key:"handleWriteName",value:function(e){this.setState({selectAddAssetsName:(0,d.default)(e.target).val(),usrJob:"",showNameSelectBox:!0});var t=[];if(this.props.getUsrList.map(function(e,a){t.push({username:e.username,id:e.id,department:e.department})}),""==(0,d.default)(e.target).val())this.setState({getUsrList:t});else{for(var a=t.length,l=[],n=(0,d.default)(e.target).val(),s=0;s<a;s++)t[s].username.indexOf(n)>=0&&l.push(t[s]);this.setState({getUsrList:l})}}},{key:"handleUploadFile",value:function(){if((0,d.default)("#uploadFileForm .addFileBox")[0].files[0].size/1e3>10){this.setState({overFlowFileSize:"文件超过10KB，请重新选择"});var e=(0,d.default)("#uploadFileForm .addFileBox");e.after(e.clone().val("")),e.remove()}else this.setState({fileName:(0,d.default)("#uploadFileForm .addFileBox")[0].files[0].name,fileSizeAll:(0,d.default)("#uploadFileForm .addFileBox")[0].files[0].size,overFlowFileSize:""})}},{key:"handleDeleteUploadFile",value:function(){var e=(0,d.default)("#uploadFileForm .addFileBox");e.after(e.clone().val("")),e.remove(),this.setState({fileName:"",fileSizeAll:0,overFlowFileSize:""})}},{key:"componentWillMount",value:function(){var e=[];this.props.getUsrList.map(function(t,a){e.push({username:t.username,id:t.id,department:t.department})}),this.setState({getUsrList:e})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return c.default.createElement("div",{className:"BackVersionBox"},c.default.createElement("div",{className:"back-version-content",style:{height:"540px",margin:"-270px 0 0 -330px"}},c.default.createElement("h2",{className:"back-v-title clearfix"},"新建资产 ",c.default.createElement("i",{className:"close-icon",onClick:this.props.handleCloseAddAssets.bind(this)},"×")),c.default.createElement("div",{className:"addAssetsCover"},c.default.createElement("div",{className:"addAssetsIpt clearfix"},c.default.createElement("h3",null,"用户"),c.default.createElement("input",{type:"text",className:"addAssetsIptName addNameBox",placeholder:"请指定用户",title:this.state.usrId,onKeyUp:this.handleWriteName.bind(this)}),c.default.createElement("a",{className:"selectOne",onClick:this.handleShowSelectNameBox.bind(this)}),c.default.createElement("h4",null,this.state.selectAddAssetsName,c.default.createElement("br",null),this.state.usrJob),c.default.createElement("div",{className:"getIptList",onClick:this.handleSelectContent.bind(this,1),style:{display:this.state.showNameSelectBox?"block":"none"}},this.state.getUsrList.map(function(e,t){return c.default.createElement("p",{key:t,title:e.id,name:e.department},e.username)}))),c.default.createElement("div",{className:"addAssetsIpt clearfix"},c.default.createElement("h3",null,"资产类型"),c.default.createElement("input",{type:"text",className:"addAssetsIptName addTypeBox",placeholder:"请选择资产类型",title:this.state.assetType,value:this.state.selectAddAssetsType?this.state.selectAddAssetsType:"",readOnly:!0}),c.default.createElement("a",{className:"selectOne",onClick:this.handleShowSelectTypeBox.bind(this)}),c.default.createElement("div",{className:"getIptList",onClick:this.handleSelectContent.bind(this,2),style:{display:this.state.showTypeSelectBox?"block":"none"}},this.props.getTypeList.map(function(e,t){return c.default.createElement("p",{key:t,title:e.key},e.name)}))),c.default.createElement("div",{className:"addAssetsIpt clearfix"},c.default.createElement("h3",null,"资产内容"),c.default.createElement("input",{type:"text",className:"addAssetsIptName addNumBox",placeholder:"输入"}),c.default.createElement("h4",null,"文件内容")),c.default.createElement("div",{className:"addAssetsIpt clearfix"},c.default.createElement("h3",null,"附件"),c.default.createElement("form",{id:"uploadFileForm",className:"clearfix",encType:"multipart/form-data"},c.default.createElement("p",{className:"storeFileName"},c.default.createElement("a",null,this.state.fileName),c.default.createElement("span",{className:"removeUploadFile",onClick:this.handleDeleteUploadFile.bind(this)},"×")),c.default.createElement("input",{type:"file",className:"addAssetsIptName addFileBox",onChange:this.handleUploadFile.bind(this)}),c.default.createElement("button",{className:"plugAction uploadFileBtn",type:"button"},"上传附件"),c.default.createElement("a",{className:"fileLimit"},"已上传 ",this.state.fileSizeAll/1e3," kb ",c.default.createElement("b",null,"只能上传一个文件，最大10KB"))),c.default.createElement("a",{className:"fileLimit"},this.state.overFlowFileSize))),c.default.createElement("div",{className:"version-action"},c.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-back",onClick:this.props.handleCancelAdd.bind(this)},"取消"),c.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-cancel",onClick:this.props.handleConformAdd.bind(this)},"确认")),c.default.createElement("p",{className:"errorMsg"},this.props.conformMsg),this.props.showActionLoading&&c.default.createElement(m.default,null)))}}]),t}(c.default.Component);t.default=h},1363:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(1),c=l(o),u=a(23),d=l(u),f=a(1354),m=l(f),h=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={usrPartAdd:"",usrJobAdd:"",getJobList:["rd","pm","qa","fe"],getPartList:["dev","ui","pm"],showPartSelectBox:!1,showJobSelectBox:!1,imgSize:0,overFlowFileSize:"",imgSrc:""},a}return i(t,e),r(t,[{key:"handleShowSelectJobBox",value:function(e){switch(e){case 1:this.setState({showPartSelectBox:!this.state.showPartSelectBox,showJobSelectBox:!1});break;case 2:this.setState({showJobSelectBox:!this.state.showJobSelectBox,showPartSelectBox:!1})}}},{key:"handleSelectContent",value:function(e,t){var a=(0,d.default)(t.target).text();switch(e){case 1:this.setState({showPartSelectBox:!1,usrPartAdd:a});break;case 2:this.setState({showJobSelectBox:!1,usrJobAdd:a})}}},{key:"handleUploadImg",value:function(){var e=(0,d.default)("#uploadFileForm .adduploadImg")[0].files[0];if(e.size/1e3>100){this.setState({overFlowFileSize:"文件超过100KB，请重新选择"});var t=(0,d.default)("#uploadFileForm .adduploadImg");t.after(e.clone().val("")),t.remove()}else{var a=new FileReader;a.onload=function(t){this.setState({imgSize:e.size,imgSrc:t.target.result})}.bind(this),a.readAsDataURL(e)}}},{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return c.default.createElement("div",{className:"BackVersionBox"},c.default.createElement("div",{className:"back-version-content",style:{height:"540px",margin:"-270px 0 0 -330px"}},c.default.createElement("h2",{className:"back-v-title clearfix"},"增加用户",c.default.createElement("i",{className:"close-icon",onClick:this.props.handleCloseAddUsrBox.bind(this)},"×")),c.default.createElement("div",{className:"addAssetsCover clearfix"},c.default.createElement("div",{className:"left-img-upload version-action"},c.default.createElement("div",{className:"left-img-upload version-action addAssetsIpt clearfix"},c.default.createElement("div",{className:"imgCover"},c.default.createElement("img",{src:this.state.imgSrc,alt:"",id:"setUsrPhoto"})),c.default.createElement("form",{id:"uploadFileForm",className:"clearfix",encType:"multipart/form-data"},c.default.createElement("input",{type:"file",className:"addAssetsIptName addFileBox uploadImg adduploadImg",accept:"image/jpg,image/jpeg,image/png,image/svg",onChange:this.handleUploadImg.bind(this)}),c.default.createElement("button",{className:"plugAction back-v-btn",type:"button"},"上传头像"),c.default.createElement("p",{className:"fileLimit"},"已上传 ",this.state.imgSize/1e3," kb ",c.default.createElement("br",null),c.default.createElement("b",null,"头像最大不超过100KB"))),c.default.createElement("a",{className:"fileLimit"},this.state.overFlowFileSize))),c.default.createElement("div",{className:"right-msg-upload clearfix"},c.default.createElement("div",{className:"addAssetsIpt clearfix add-usr-name"},c.default.createElement("h3",null,"姓名"),c.default.createElement("input",{type:"text",className:"addAssetsIptName usrNameAdd"})),c.default.createElement("div",{className:"addAssetsIpt clearfix add-usr-other"},c.default.createElement("h3",null,"部门"),c.default.createElement("input",{type:"text",className:"addAssetsIptName usrPartAdd",value:this.state.usrPartAdd,readOnly:!0}),c.default.createElement("a",{className:"selectOne addUsrSelect-one",onClick:this.handleShowSelectJobBox.bind(this,1)}),c.default.createElement("div",{className:"getIptList addUsrIptList",onClick:this.handleSelectContent.bind(this,1),style:{display:this.state.showPartSelectBox?"block":"none"}},this.state.getPartList.map(function(e,t){return c.default.createElement("p",{key:t},e)}))),c.default.createElement("div",{className:"addAssetsIpt clearfix add-usr-other"},c.default.createElement("h3",null,"职位"),c.default.createElement("input",{type:"text",className:"addAssetsIptName usrJobAdd",value:this.state.usrJobAdd,readOnly:!0}),c.default.createElement("a",{className:"selectOne addUsrSelect-one",onClick:this.handleShowSelectJobBox.bind(this,2)}),c.default.createElement("div",{className:"getIptList addUsrIptList",onClick:this.handleSelectContent.bind(this,2),style:{display:this.state.showJobSelectBox?"block":"none"}},this.state.getJobList.map(function(e,t){return c.default.createElement("p",{key:t},e)}))),c.default.createElement("div",{className:"addAssetsIpt clearfix add-usr-other"},c.default.createElement("h3",null,"邮箱"),c.default.createElement("input",{type:"text",className:"addAssetsIptName usrEmailAdd"})),c.default.createElement("div",{className:"addAssetsIpt clearfix add-usr-other"},c.default.createElement("h3",null,"联系电话"),c.default.createElement("input",{type:"text",className:"addAssetsIptName usrPhoneAdd"})))),c.default.createElement("div",{className:"version-action"},c.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-back",onClick:this.props.handleCancelAddUsr.bind(this)},"取消"),c.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-cancel",onClick:this.props.handleConformAddUsr.bind(this)},"确认")),c.default.createElement("p",{className:"errorMsg"},this.props.conformMsg),c.default.createElement("p",{className:"errorMsg"},this.state.errorPutInMsg),this.props.showActionLoading&&c.default.createElement(m.default,null)))}}]),t}(c.default.Component);t.default=h},1364:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(1),c=l(o),u=a(23),d=l(u),f=a(1354),m=l(f),h=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={getTypeList:[],showTypeSelectBox:!1,selectAddAssetsType:"",selectAddAssetsTypeKey:"",fileName:"",fileSizeAll:0,overFlowFileSize:""},a}return i(t,e),r(t,[{key:"getAssetsType",value:function(){var e=this;d.default.ajax({url:"/api/chain/query_tran_types/",type:"POST",dataType:"json",cache:!1,success:function(t){200==t.code&&e.setState({getTypeList:t.results})}})}},{key:"handleShowSelectTypeBox",value:function(){this.setState({showTypeSelectBox:!this.state.showTypeSelectBox})}},{key:"handleSelectContent",value:function(e){var t=(0,d.default)(e.target).text(),a=(0,d.default)(e.target).attr("title");this.setState({selectAddAssetsType:t,showTypeSelectBox:!1,selectAddAssetsTypeKey:a})}},{key:"handleUploadFile",value:function(){if((0,d.default)("#uploadFileForm .addFileBox")[0].files[0].size/1e3>10){this.setState({overFlowFileSize:"文件超过10KB，请重新选择"});var e=(0,d.default)("#uploadFileForm .addFileBox");e.after(e.clone().val("")),e.remove()}else this.setState({fileName:(0,d.default)("#uploadFileForm .addFileBox")[0].files[0].name,fileSizeAll:(0,d.default)("#uploadFileForm .addFileBox")[0].files[0].size,overFlowFileSize:""})}},{key:"handleDeleteUploadFile",value:function(){var e=(0,d.default)("#uploadFileForm .addFileBox");e.after(e.clone().val("")),e.remove(),this.setState({fileName:"",fileSizeAll:0,overFlowFileSize:""})}},{key:"componentWillMount",value:function(){this.getAssetsType()}},{key:"render",value:function(){return c.default.createElement("div",{className:"BackVersionBox"},c.default.createElement("div",{className:"back-version-content",style:{height:"540px",margin:"-270px 0 0 -330px"}},c.default.createElement("h2",{className:"back-v-title clearfix"},"新建资产 ",c.default.createElement("i",{className:"close-icon",onClick:this.props.handleCloseAddUsrAssets.bind(this)},"×")),c.default.createElement("div",{className:"addAssetsCover"},c.default.createElement("div",{className:"addAssetsIpt clearfix"},c.default.createElement("h3",null,"用户"),c.default.createElement("input",{type:"text",className:"addAssetsIptName",readOnly:!0,value:this.props.addNewUsrAsset.name}),c.default.createElement("h4",null,this.props.addNewUsrAsset.part," ",c.default.createElement("br",null),this.props.addNewUsrAsset.job)),c.default.createElement("div",{className:"addAssetsIpt clearfix"},c.default.createElement("h3",null,"资产类型"),c.default.createElement("input",{type:"text",className:"addAssetsIptName addNewUsrAssetTypeKey",placeholder:"请选择资产类型",title:this.state.selectAddAssetsTypeKey,value:this.state.selectAddAssetsType,readOnly:!0}),c.default.createElement("a",{className:"selectOne",onClick:this.handleShowSelectTypeBox.bind(this)}),c.default.createElement("div",{className:"getIptList",onClick:this.handleSelectContent.bind(this),style:{display:this.state.showTypeSelectBox?"block":"none"}},this.state.getTypeList.map(function(e,t){return c.default.createElement("p",{key:t,title:e.key},e.name)}))),c.default.createElement("div",{className:"addAssetsIpt clearfix"},c.default.createElement("h3",null,"资产内容"),c.default.createElement("input",{type:"text",className:"addAssetsIptName addNewUsrAssetNum",placeholder:"输入"}),c.default.createElement("h4",null,"文件内容")),c.default.createElement("div",{className:"addAssetsIpt clearfix"},c.default.createElement("h3",null,"附件"),c.default.createElement("form",{id:"uploadFileForm",encType:"multipart/form-data"},c.default.createElement("p",{className:"storeFileName"},c.default.createElement("a",null,this.state.fileName),c.default.createElement("span",{className:"removeUploadFile",onClick:this.handleDeleteUploadFile.bind(this)},"×")),c.default.createElement("input",{type:"file",className:"addAssetsIptName addFileBox",placeholder:"0.0",onChange:this.handleUploadFile.bind(this)}),c.default.createElement("button",{className:"plugAction uploadFileBtn",type:"button"},"上传附件"),c.default.createElement("a",{className:"fileLimit"},"已上传 ",this.state.fileSizeAll/1e3," kb ",c.default.createElement("b",null,"只能上传一个文件，最大10KB"))),c.default.createElement("a",{className:"fileLimit"},this.state.overFlowFileSize))),c.default.createElement("div",{className:"version-action"},c.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-back",onClick:this.props.handleCancelAddUsrAsset.bind(this)},"取消"),c.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-cancel",onClick:this.props.handleConformUsrAsset.bind(this)},"确认")),c.default.createElement("p",{className:"errorMsg"},this.props.conformMsg),this.props.showActionLoading&&c.default.createElement(m.default,null)))}}]),t}(c.default.Component);t.default=h},1365:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(1),c=l(o),u=a(23),d=l(u),f=a(39),m=l(f),h=a(495),p=l(h),y=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={actualDeal:!1,topPx:!0,isIE11:!1},a}return i(t,e),r(t,[{key:"isIE11",value:function(){return(window.ActiveXObject||"ActiveXObject"in window)&&navigator.userAgent.indexOf("rv:11.0")>-1?(this.setState({isIE11:!0}),!0):(this.setState({isIE11:!1}),!1)}},{key:"loadChain",value:function(){var e=[],t=[],a=m.default.init(document.getElementById("chain_box")),l="";l=this.state.isIE11?"circle":"image://static/img/blockChain/nodeicon.svg",d.default.ajax({url:"/api/chain/node_ips/",type:"POST",dataType:"json",cache:!1,success:function(n){n.members.map(function(t,a){e[a]={id:a+1,name:t,value:t}}),function(){for(var e=0;e<n.members.length;e++)for(var a=n.members.length-1;a>=0;a--)e!=a&&t.push({source:a,target:e})}(),this.option={tooltip:{},legend:[{}],animationDurationUpdate:15e3,animationEasingUpdate:"quinticInOut",series:[{name:"区块链拓扑图",type:"graph",layout:"circular",circular:{rotateLabel:!0},grid:{x:100,y:20,x2:20,y2:20},focusNodeAdjacency:!0,itemStyle:{normal:{color:"#979797"}},symbolSize:40,symbol:l,data:e,links:t,roam:!1,label:{normal:{show:!1,position:"left"}},lineStyle:{normal:{color:"source",curveness:.3}}}]},a.setOption(this.option)}})}},{key:"changeList",value:function(){var e=this;d.default.ajax({url:"/api/chain/query_trans_cu/",type:"POST",dataType:"json",cache:!1,data:{page:1,page_size:10},success:function(t){var a=t.data||[],l=[];a.forEach(function(e,t){var a=[];e.detail.length>1?e.detail.map(function(t,l){var n={};l!=e.detail.length-1&&(n.time=e.time,n.start=e.detail[l+1].username,n.end=t.username,a.push(n))}):a.push({time:e.time,start:e.detail[0].username,end:"暂无转让"}),l.push(a)});var n=e.state.topPx;e.setState({actualDeal:l,topPx:!n})}})}},{key:"componentWillMount",value:function(){this.isIE11()}},{key:"componentDidMount",value:function(){this.loadChain(),this.changeList(),(0,d.default)(window).resize(function(){var e=m.default.init(document.getElementById("chain_box"));e.resize({width:e.clientWidth})})}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){return c.default.createElement("div",{className:"clearfix"},c.default.createElement("div",{id:"chain_box",style:{width:"60%",height:"600px",margin:"40px 0"}}),c.default.createElement("div",{className:"actualTime"},c.default.createElement("table",null,c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",null,"时间"),c.default.createElement("th",null,"发起方"),c.default.createElement("th",null,"接收方"))),c.default.createElement("tbody",null)),c.default.createElement("div",{className:"dealList-cover"},!this.state.actualDeal&&c.default.createElement(p.default,null),this.state.actualDeal&&this.state.actualDeal.map(function(e,t){return c.default.createElement("div",{key:t,className:"dealUsrListMsg"},e.map(function(e,t){return c.default.createElement("p",{key:t,className:"clearfix"},c.default.createElement("i",null,e.time," "),c.default.createElement("i",null,e.start," "),c.default.createElement("i",null,e.end," "))}))}))))}}]),t}(c.default.Component);t.default=y},1366:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(1),c=l(o),u=a(23),d=l(u),f=a(495),m=l(f),h=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={chainListDetail:!1},a}return i(t,e),r(t,[{key:"onLoad",value:function(e){for(var t=window.radialIndicator,a=(0,d.default)(e).length,l=0;l<a;l++){var n=(0,d.default)(e)[l];t((0,d.default)(n),{initValue:(0,d.default)(n).attr("name")})}}},{key:"loadChainDetail",value:function(){var e=this;d.default.ajax({url:"/api/chain/node_details/",type:"POST",dataType:"json",cache:!1,success:function(t){e.setState({chainListDetail:t.members}),e.onLoad((0,d.default)(".dataList-content .roundPercent"))}})}},{key:"componentDidMount",value:function(){this.loadChainDetail()}},{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement("div",{className:"datalistTitle"},c.default.createElement("table",{className:"databaseHostList"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",null,"主机IP"),c.default.createElement("th",null,"内存占用"),c.default.createElement("th",null,"CPU占用"),c.default.createElement("th",null,"连接数"),c.default.createElement("th",null,"流入"),c.default.createElement("th",null,"流出"))))),!this.state.chainListDetail&&c.default.createElement(m.default,null),this.state.chainListDetail&&this.state.chainListDetail.map(function(e,t){return c.default.createElement("div",{className:"dataList-content",key:t},c.default.createElement("table",{className:"databaseHostList"},c.default.createElement("tbody",null,c.default.createElement("tr",null,c.default.createElement("td",{className:"singleTab"},e.host_ip),c.default.createElement("td",null,c.default.createElement("div",{className:"roundPercent",name:parseInt(100*e.mem_pct)})),c.default.createElement("td",null,c.default.createElement("div",{className:"roundPercent",name:parseInt(100*e.cpu_pct)})),c.default.createElement("td",null,c.default.createElement("div",{className:"roundPercent",name:parseInt(100*e.connections)})),c.default.createElement("td",null,e.received," KB"),c.default.createElement("td",null,e.sent," KB")))))}))}}]),t}(c.default.Component);t.default=h},1367:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(1),c=l(o),u=a(23),d=l(u),f=a(100),m=a(1362),h=l(m),p=a(1371),y=l(p),b=a(495),g=l(b),v=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={chainListDetail:[],dataListAllPage:1,currentListPageNum:1,dealDetailList:!1,addAssetsBox:!1,transAssetsBox:!1,transUrsId:"",transUrsName:"",transUrsType:"",transUrsAsset:"",transFileName:"",addUrsId:"",addUrsName:"",addUrsType:"",conformMsg:"",getUsrList:[],getTypeList:[],showActionLoading:!1},a}return i(t,e),r(t,[{key:"getAssetsType",value:function(){var e=this;d.default.ajax({url:"/api/chain/query_tran_types/",type:"POST",dataType:"json",cache:!1,success:function(t){200==t.code&&e.setState({getTypeList:t.results})}})}},{key:"getUsrLists",value:function(){var e=this;d.default.ajax({url:"/api/chain_user/query_all/",type:"POST",dataType:"json",cache:!1,success:function(t){200==t.code&&e.setState({getUsrList:t.list})}})}},{key:"loadChainDeal",value:function(e,t){var a=this;d.default.ajax({url:"/api/chain/trans_lists/",type:"POST",dataType:"json",cache:!1,data:{page:e,page_size:t},success:function(e){var t=parseInt(e.count/10)+(e.count%10!=0?1:0);200==e.code?(a.setState({dealDetailList:e.data,dataListAllPage:t}),(0,d.default)("#pageJumpNum").val("")):(a.setState({dealDetailList:[],dataListAllPage:0}),(0,d.default)("#pageJumpNum").val(""))}})}},{key:"handleToggleDetail",value:function(e,t){if("none"==(0,d.default)(".currentDealTab").eq(e).find("div.currentDealCover").css("display")){var a=this;d.default.ajax({url:"/api/chain/trans_detail/",type:"POST",dataType:"json",cache:!1,data:{asset_id:t},success:function(t){var l=a.state.dealDetailList;200==t.code?(l[e].detail=t.detail,a.setState({dealDetailList:l})):(l[e].detail=[],a.setState({dealDetailList:l}))},error:function(){var t=a.state.dealDetailList;t[e].detail=[],a.setState({dealDetailList:t})}})}(0,d.default)(".currentDealTab").eq(e).find("div.currentDealCover").slideToggle(200)}},{key:"handleShowMoreMsg",value:function(e,t){var a=(0,d.default)(".currentDealTab").eq(e);a.find("div.currentDeal").eq(t).find("div.usrMsg").slideToggle(200),a.siblings("div.currentDealTab").find("div.currentDeal").find("div.usrMsg").hide(200),a.find("div.currentDeal").eq(t).siblings("div.currentDeal").find("div.usrMsg").hide(200)}},{key:"handleBuble",value:function(e){e.stopPropagation()}},{key:"handleChangePage",value:function(e){this.setState({currentListPageNum:e,dealDetailList:!1}),this.loadChainDeal(e,10)}},{key:"handleEnterPage",value:function(e){var t=/^[0-9]+$/,a=parseInt((0,d.default)(e.target).val());t.test((0,d.default)(e.target).val())||(0,d.default)(e.target).val(""),a>this.state.dataListAllPage&&(0,d.default)(e.target).val(this.state.dataListAllPage),a<=0&&(0,d.default)(e.target).val(""),13==e.keyCode&&t.test((0,d.default)(e.target).val())&&(this.setState({currentListPageNum:a,dealDetailList:!1}),this.loadChainDeal(a,10),(0,d.default)(e.target).val(""))}},{key:"handleJumpPage",value:function(){var e=parseInt((0,d.default)("#pageJumpNum").val());this.setState({currentListPageNum:e,dealDetailList:!1}),this.loadChainDeal(e,10)}},{key:"handelTransDeal",value:function(e,t,a,l){l.stopPropagation();var n=(0,d.default)(l.target).parent("li").attr("title"),s=(0,d.default)(l.target).parent("li").attr("name");this.setState({transAssetsBox:!0,transUrsId:n,transUrsName:s,transUrsAsset:e,transUrsType:a,transFileName:t})}},{key:"handleCloseTransAssets",value:function(){this.setState({transAssetsBox:!1,conformMsg:""})}},{key:"handleCancelTrans",value:function(){this.setState({transAssetsBox:!1,conformMsg:""})}},{key:"handleConformTrans",value:function(){var e=(0,d.default)(".transUsrName").attr("name"),t=this;t.setState({showActionLoading:!0}),d.default.ajax({url:"/api/chain/transfer/",type:"POST",dataType:"json",cache:!1,data:{tx_id:t.state.transUrsId,next_user_id:e},error:function(){t.setState({conformMsg:"转移失败",showActionLoading:!1})},success:function(e){200==e.code?(t.setState({transAssetsBox:!1,showActionLoading:!1}),t.loadChainDeal(1,10)):t.setState({conformMsg:"转移失败",showActionLoading:!1})}})}},{key:"handleAddAssets",value:function(){this.getUsrLists(),this.setState({addAssetsBox:!0})}},{key:"handleCloseAddAssets",value:function(){this.setState({addAssetsBox:!1,conformMsg:""})}},{key:"handleCancelAdd",value:function(){this.setState({addAssetsBox:!1,conformMsg:""})}},{key:"handleConformAdd",value:function(){var e=(0,d.default)(".addNameBox").attr("title"),t=(0,d.default)(".addTypeBox").attr("title"),a=(0,d.default)(".addNumBox").val(),l=new FormData;if(l.append("user_id",e),l.append("type",t),l.append("asset",a),l.append("file",(0,d.default)("#uploadFileForm .addFileBox")[0].files[0]),""==e)this.setState({conformMsg:"请选择用户"});else if(""==t)this.setState({conformMsg:"请选择资产类型"});else if(""==a&&void 0==(0,d.default)("#uploadFileForm .addFileBox")[0].files[0])this.setState({conformMsg:"请输入资产内容"});else{var n=this;n.setState({showActionLoading:!0}),d.default.ajax({url:"/api/chain/create/",type:"POST",dataType:"json",cache:!1,contentType:!1,processData:!1,data:l,error:function(){n.setState({conformMsg:"创建失败",showActionLoading:!1})},success:function(e){200==e.code?(n.setState({addAssetsBox:!1,conformMsg:"",showActionLoading:!1}),n.loadChainDeal(1,10)):n.setState({conformMsg:"创建失败",showActionLoading:!1})}})}}},{key:"handleDownLoadFile",value:function(e,t){t.stopPropagation(),d.default.ajax({url:"/api/chain/down_tran_att/",type:"GET",cache:!1,dataType:"json",data:{asset_id:e},error:function(){},success:function(e){if(200==e.code){var t=document.createElement("a");t.setAttribute("href",e.url),t.setAttribute("download","");var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,document.defaultView,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(a)}}})}},{key:"handleSearchListOrUsr",value:function(){}},{key:"componentWillMount",value:function(){this.loadChainDeal(1,10),this.getUsrLists(),this.getAssetsType()}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return c.default.createElement("div",{style:{display:"2"==this.props.tabKey?"block":"none"}},c.default.createElement("h2",{className:"block-chain-sec-title"},"当前交易"),c.default.createElement("div",{className:"datalistTitle"},c.default.createElement("table",{className:"databaseHostList chainDealTitle"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",null,"业务类型"),c.default.createElement("th",null,"证实状态"),c.default.createElement("th",null,"交易内容"),c.default.createElement("th",null,"交易时间"),c.default.createElement("th",null,"附件"))))),!this.state.dealDetailList&&c.default.createElement(g.default,null),this.state.dealDetailList&&this.state.dealDetailList.map(function(e,t){return c.default.createElement("div",{className:"dataList-content currentDealTab",key:t},c.default.createElement("table",{className:"databaseHostList"},c.default.createElement("tbody",null,0==e.confirm_status&&c.default.createElement("tr",null,c.default.createElement("td",{className:"assets-not-Confirm"},c.default.createElement("p",null,c.default.createElement("b",null,c.default.createElement("i",{className:"fa fa-spinner fa-spin",style:{color:"#fff",margin:"0 8px",cursor:"pointer"}}),"资产正在证实请稍后")),c.default.createElement("p",null,"后台有资产正在证实，稍后您可通过刷新页面查看证实情况。"))),0!=e.confirm_status&&c.default.createElement("tr",{onClick:this.handleToggleDetail.bind(this,t,e.id)},c.default.createElement("td",null,e.type),c.default.createElement("td",null,1==e.confirm_status&&c.default.createElement("b",null,c.default.createElement("i",{className:"fa fa-check-circle",style:{color:"#007ae1",margin:"0 8px",cursor:"pointer"}}),"证实成功"),2==e.confirm_status&&c.default.createElement("b",null,c.default.createElement("i",{className:"fa fa-times-circle",style:{color:"#CB4B4B",margin:"0 8px",cursor:"pointer"}}),"证实失败")),c.default.createElement("td",null,e.asset),c.default.createElement("td",null,e.time),c.default.createElement("td",null,c.default.createElement("p",null,e.filename,""!=e.filename&&c.default.createElement("i",{className:"fa fa-download",style:{color:"#007ae1",margin:"0 0 0 8px",cursor:"pointer"},onClick:this.handleDownLoadFile.bind(this,e.id)})))))),c.default.createElement("div",{className:"showDatabaseHostList currentDealCover clearfix"},!e.detail&&c.default.createElement(g.default,null),c.default.createElement("div",{className:"leftDealDetail"},c.default.createElement("ul",null,c.default.createElement("li",null,c.default.createElement("h4",{className:"detailTitle"},"资产内容"),c.default.createElement("p",{className:"detailContent"},e.asset)),c.default.createElement("li",null,c.default.createElement("h4",{className:"detailTitle"},"附件"),c.default.createElement("p",{className:"detailContent"},e.filename,""!=e.filename&&c.default.createElement("i",{className:"fa fa-download",style:{color:"#007ae1",margin:"0 0 0 8px",cursor:"pointer"},onClick:this.handleDownLoadFile.bind(this,e.id)})," ")),c.default.createElement("li",null,c.default.createElement("h4",{className:"detailTitle"},"证实状态"),c.default.createElement("p",{className:"detailContent"},1==e.confirm_status&&c.default.createElement("b",null,c.default.createElement("i",{className:"fa fa-check-circle",style:{color:"#007ae1",margin:"0 8px",cursor:"pointer"}}),"证实成功"),2==e.confirm_status&&c.default.createElement("b",null,c.default.createElement("i",{className:"fa fa-times-circle",style:{color:"#CB4B4B",margin:"0 8px",cursor:"pointer"}}),"证实失败"))))),e.detail&&e.detail.map(function(a,l){var n=e.detail.length-1;return c.default.createElement("div",{className:"currentDeal clearfix",key:l},c.default.createElement("div",{className:"rightDealDetail",onClick:this.handleShowMoreMsg.bind(this,t,l)},c.default.createElement("ul",{className:"clearfix"},c.default.createElement("li",{className:0==l?"dealStatus lastDealStatus":"dealStatus "},c.default.createElement("i",null)),c.default.createElement("li",null,c.default.createElement("img",{src:null==a.photo?"/static/img/Avatar.png":a.photo,alt:""})),c.default.createElement("li",null,"用户：",a.username),c.default.createElement("li",null,"职位：",a.job),c.default.createElement("li",null,"部门：",a.department),c.default.createElement("li",{className:0==l?"dealStatus lastDealStatus right-line":"dealStatus right-line"},c.default.createElement("i",null))),c.default.createElement("div",{className:"usrMsg clearfix",onClick:this.handleBuble.bind(this)},c.default.createElement("img",{src:null==a.photo?"/static/img/Avatar.png":a.photo,alt:"",className:"big-img-lt"}),c.default.createElement("span",{className:"icon-seeMore"}),c.default.createElement("div",{className:"rightMsg"},c.default.createElement("h1",null,a.username),".",c.default.createElement("h2",null,"Identification"),c.default.createElement("h3",null),c.default.createElement("div",{className:"msgList clearfix"},c.default.createElement("div",{className:"msg-lt"},c.default.createElement("p",null,"职位 : ",c.default.createElement("i",null,a.job)," "),c.default.createElement("p",null,"部门 : ",c.default.createElement("i",null,a.department)," "),c.default.createElement("p",null,"状态 : ",c.default.createElement("b",{className:0==a.is_active?"limit":""}),c.default.createElement("i",null,0==a.is_active?"已停用":"已启用")," ")),c.default.createElement("div",{className:"msg-rt"},c.default.createElement("p",{className:"msg-email"},"邮箱 : ",c.default.createElement("i",null,a.email)),c.default.createElement("p",{className:"msg-phone"},"电话 : ",c.default.createElement("i",null,a.phone))))))),c.default.createElement("div",{className:"showDealWay clearfix",style:{display:n==l?"none":"block"}},c.default.createElement("i",{className:l%2==0?"dealWayLine line-lt":"dealWayLine line-rt"}),c.default.createElement("p",null,c.default.createElement("i",null,a.time),"通过：",e.type)))}.bind(this))))}.bind(this)),this.state.addAssetsBox&&c.default.createElement(h.default,{showActionLoading:this.state.showActionLoading,handleCloseAddAssets:this.handleCloseAddAssets.bind(this),handleCancelAdd:this.handleCancelAdd.bind(this),handleConformAdd:this.handleConformAdd.bind(this),getUsrList:this.state.getUsrList,getTypeList:this.state.getTypeList,conformMsg:this.state.conformMsg}),this.state.transAssetsBox&&c.default.createElement(y.default,{showActionLoading:this.state.showActionLoading,handleCloseTransAssets:this.handleCloseTransAssets.bind(this),handleCancelTrans:this.handleCancelTrans.bind(this),handleConformTrans:this.handleConformTrans.bind(this),transUrsId:this.state.transUrsId,transUrsName:this.state.transUrsName,transUrsType:this.state.transUrsType,getUsrList:this.state.getUsrList,getTypeList:this.state.getTypeList,transUrsAsset:this.state.transUrsAsset,conformMsg:this.state.conformMsg,transFileName:this.state.transFileName}),c.default.createElement("div",{className:"pagination-all"},c.default.createElement(f.Pagination,{prev:!0,next:!0,first:!1,last:!1,ellipsis:!0,boundaryLinks:!0,items:this.state.dataListAllPage,activePage:this.state.currentListPageNum,maxButtons:7,onSelect:this.handleChangePage.bind(this)}),c.default.createElement("div",{className:"pageCount"},c.default.createElement("input",{className:"pageNum",id:"pageJumpNum",placeholder:"输入",onKeyUp:this.handleEnterPage.bind(this),onKeyDown:this.handleEnterPage.bind(this)}),c.default.createElement("img",{className:"searchNum",src:"/static/img/skip.svg",onClick:this.handleJumpPage.bind(this)}))))}}]),t}(c.default.Component);t.default=v},1368:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(1),c=l(o),u=a(1360),d=l(u),f=a(1369),m=l(f),h=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return i(t,e),r(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"chain-content"},c.default.createElement(d.default,null),c.default.createElement(m.default,null))}}]),t}(c.default.Component);t.default=h},1369:function(e,t,a){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),r=a(1),o=function(e){return e&&e.__esModule?e:{default:e}}(r),c=function(e){function t(e){l(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return s(t,e),i(t,[{key:"render",value:function(){return o.default.createElement("div",{className:"nodeTableList"},o.default.createElement("div",{className:"nodeTableList-header"},o.default.createElement("span",null,"节点列表"),o.default.createElement("span",{className:"total"},"共．．．．项")))}}]),t}(o.default.Component);t.default=c},1370:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(1),c=l(o),u=a(23),d=l(u),f=a(1354),m=l(f),h=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={usrPartAdd:!1,usrJobAdd:!1,getJobList:["rd","pm","qa","fe"],getPartList:["dev","ui","pm"],showPartSelectBox:!1,showJobSelectBox:!1,imgSize:0,overFlowFileSize:"",imgSrc:!1},a}return i(t,e),r(t,[{key:"handleShowSelectJobBox",value:function(e){switch(e){case 1:this.setState({showPartSelectBox:!this.state.showPartSelectBox,showJobSelectBox:!1});break;case 2:this.setState({showJobSelectBox:!this.state.showJobSelectBox,showPartSelectBox:!1})}}},{key:"handleSelectContent",value:function(e,t){var a=(0,d.default)(t.target).text();switch(e){case 1:this.setState({showPartSelectBox:!1,usrPartAdd:a});break;case 2:this.setState({showJobSelectBox:!1,usrJobAdd:a})}}},{key:"handleUploadImg",value:function(){var e=(0,d.default)("#uploadFileForm .uploadImg")[0].files[0];if(e.size/1024/1024>10){this.setState({overFlowFileSize:"文件超过10M，请重新选择"});var t=(0,d.default)("#uploadFileForm .uploadImg");t.after(t.clone().val("")),t.remove()}else{var a=new FileReader;a.onload=function(t){this.setState({overFlowFileSize:"",imgSize:e.size,imgSrc:t.target.result})}.bind(this),a.readAsDataURL(e)}}},{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return c.default.createElement("div",{className:"BackVersionBox"},c.default.createElement("div",{className:"back-version-content",style:{height:"540px",margin:"-270px 0 0 -330px"}},c.default.createElement("h2",{className:"back-v-title clearfix"},"编辑用户",c.default.createElement("i",{className:"close-icon",onClick:this.props.handleCloseSetUsrBox.bind(this)},"×")),c.default.createElement("div",{className:"addAssetsCover clearfix"},c.default.createElement("div",{className:"left-img-upload version-action addAssetsIpt clearfix"},c.default.createElement("div",{className:"imgCover"},c.default.createElement("img",{src:this.state.imgSrc||this.props.settingUsrMsgList.photo,alt:"",id:"setUsrPhoto"})),c.default.createElement("form",{id:"uploadFileForm",className:"clearfix",encType:"multipart/form-data"},c.default.createElement("input",{type:"file",className:"addAssetsIptName addFileBox uploadImg",accept:"image/jpg,image/jpeg,image/png,image/svg",onChange:this.handleUploadImg.bind(this)}),c.default.createElement("button",{className:"plugAction back-v-btn",type:"button"},"上传头像"),c.default.createElement("p",{className:"fileLimit"},"已上传 ",this.state.imgSize/1e3," kb ",c.default.createElement("br",null),c.default.createElement("b",null,"头像最大不超过100KB"))),c.default.createElement("a",{className:"fileLimit"},this.state.overFlowFileSize)),c.default.createElement("div",{className:"right-msg-upload clearfix"},c.default.createElement("div",{className:"addAssetsIpt clearfix add-usr-name"},c.default.createElement("h3",null,"用户名"),c.default.createElement("input",{type:"text",className:"addAssetsIptName usrNameAdd",defaultValue:this.props.settingUsrMsgList.name,readOnly:!0})),c.default.createElement("div",{className:"addAssetsIpt clearfix add-usr-other"},c.default.createElement("h3",null,"部门"),c.default.createElement("input",{type:"text",className:"addAssetsIptName usrPartAdd",defaultValue:this.props.settingUsrMsgList.department})),c.default.createElement("div",{className:"addAssetsIpt clearfix add-usr-other"},c.default.createElement("h3",null,"职位"),c.default.createElement("input",{type:"text",className:"addAssetsIptName usrJobAdd",defaultValue:this.props.settingUsrMsgList.job})),c.default.createElement("div",{className:"addAssetsIpt clearfix add-usr-other"},c.default.createElement("h3",null,"邮箱"),c.default.createElement("input",{type:"text",className:"addAssetsIptName usrEmailAdd",defaultValue:this.props.settingUsrMsgList.email})),c.default.createElement("div",{className:"addAssetsIpt clearfix add-usr-other"},c.default.createElement("h3",null,"联系电话"),c.default.createElement("input",{type:"text",className:"addAssetsIptName usrPhoneAdd",defaultValue:this.props.settingUsrMsgList.phone})))),c.default.createElement("div",{className:"version-action"},c.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-back",onClick:this.props.handleCancelSetUsr.bind(this)},"取消"),c.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-cancel",onClick:this.props.handleConformSetUsr.bind(this)},"确认")),c.default.createElement("p",{className:"errorMsg"},this.props.conformMsg),this.props.showActionLoading&&c.default.createElement(m.default,null)))}}]),t}(c.default.Component);t.default=h},1371:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(1),c=l(o),u=a(23),d=l(u),f=a(1354),m=l(f),h=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={selectAddAssetsName:!1,selectAddAssetsType:!1,showNameSelectBox:!1,showTypeSelectBox:!1,usrJob:"",transUsrId:"",assetType:""},a}return i(t,e),r(t,[{key:"handleShowSelectNameBox",value:function(){this.setState({showNameSelectBox:!this.state.showNameSelectBox,showTypeSelectBox:!1})}},{key:"handleSelectContent",value:function(e,t){var a=(0,d.default)(t.target).text(),l=(0,d.default)(t.target).attr("name"),n=(0,d.default)(t.target).attr("title");switch(e){case 1:this.setState({selectAddAssetsName:a,usrJob:l,transUsrId:n,showNameSelectBox:!1});break;case 2:this.setState({selectAddAssetsType:a,assetType:n,showTypeSelectBox:!1})}}},{key:"handleShowSelectTypeBox",value:function(){this.setState({showNameSelectBox:!1,showTypeSelectBox:!this.state.showTypeSelectBox})}},{key:"handleWriteName",value:function(){}},{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return c.default.createElement("div",{className:"BackVersionBox"},c.default.createElement("div",{className:"back-version-content",style:{height:"480px",margin:"-240px 0 0 -330px"}},c.default.createElement("h2",{className:"back-v-title clearfix"},"资产转移 （资产所有者：",c.default.createElement("b",null,this.props.transUrsName),"）",c.default.createElement("i",{className:"close-icon",onClick:this.props.handleCloseTransAssets.bind(this)},"×")),c.default.createElement("div",{className:"addAssetsCover"},c.default.createElement("div",{className:"addAssetsIpt clearfix"},c.default.createElement("h3",null,"转移到目标用户"),c.default.createElement("input",{type:"text",className:"addAssetsIptName transUsrName",placeholder:"请指定用户",name:this.state.transUsrId,value:this.state.selectAddAssetsName?this.state.selectAddAssetsName:"",onChange:this.handleWriteName.bind(this)}),c.default.createElement("a",{className:"selectOne",onClick:this.handleShowSelectNameBox.bind(this)}),c.default.createElement("h4",null,this.state.selectAddAssetsName," ",c.default.createElement("br",null),this.state.usrJob),c.default.createElement("div",{className:"getIptList",onClick:this.handleSelectContent.bind(this,1),style:{display:this.state.showNameSelectBox?"block":"none"}},this.props.getUsrList.map(function(e,t){return c.default.createElement("p",{key:t,title:e.id,name:e.department},e.username)}))),c.default.createElement("div",{className:"addAssetsIpt clearfix"},c.default.createElement("h3",null,"资产类型"),c.default.createElement("input",{type:"text",className:"addAssetsIptName",placeholder:"请选择资产类型",title:this.state.assetType,value:this.props.transUrsType,readOnly:!0}),c.default.createElement("div",{className:"getIptList",onClick:this.handleSelectContent.bind(this,2),style:{display:this.state.showTypeSelectBox?"block":"none"}},this.props.getTypeList.map(function(e,t){return c.default.createElement("p",{key:t,title:e.key},e.name)}))),c.default.createElement("div",{className:"addAssetsIpt clearfix"},c.default.createElement("h3",null,"资产内容"),c.default.createElement("input",{type:"text",className:"addAssetsIptName",value:this.props.transUrsAsset,readOnly:!0}),c.default.createElement("h4",null,"单位")),c.default.createElement("div",{className:"addAssetsIpt clearfix"},c.default.createElement("h3",null,"附件"),c.default.createElement("h4",null,this.props.transFileName))),c.default.createElement("div",{className:"version-action"},c.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-back",onClick:this.props.handleCancelTrans.bind(this)},"取消"),c.default.createElement("button",{className:"plugAction back-v-btn back-v-btn-cancel",onClick:this.props.handleConformTrans.bind(this)},"确认")),c.default.createElement("p",{className:"errorMsg"},this.props.conformMsg),this.props.showActionLoading&&c.default.createElement(m.default,null)))}}]),t}(c.default.Component);t.default=h},1372:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),o=a(1),c=l(o),u=a(23),d=l(u),f=a(100),m=a(1363),h=l(m),p=a(1364),y=l(p),b=a(1370),g=l(b),v=a(495),E=l(v),N=function(e){function t(e){n(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={usrListDetail:!1,showUrsDetail:!1,dataListAllPage:1,currentListPageNum:1,addNewUsr:!1,addNewUsrAssetBox:!1,addNewUsrAsset:{name:"",part:"",job:"",id:""},settingUsrBox:!1,conformMsg:"",settingUsrMsgList:{name:"",department:"",job:"",email:"",phone:"",photo:""},settingUsrId:"",showActionLoading:!1,limitAccountLoading:!1,limitAccountText:"正在请求..."},a}return i(t,e),r(t,[{key:"getUsrList",value:function(e,t){var a=this;d.default.ajax({url:"/api/chain_user/query_list/",type:"POST",dataType:"json",cache:!1,data:{page:e,pageSize:t},success:function(t){var l=t.count%10==0?t.count/10:parseInt(t.count/10)+1;200==t.code&&a.setState({usrListDetail:t.list,dataListAllPage:l,currentListPageNum:e})}})}},{key:"handleToggleDetail",value:function(e){var t=this;d.default.ajax({url:"/api/chain_user/query_detail/",type:"POST",dataType:"json",cache:!1,data:{user_id:e},success:function(a){200==a.code&&t.setState({showUrsDetail:a.user_detail,settingUsrId:e,settingUsrMsgList:{name:a.user_detail.username,department:a.user_detail.department,job:a.user_detail.job,email:a.user_detail.email,phone:a.user_detail.phone,photo:a.user_detail.photo||"/static/img/Avatar.png"},usrListDetail:!1})}})}},{key:"handleAddUsrBox",value:function(){this.setState({addNewUsr:!0})}},{key:"handleCloseAddUsrBox",value:function(){this.setState({addNewUsr:!1,conformMsg:""})}},{key:"handleCancelAddUsr",value:function(){this.setState({addNewUsr:!1,conformMsg:""})}},{key:"handleConformAddUsr",value:function(){var e=(0,d.default)("input.usrNameAdd").val(),t=(0,d.default)("input.usrEmailAdd").val(),a=(0,d.default)("input.usrPhoneAdd").val(),l=(0,d.default)("input.usrPartAdd").val(),n=(0,d.default)("input.usrJobAdd").val(),s=this,i=/^[\u4e00-\u9fa5_a-zA-Z0-9]{2,20}/,r=/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/,o=/^1[3|4|5|7|8][0-9]\d{4,8}$/,c=new FormData;c.append("username",e),c.append("email",t),c.append("phone",a),c.append("job",n),c.append("department",l),c.append("file",(0,d.default)("#uploadFileForm .uploadImg")[0].files[0]),""==e?this.setState({conformMsg:"请输入用户名"}):""==l?this.setState({conformMsg:"请选择部门"}):""==n?this.setState({conformMsg:"请选择职位"}):""==t?this.setState({conformMsg:"请输入邮箱"}):""==a?this.setState({conformMsg:"请输入电话"}):i.test(e)?r.test(t)?o.test(a)?(this.setState({showActionLoading:!0}),d.default.ajax({url:"/api/chain_user/add/",type:"POST",dataType:"json",cache:!1,contentType:!1,processData:!1,data:c,error:function(){s.setState({conformMsg:"新建失败",showActionLoading:!1})},success:function(e){200==e.code?(s.getUsrList(),s.setState({addNewUsr:!1,conformMsg:"",showActionLoading:!1})):s.setState({conformMsg:"新建失败",showActionLoading:!1})}})):this.setState({conformMsg:"请输入正确的手机号码"}):this.setState({conformMsg:"请输入正确的邮箱"}):this.setState({conformMsg:"用户名规则：请输入2-18位数字字母汉字"})}},{key:"handleAddUsrAssets",value:function(e,t,a,l,n){n.stopPropagation();var s={name:e,part:t,job:a,id:l};this.setState({addNewUsrAsset:s,addNewUsrAssetBox:!0})}},{key:"handleCloseAddUsrAssets",value:function(e){e.stopPropagation(),this.setState({addNewUsrAssetBox:!1,conformMsg:""})}},{key:"handleCancelAddUsrAsset",value:function(){this.setState({addNewUsrAssetBox:!1,conformMsg:""})}},{key:"handleConformUsrAsset",value:function(){var e=this.state.addNewUsrAsset.id,t=(0,d.default)("input.addNewUsrAssetTypeKey").attr("title"),a=(0,d.default)("input.addNewUsrAssetNum").val(),l=new FormData;l.append("user_id",e),l.append("type",t),l.append("asset",a),l.append("file",(0,d.default)("#uploadFileForm .addFileBox")[0].files[0]);var n=this;""==t?n.setState({conformMsg:"请选择创建资产类型"}):""==a&&void 0==(0,d.default)("#uploadFileForm .addFileBox")[0].files[0]?n.setState({conformMsg:"请选择创建资产内容"}):(n.setState({showActionLoading:!0}),d.default.ajax({url:"/api/chain/create/",type:"POST",cache:!1,dataType:"json",contentType:!1,processData:!1,data:l,error:function(){n.setState({conformMsg:"创建失败",showActionLoading:!1})},success:function(e){200==e.code?n.setState({addNewUsrAssetBox:!1,conformMsg:"",showActionLoading:!1}):n.setState({conformMsg:"创建失败",showActionLoading:!1})}}))}},{key:"handleBackUsrList",value:function(){this.getUsrList(),this.setState({showUrsDetail:!1})}},{key:"handleCopyKey",value:function(e){document.getElementById(e).select(),document.execCommand("Copy")}},{key:"handleSettingUsrMsg",value:function(){this.setState({settingUsrBox:!0})}},{key:"handleCloseSetUsrBox",value:function(){this.setState({settingUsrBox:!1,conformMsg:""})}},{key:"handleCancelSetUsr",value:function(){this.setState({settingUsrBox:!1,conformMsg:""})}},{key:"handleConformSetUsr",value:function(){var e=this,t=(0,d.default)(".usrNameAdd").val(),a=(0,d.default)(".usrPartAdd").val(),l=(0,d.default)(".usrJobAdd").val(),n=(0,d.default)(".usrEmailAdd").val(),s=(0,d.default)(".usrPhoneAdd").val(),i=/^[\u4e00-\u9fa5_a-zA-Z0-9]{1,20}/,r=/^((\+86)|(0086)|0)?(13[0-9]|15[012356789]|17[013678]|18[0-9]|14[57])[0-9]{8}$/,o=new FormData;o.append("user_id",this.state.settingUsrId),o.append("user",t),o.append("email",n),o.append("phone",s),o.append("job",l),o.append("department",a),o.append("file",(0,d.default)("#uploadFileForm .uploadImg")[0].files[0]),i.test(a)?i.test(l)?r.test(s)?(e.setState({showActionLoading:!0}),d.default.ajax({url:"/api/chain_user/modify/",type:"POST",dataType:"json",cache:!1,contentType:!1,processData:!1,data:o,success:function(t){200==t.code?(e.setState({settingUsrBox:!1,showUrsDetail:!1,showActionLoading:!1}),e.getUsrList(1,10)):e.setState({conformMsg:"修改失败",showActionLoading:!1})},error:function(t){e.setState({conformMsg:"修改失败",showActionLoading:!1})}})):this.setState({conformMsg:"请输入正确的手机号码"}):this.setState({conformMsg:"请输入正确的职位"}):this.setState({conformMsg:"请输入正确的部门"})}},{key:"handleSearchUsrMsg",value:function(e,t){var a=(0,d.default)(".searchUsrPutIn").val(),l=this;l.setState({usrListDetail:!1}),d.default.ajax({url:"/api/chain_user/query_list/",type:"POST",dataType:"json",cache:!1,data:{page:e,pageSize:t,search:a},error:function(){l.setState({usrListDetail:[],dataListAllPage:pageNum,currentListPageNum:e})},success:function(t){var a=t.count%10==0?t.count/10:parseInt(t.count/10)+1;200==t.code?(l.setState({usrListDetail:t.list,dataListAllPage:a,currentListPageNum:e}),(0,d.default)(".searchUsrPutIn").val("")):l.setState({usrListDetail:[],dataListAllPage:a,currentListPageNum:e})}})}},{key:"handleChangePage",value:function(e){this.setState({currentListPageNum:e,usrListDetail:!1}),this.getUsrList(e,10)}},{key:"handleEnterPage",value:function(e){var t=/^[0-9]+$/,a=parseInt((0,d.default)(e.target).val());t.test((0,d.default)(e.target).val())||(0,d.default)(e.target).val(""),a>this.state.dataListAllPage&&(0,d.default)(e.target).val(this.state.dataListAllPage),a<=0&&(0,d.default)(e.target).val(""),13==e.keyCode&&t.test((0,d.default)(e.target).val())&&(this.setState({usrListDetail:!1,currentListPageNum:a}),this.getUsrList(a,10))}},{key:"handleJumpPage",value:function(){var e=parseInt((0,d.default)("#pageJumpNum").val());this.setState({usrListDetail:!1,currentListPageNum:e}),this.getUsrList(e,10)}},{key:"switchAccount",value:function(e,t,a){a.stopPropagation();var l;l=2==t||0==t?1:2,this.setState({limitAccountLoading:!0,limitAccountText:"正在请求..."});var n=this;d.default.ajax({url:"/api/chain_user/switch/",type:"POST",dataType:"json",data:{user_id:e,is_active:l},success:function(e){200==e.code?(n.setState({limitAccountLoading:!1,limitAccountText:"请求成功"}),n.getUsrList(n.state.currentListPageNum,10)):n.setState({limitAccountText:e.results}),setTimeout(function(){n.setState({limitAccountLoading:!1})},2e3)},error:function(e){n.setState({limitAccountText:"请求失败"}),setTimeout(function(){n.setState({limitAccountLoading:!1})},2e3)}})}},{key:"componentWillMount",value:function(){this.getUsrList(1,10)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return c.default.createElement("div",{style:{display:"3"==this.props.tabKey?"block":"none"}},c.default.createElement("h2",{className:"block-chain-sec-title"},c.default.createElement("b",{onClick:this.handleBackUsrList.bind(this)},"用户列表"),this.state.showUrsDetail&&c.default.createElement("span",null,c.default.createElement("b",{className:"the-select-usr"},"›  ",this.state.showUrsDetail.username),c.default.createElement("i",{className:"setting-icon",onClick:this.handleSettingUsrMsg.bind(this)},c.default.createElement("img",{src:"/static/img/setting-usr-icon.png",alt:""})))),c.default.createElement("div",{className:"datalistTitle",style:{display:this.state.usrListDetail?"block":"none"}},this.state.limitAccountLoading&&c.default.createElement("div",{className:"loadingAccount"},c.default.createElement("i",{className:"fa fa-spinner fa-spin fa-4x",style:{color:"#007AE1"}})," ",c.default.createElement("br",null),c.default.createElement("p",{className:"errorMsg"},this.state.limitAccountText)),c.default.createElement("div",{className:"searchPlugin deal-search"},c.default.createElement("input",{type:"text",placeholder:"搜索用户",className:"searchUsrPutIn"}),c.default.createElement("button",{className:"searchGo plugAction",onClick:this.handleSearchUsrMsg.bind(this,1,10)},"搜索")),c.default.createElement("table",{className:"databaseHostList  chainDealTitle"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",null,"用户"),c.default.createElement("th",null,"部门"),c.default.createElement("th",null,"职位"),c.default.createElement("th",null,"交易笔数"),c.default.createElement("th",null,"停用/启用账户")))),!this.state.usrListDetail&&c.default.createElement(E.default,null),this.state.usrListDetail&&this.state.usrListDetail.map(function(e,t){return c.default.createElement("div",{className:"dataList-content currentDealTab",key:t},c.default.createElement("table",{className:"databaseHostList"},c.default.createElement("tbody",null,c.default.createElement("tr",{onClick:this.handleToggleDetail.bind(this,e.id)},c.default.createElement("td",{className:"singleTab"},c.default.createElement("img",{src:null==e.photo?"/static/img/Avatar.png":e.photo,alt:"",className:"usr-msg-imgIcon"}),e.username),c.default.createElement("td",null,e.department),c.default.createElement("td",null,e.job),c.default.createElement("td",null,e.tran_count),c.default.createElement("td",null,c.default.createElement("button",{className:1==e.is_active?"limitAccount":"limitAccount accountForbidden",onClick:this.switchAccount.bind(this,e.id,e.is_active)},1==e.is_active?"停用":"启用"))))))}.bind(this)),c.default.createElement("div",{className:"pagination-all"},c.default.createElement(f.Pagination,{prev:!0,next:!0,first:!1,last:!1,ellipsis:!0,boundaryLinks:!0,items:this.state.dataListAllPage,activePage:this.state.currentListPageNum,maxButtons:7,onSelect:this.handleChangePage.bind(this)}),c.default.createElement("div",{className:"pageCount"},c.default.createElement("input",{className:"pageNum",id:"pageJumpNum",placeholder:"输入",onKeyUp:this.handleEnterPage.bind(this),onKeyDown:this.handleEnterPage.bind(this)}),c.default.createElement("img",{className:"searchNum",src:"/static/img/skip.svg",onClick:this.handleJumpPage.bind(this)})))),!this.state.showUrsDetail&&!this.state.usrListDetail&&c.default.createElement(E.default,null),this.state.showUrsDetail&&c.default.createElement("div",{className:"usrDetail"},c.default.createElement("div",{className:"usrMsg clearfix usrDetail-msg"},c.default.createElement("img",{src:null==this.state.showUrsDetail.photo?"/static/img/Avatar.png":this.state.showUrsDetail.photo,alt:"",className:"big-img-lt"}),c.default.createElement("span",{className:"icon-seeMore"}),c.default.createElement("div",{className:"rightMsg"},c.default.createElement("h1",null,this.state.showUrsDetail.username),c.default.createElement("h3",null),c.default.createElement("div",{className:"msgList clearfix"},c.default.createElement("div",{className:"msg-lt"},c.default.createElement("p",null,"职位 : ",c.default.createElement("i",null,this.state.showUrsDetail.job)," "),c.default.createElement("p",null,"部门 : ",c.default.createElement("i",null,this.state.showUrsDetail.department)," ")),c.default.createElement("div",{className:"msg-rt"},c.default.createElement("p",{className:"msg-email"},"邮箱 : ",c.default.createElement("i",null,this.state.showUrsDetail.email)),c.default.createElement("p",{className:"msg-phone"},"电话 : ",c.default.createElement("i",null,this.state.showUrsDetail.phone)))),c.default.createElement("div",{className:"usr-key clearfix"},c.default.createElement("div",{className:"copy-key"},c.default.createElement("input",{type:"text",readOnly:!0,value:this.state.showUrsDetail.public_key,id:"public_key"}),c.default.createElement("button",{className:"plugAction btn-copy-key",onClick:this.handleCopyKey.bind(this,"public_key")},"拷贝公钥")),c.default.createElement("div",{className:"copy-key"},c.default.createElement("input",{type:"text",readOnly:!0,value:this.state.showUrsDetail.private_key,id:"private_key"}),c.default.createElement("button",{className:"plugAction btn-copy-key",onClick:this.handleCopyKey.bind(this,"private_key")},"拷贝私钥"))))),this.state.showUrsDetail.dealList&&c.default.createElement("div",{className:"UsrDealList"},c.default.createElement("h2",{className:"block-chain-sec-title"},"交易记录"),c.default.createElement("div",{className:"datalistTitle"},c.default.createElement("table",{className:"databaseHostList chainDealTitle"},c.default.createElement("thead",null,c.default.createElement("tr",null,c.default.createElement("th",null,"业务类型"),c.default.createElement("th",null,"交易内容"),c.default.createElement("th",null,"交易时间"))))),this.state.showUrsDetail.dealList.map(function(e,t){return c.default.createElement("div",{className:"dataList-content currentDealTab",key:t},c.default.createElement("table",{className:"databaseHostList"},c.default.createElement("tbody",null,c.default.createElement("tr",null,c.default.createElement("td",{className:"singleTab"},e.type),c.default.createElement("td",null,e.asset),c.default.createElement("td",null,e.time)))))}))),this.state.addNewUsr&&c.default.createElement(h.default,{showActionLoading:this.state.showActionLoading,handleCloseAddUsrBox:this.handleCloseAddUsrBox.bind(this),conformMsg:this.state.conformMsg,handleCancelAddUsr:this.handleCancelAddUsr.bind(this),handleConformAddUsr:this.handleConformAddUsr.bind(this)}),this.state.addNewUsrAssetBox&&c.default.createElement(y.default,{showActionLoading:this.state.showActionLoading,addNewUsrAsset:this.state.addNewUsrAsset,handleCloseAddUsrAssets:this.handleCloseAddUsrAssets.bind(this),handleCancelAddUsrAsset:this.handleCancelAddUsrAsset.bind(this),handleConformUsrAsset:this.handleConformUsrAsset.bind(this),conformMsg:this.state.conformMsg}),this.state.settingUsrBox&&c.default.createElement(g.default,{showActionLoading:this.state.showActionLoading,settingUsrMsgList:this.state.settingUsrMsgList,handleCloseSetUsrBox:this.handleCloseSetUsrBox.bind(this),handleCancelSetUsr:this.handleCancelSetUsr.bind(this),handleConformSetUsr:this.handleConformSetUsr.bind(this),conformMsg:this.state.conformMsg}))}}]),t}(c.default.Component);t.default=N}});